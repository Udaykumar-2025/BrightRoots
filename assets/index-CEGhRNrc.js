(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mm(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var ld={exports:{}},Vi={},cd={exports:{}},H={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bs=Symbol.for("react.element"),pm=Symbol.for("react.portal"),gm=Symbol.for("react.fragment"),ym=Symbol.for("react.strict_mode"),vm=Symbol.for("react.profiler"),xm=Symbol.for("react.provider"),wm=Symbol.for("react.context"),bm=Symbol.for("react.forward_ref"),jm=Symbol.for("react.suspense"),_m=Symbol.for("react.memo"),Nm=Symbol.for("react.lazy"),vc=Symbol.iterator;function km(e){return e===null||typeof e!="object"?null:(e=vc&&e[vc]||e["@@iterator"],typeof e=="function"?e:null)}var ud={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dd=Object.assign,hd={};function gn(e,t,r){this.props=e,this.context=t,this.refs=hd,this.updater=r||ud}gn.prototype.isReactComponent={};gn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fd(){}fd.prototype=gn.prototype;function ol(e,t,r){this.props=e,this.context=t,this.refs=hd,this.updater=r||ud}var ll=ol.prototype=new fd;ll.constructor=ol;dd(ll,gn.prototype);ll.isPureReactComponent=!0;var xc=Array.isArray,md=Object.prototype.hasOwnProperty,cl={current:null},pd={key:!0,ref:!0,__self:!0,__source:!0};function gd(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)md.call(t,n)&&!pd.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:bs,type:e,key:i,ref:o,props:s,_owner:cl.current}}function Sm(e,t){return{$$typeof:bs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function ul(e){return typeof e=="object"&&e!==null&&e.$$typeof===bs}function Cm(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var wc=/\/+/g;function va(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cm(""+e.key):t.toString(36)}function ti(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case bs:case pm:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+va(o,0):n,xc(s)?(r="",e!=null&&(r=e.replace(wc,"$&/")+"/"),ti(s,t,r,"",function(u){return u})):s!=null&&(ul(s)&&(s=Sm(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(wc,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",xc(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+va(i,l);o+=ti(i,t,r,c,s)}else if(c=km(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+va(i,l++),o+=ti(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function As(e,t,r){if(e==null)return e;var n=[],s=0;return ti(e,n,"","",function(i){return t.call(r,i,s++)}),n}function Em(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ee={current:null},ri={transition:null},Pm={ReactCurrentDispatcher:Ee,ReactCurrentBatchConfig:ri,ReactCurrentOwner:cl};function yd(){throw Error("act(...) is not supported in production builds of React.")}H.Children={map:As,forEach:function(e,t,r){As(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return As(e,function(){t++}),t},toArray:function(e){return As(e,function(t){return t})||[]},only:function(e){if(!ul(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};H.Component=gn;H.Fragment=gm;H.Profiler=vm;H.PureComponent=ol;H.StrictMode=ym;H.Suspense=jm;H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pm;H.act=yd;H.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=dd({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=cl.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)md.call(t,c)&&!pd.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:bs,type:e.type,key:s,ref:i,props:n,_owner:o}};H.createContext=function(e){return e={$$typeof:wm,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:xm,_context:e},e.Consumer=e};H.createElement=gd;H.createFactory=function(e){var t=gd.bind(null,e);return t.type=e,t};H.createRef=function(){return{current:null}};H.forwardRef=function(e){return{$$typeof:bm,render:e}};H.isValidElement=ul;H.lazy=function(e){return{$$typeof:Nm,_payload:{_status:-1,_result:e},_init:Em}};H.memo=function(e,t){return{$$typeof:_m,type:e,compare:t===void 0?null:t}};H.startTransition=function(e){var t=ri.transition;ri.transition={};try{e()}finally{ri.transition=t}};H.unstable_act=yd;H.useCallback=function(e,t){return Ee.current.useCallback(e,t)};H.useContext=function(e){return Ee.current.useContext(e)};H.useDebugValue=function(){};H.useDeferredValue=function(e){return Ee.current.useDeferredValue(e)};H.useEffect=function(e,t){return Ee.current.useEffect(e,t)};H.useId=function(){return Ee.current.useId()};H.useImperativeHandle=function(e,t,r){return Ee.current.useImperativeHandle(e,t,r)};H.useInsertionEffect=function(e,t){return Ee.current.useInsertionEffect(e,t)};H.useLayoutEffect=function(e,t){return Ee.current.useLayoutEffect(e,t)};H.useMemo=function(e,t){return Ee.current.useMemo(e,t)};H.useReducer=function(e,t,r){return Ee.current.useReducer(e,t,r)};H.useRef=function(e){return Ee.current.useRef(e)};H.useState=function(e){return Ee.current.useState(e)};H.useSyncExternalStore=function(e,t,r){return Ee.current.useSyncExternalStore(e,t,r)};H.useTransition=function(){return Ee.current.useTransition()};H.version="18.3.1";cd.exports=H;var w=cd.exports;const bc=fm(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm=w,Rm=Symbol.for("react.element"),Am=Symbol.for("react.fragment"),Lm=Object.prototype.hasOwnProperty,$m=Tm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Om={key:!0,ref:!0,__self:!0,__source:!0};function vd(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Lm.call(t,n)&&!Om.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Rm,type:e,key:i,ref:o,props:s,_owner:$m.current}}Vi.Fragment=Am;Vi.jsx=vd;Vi.jsxs=vd;ld.exports=Vi;var a=ld.exports,xd={exports:{}},Be={},wd={exports:{}},bd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,P){var F=L.length;L.push(P);e:for(;0<F;){var T=F-1>>>1,I=L[T];if(0<s(I,P))L[T]=P,L[F]=I,F=T;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var P=L[0],F=L.pop();if(F!==P){L[0]=F;e:for(var T=0,I=L.length,ae=I>>>1;T<ae;){var Ze=2*(T+1)-1,ya=L[Ze],ur=Ze+1,Rs=L[ur];if(0>s(ya,F))ur<I&&0>s(Rs,ya)?(L[T]=Rs,L[ur]=F,T=ur):(L[T]=ya,L[Ze]=F,T=Ze);else if(ur<I&&0>s(Rs,F))L[T]=Rs,L[ur]=F,T=ur;else break e}}return P}function s(L,P){var F=L.sortIndex-P.sortIndex;return F!==0?F:L.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,m=3,y=!1,v=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(L){for(var P=r(u);P!==null;){if(P.callback===null)n(u);else if(P.startTime<=L)n(u),P.sortIndex=P.expirationTime,t(c,P);else break;P=r(u)}}function N(L){if(x=!1,f(L),!v)if(r(c)!==null)v=!0,S(k);else{var P=r(u);P!==null&&$(N,P.startTime-L)}}function k(L,P){v=!1,x&&(x=!1,p(C),C=-1),y=!0;var F=m;try{for(f(P),h=r(c);h!==null&&(!(h.expirationTime>P)||L&&!q());){var T=h.callback;if(typeof T=="function"){h.callback=null,m=h.priorityLevel;var I=T(h.expirationTime<=P);P=e.unstable_now(),typeof I=="function"?h.callback=I:h===r(c)&&n(c),f(P)}else n(c);h=r(c)}if(h!==null)var ae=!0;else{var Ze=r(u);Ze!==null&&$(N,Ze.startTime-P),ae=!1}return ae}finally{h=null,m=F,y=!1}}var j=!1,_=null,C=-1,E=5,A=-1;function q(){return!(e.unstable_now()-A<E)}function re(){if(_!==null){var L=e.unstable_now();A=L;var P=!0;try{P=_(!0,L)}finally{P?M():(j=!1,_=null)}}else j=!1}var M;if(typeof g=="function")M=function(){g(re)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Z=we.port2;we.port1.onmessage=re,M=function(){Z.postMessage(null)}}else M=function(){b(re,0)};function S(L){_=L,j||(j=!0,M())}function $(L,P){C=b(function(){L(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){v||y||(v=!0,S(k))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(L){switch(m){case 1:case 2:case 3:var P=3;break;default:P=m}var F=m;m=P;try{return L()}finally{m=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,P){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var F=m;m=L;try{return P()}finally{m=F}},e.unstable_scheduleCallback=function(L,P,F){var T=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?T+F:T):F=T,L){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=F+I,L={id:d++,callback:P,priorityLevel:L,startTime:F,expirationTime:I,sortIndex:-1},F>T?(L.sortIndex=F,t(u,L),r(c)===null&&L===r(u)&&(x?(p(C),C=-1):x=!0,$(N,F-T))):(L.sortIndex=I,t(c,L),v||y||(v=!0,S(k))),L},e.unstable_shouldYield=q,e.unstable_wrapCallback=function(L){var P=m;return function(){var F=m;m=P;try{return L.apply(this,arguments)}finally{m=F}}}})(bd);wd.exports=bd;var Im=wd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm=w,ze=Im;function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jd=new Set,es={};function Pr(e,t){ln(e,t),ln(e+"Capture",t)}function ln(e,t){for(es[e]=t,e=0;e<t.length;e++)jd.add(t[e])}var Pt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),to=Object.prototype.hasOwnProperty,Mm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jc={},_c={};function Um(e){return to.call(_c,e)?!0:to.call(jc,e)?!1:Mm.test(e)?_c[e]=!0:(jc[e]=!0,!1)}function Fm(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function zm(e,t,r,n){if(t===null||typeof t>"u"||Fm(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pe(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xe[e]=new Pe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xe[t]=new Pe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xe[e]=new Pe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xe[e]=new Pe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xe[e]=new Pe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xe[e]=new Pe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xe[e]=new Pe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xe[e]=new Pe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xe[e]=new Pe(e,5,!1,e.toLowerCase(),null,!1,!1)});var dl=/[\-:]([a-z])/g;function hl(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dl,hl);xe[t]=new Pe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dl,hl);xe[t]=new Pe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dl,hl);xe[t]=new Pe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xe[e]=new Pe(e,1,!1,e.toLowerCase(),null,!1,!1)});xe.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xe[e]=new Pe(e,1,!1,e.toLowerCase(),null,!0,!0)});function fl(e,t,r,n){var s=xe.hasOwnProperty(t)?xe[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(zm(t,r,s,n)&&(r=null),n||s===null?Um(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var $t=Dm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ls=Symbol.for("react.element"),Br=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),ml=Symbol.for("react.strict_mode"),ro=Symbol.for("react.profiler"),_d=Symbol.for("react.provider"),Nd=Symbol.for("react.context"),pl=Symbol.for("react.forward_ref"),no=Symbol.for("react.suspense"),so=Symbol.for("react.suspense_list"),gl=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),kd=Symbol.for("react.offscreen"),Nc=Symbol.iterator;function Nn(e){return e===null||typeof e!="object"?null:(e=Nc&&e[Nc]||e["@@iterator"],typeof e=="function"?e:null)}var ie=Object.assign,xa;function On(e){if(xa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);xa=t&&t[1]||""}return`
`+xa+e}var wa=!1;function ba(e,t){if(!e||wa)return"";wa=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{wa=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?On(e):""}function Bm(e){switch(e.tag){case 5:return On(e.type);case 16:return On("Lazy");case 13:return On("Suspense");case 19:return On("SuspenseList");case 0:case 2:case 15:return e=ba(e.type,!1),e;case 11:return e=ba(e.type.render,!1),e;case 1:return e=ba(e.type,!0),e;default:return""}}function io(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Wr:return"Fragment";case Br:return"Portal";case ro:return"Profiler";case ml:return"StrictMode";case no:return"Suspense";case so:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nd:return(e.displayName||"Context")+".Consumer";case _d:return(e._context.displayName||"Context")+".Provider";case pl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case gl:return t=e.displayName||null,t!==null?t:io(e.type)||"Memo";case Ft:t=e._payload,e=e._init;try{return io(e(t))}catch{}}return null}function Wm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return io(t);case 8:return t===ml?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function rr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hm(e){var t=Sd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function $s(e){e._valueTracker||(e._valueTracker=Hm(e))}function Cd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Sd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function yi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ao(e,t){var r=t.checked;return ie({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function kc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=rr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ed(e,t){t=t.checked,t!=null&&fl(e,"checked",t,!1)}function oo(e,t){Ed(e,t);var r=rr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lo(e,t.type,r):t.hasOwnProperty("defaultValue")&&lo(e,t.type,rr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function lo(e,t,r){(t!=="number"||yi(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var In=Array.isArray;function en(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+rr(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function co(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(R(91));return ie({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Cc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(R(92));if(In(r)){if(1<r.length)throw Error(R(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:rr(r)}}function Pd(e,t){var r=rr(t.value),n=rr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Ec(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Td(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Td(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Os,Rd=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Os=Os||document.createElement("div"),Os.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Os.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ts(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Fn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qm=["Webkit","ms","Moz","O"];Object.keys(Fn).forEach(function(e){qm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Fn[t]=Fn[e]})});function Ad(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Fn.hasOwnProperty(e)&&Fn[e]?(""+t).trim():t+"px"}function Ld(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Ad(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Vm=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ho(e,t){if(t){if(Vm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(R(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(R(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(t.style!=null&&typeof t.style!="object")throw Error(R(62))}}function fo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mo=null;function yl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var po=null,tn=null,rn=null;function Pc(e){if(e=Ns(e)){if(typeof po!="function")throw Error(R(280));var t=e.stateNode;t&&(t=Yi(t),po(e.stateNode,e.type,t))}}function $d(e){tn?rn?rn.push(e):rn=[e]:tn=e}function Od(){if(tn){var e=tn,t=rn;if(rn=tn=null,Pc(e),t)for(e=0;e<t.length;e++)Pc(t[e])}}function Id(e,t){return e(t)}function Dd(){}var ja=!1;function Md(e,t,r){if(ja)return e(t,r);ja=!0;try{return Id(e,t,r)}finally{ja=!1,(tn!==null||rn!==null)&&(Dd(),Od())}}function rs(e,t){var r=e.stateNode;if(r===null)return null;var n=Yi(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(R(231,t,typeof r));return r}var go=!1;if(Pt)try{var kn={};Object.defineProperty(kn,"passive",{get:function(){go=!0}}),window.addEventListener("test",kn,kn),window.removeEventListener("test",kn,kn)}catch{go=!1}function Gm(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var zn=!1,vi=null,xi=!1,yo=null,Km={onError:function(e){zn=!0,vi=e}};function Jm(e,t,r,n,s,i,o,l,c){zn=!1,vi=null,Gm.apply(Km,arguments)}function Qm(e,t,r,n,s,i,o,l,c){if(Jm.apply(this,arguments),zn){if(zn){var u=vi;zn=!1,vi=null}else throw Error(R(198));xi||(xi=!0,yo=u)}}function Tr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ud(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Tc(e){if(Tr(e)!==e)throw Error(R(188))}function Ym(e){var t=e.alternate;if(!t){if(t=Tr(e),t===null)throw Error(R(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Tc(s),e;if(i===n)return Tc(s),t;i=i.sibling}throw Error(R(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(R(189))}}if(r.alternate!==n)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?e:t}function Fd(e){return e=Ym(e),e!==null?zd(e):null}function zd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zd(e);if(t!==null)return t;e=e.sibling}return null}var Bd=ze.unstable_scheduleCallback,Rc=ze.unstable_cancelCallback,Xm=ze.unstable_shouldYield,Zm=ze.unstable_requestPaint,le=ze.unstable_now,ep=ze.unstable_getCurrentPriorityLevel,vl=ze.unstable_ImmediatePriority,Wd=ze.unstable_UserBlockingPriority,wi=ze.unstable_NormalPriority,tp=ze.unstable_LowPriority,Hd=ze.unstable_IdlePriority,Gi=null,pt=null;function rp(e){if(pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(Gi,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:ip,np=Math.log,sp=Math.LN2;function ip(e){return e>>>=0,e===0?32:31-(np(e)/sp|0)|0}var Is=64,Ds=4194304;function Dn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Dn(l):(i&=o,i!==0&&(n=Dn(i)))}else o=r&~s,o!==0?n=Dn(o):i!==0&&(n=Dn(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ot(t),s=1<<r,n|=e[r],t&=~s;return n}function ap(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function op(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=ap(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function vo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qd(){var e=Is;return Is<<=1,!(Is&4194240)&&(Is=64),e}function _a(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function js(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function lp(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ot(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function xl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ot(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var K=0;function Vd(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gd,wl,Kd,Jd,Qd,xo=!1,Ms=[],Kt=null,Jt=null,Qt=null,ns=new Map,ss=new Map,Wt=[],cp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ac(e,t){switch(e){case"focusin":case"focusout":Kt=null;break;case"dragenter":case"dragleave":Jt=null;break;case"mouseover":case"mouseout":Qt=null;break;case"pointerover":case"pointerout":ns.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ss.delete(t.pointerId)}}function Sn(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ns(t),t!==null&&wl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function up(e,t,r,n,s){switch(t){case"focusin":return Kt=Sn(Kt,e,t,r,n,s),!0;case"dragenter":return Jt=Sn(Jt,e,t,r,n,s),!0;case"mouseover":return Qt=Sn(Qt,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return ns.set(i,Sn(ns.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,ss.set(i,Sn(ss.get(i)||null,e,t,r,n,s)),!0}return!1}function Yd(e){var t=vr(e.target);if(t!==null){var r=Tr(t);if(r!==null){if(t=r.tag,t===13){if(t=Ud(r),t!==null){e.blockedOn=t,Qd(e.priority,function(){Kd(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ni(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=wo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);mo=n,r.target.dispatchEvent(n),mo=null}else return t=Ns(r),t!==null&&wl(t),e.blockedOn=r,!1;t.shift()}return!0}function Lc(e,t,r){ni(e)&&r.delete(t)}function dp(){xo=!1,Kt!==null&&ni(Kt)&&(Kt=null),Jt!==null&&ni(Jt)&&(Jt=null),Qt!==null&&ni(Qt)&&(Qt=null),ns.forEach(Lc),ss.forEach(Lc)}function Cn(e,t){e.blockedOn===t&&(e.blockedOn=null,xo||(xo=!0,ze.unstable_scheduleCallback(ze.unstable_NormalPriority,dp)))}function is(e){function t(s){return Cn(s,e)}if(0<Ms.length){Cn(Ms[0],e);for(var r=1;r<Ms.length;r++){var n=Ms[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Kt!==null&&Cn(Kt,e),Jt!==null&&Cn(Jt,e),Qt!==null&&Cn(Qt,e),ns.forEach(t),ss.forEach(t),r=0;r<Wt.length;r++)n=Wt[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Wt.length&&(r=Wt[0],r.blockedOn===null);)Yd(r),r.blockedOn===null&&Wt.shift()}var nn=$t.ReactCurrentBatchConfig,ji=!0;function hp(e,t,r,n){var s=K,i=nn.transition;nn.transition=null;try{K=1,bl(e,t,r,n)}finally{K=s,nn.transition=i}}function fp(e,t,r,n){var s=K,i=nn.transition;nn.transition=null;try{K=4,bl(e,t,r,n)}finally{K=s,nn.transition=i}}function bl(e,t,r,n){if(ji){var s=wo(e,t,r,n);if(s===null)La(e,t,n,_i,r),Ac(e,n);else if(up(s,e,t,r,n))n.stopPropagation();else if(Ac(e,n),t&4&&-1<cp.indexOf(e)){for(;s!==null;){var i=Ns(s);if(i!==null&&Gd(i),i=wo(e,t,r,n),i===null&&La(e,t,n,_i,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else La(e,t,n,null,r)}}var _i=null;function wo(e,t,r,n){if(_i=null,e=yl(n),e=vr(e),e!==null)if(t=Tr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ud(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return _i=e,null}function Xd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ep()){case vl:return 1;case Wd:return 4;case wi:case tp:return 16;case Hd:return 536870912;default:return 16}default:return 16}}var Vt=null,jl=null,si=null;function Zd(){if(si)return si;var e,t=jl,r=t.length,n,s="value"in Vt?Vt.value:Vt.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return si=s.slice(e,1<n?1-n:void 0)}function ii(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Us(){return!0}function $c(){return!1}function We(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Us:$c,this.isPropagationStopped=$c,this}return ie(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),t}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_l=We(yn),_s=ie({},yn,{view:0,detail:0}),mp=We(_s),Na,ka,En,Ki=ie({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==En&&(En&&e.type==="mousemove"?(Na=e.screenX-En.screenX,ka=e.screenY-En.screenY):ka=Na=0,En=e),Na)},movementY:function(e){return"movementY"in e?e.movementY:ka}}),Oc=We(Ki),pp=ie({},Ki,{dataTransfer:0}),gp=We(pp),yp=ie({},_s,{relatedTarget:0}),Sa=We(yp),vp=ie({},yn,{animationName:0,elapsedTime:0,pseudoElement:0}),xp=We(vp),wp=ie({},yn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bp=We(wp),jp=ie({},yn,{data:0}),Ic=We(jp),_p={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Np={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=kp[e])?!!t[e]:!1}function Nl(){return Sp}var Cp=ie({},_s,{key:function(e){if(e.key){var t=_p[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ii(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Np[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nl,charCode:function(e){return e.type==="keypress"?ii(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ii(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ep=We(Cp),Pp=ie({},Ki,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dc=We(Pp),Tp=ie({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nl}),Rp=We(Tp),Ap=ie({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lp=We(Ap),$p=ie({},Ki,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Op=We($p),Ip=[9,13,27,32],kl=Pt&&"CompositionEvent"in window,Bn=null;Pt&&"documentMode"in document&&(Bn=document.documentMode);var Dp=Pt&&"TextEvent"in window&&!Bn,eh=Pt&&(!kl||Bn&&8<Bn&&11>=Bn),Mc=" ",Uc=!1;function th(e,t){switch(e){case"keyup":return Ip.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hr=!1;function Mp(e,t){switch(e){case"compositionend":return rh(t);case"keypress":return t.which!==32?null:(Uc=!0,Mc);case"textInput":return e=t.data,e===Mc&&Uc?null:e;default:return null}}function Up(e,t){if(Hr)return e==="compositionend"||!kl&&th(e,t)?(e=Zd(),si=jl=Vt=null,Hr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return eh&&t.locale!=="ko"?null:t.data;default:return null}}var Fp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Fp[e.type]:t==="textarea"}function nh(e,t,r,n){$d(n),t=Ni(t,"onChange"),0<t.length&&(r=new _l("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Wn=null,as=null;function zp(e){mh(e,0)}function Ji(e){var t=Gr(e);if(Cd(t))return e}function Bp(e,t){if(e==="change")return t}var sh=!1;if(Pt){var Ca;if(Pt){var Ea="oninput"in document;if(!Ea){var zc=document.createElement("div");zc.setAttribute("oninput","return;"),Ea=typeof zc.oninput=="function"}Ca=Ea}else Ca=!1;sh=Ca&&(!document.documentMode||9<document.documentMode)}function Bc(){Wn&&(Wn.detachEvent("onpropertychange",ih),as=Wn=null)}function ih(e){if(e.propertyName==="value"&&Ji(as)){var t=[];nh(t,as,e,yl(e)),Md(zp,t)}}function Wp(e,t,r){e==="focusin"?(Bc(),Wn=t,as=r,Wn.attachEvent("onpropertychange",ih)):e==="focusout"&&Bc()}function Hp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ji(as)}function qp(e,t){if(e==="click")return Ji(t)}function Vp(e,t){if(e==="input"||e==="change")return Ji(t)}function Gp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ct=typeof Object.is=="function"?Object.is:Gp;function os(e,t){if(ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!to.call(t,s)||!ct(e[s],t[s]))return!1}return!0}function Wc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hc(e,t){var r=Wc(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Wc(r)}}function ah(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ah(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function oh(){for(var e=window,t=yi();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=yi(e.document)}return t}function Sl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kp(e){var t=oh(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ah(r.ownerDocument.documentElement,r)){if(n!==null&&Sl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Hc(r,i);var o=Hc(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Jp=Pt&&"documentMode"in document&&11>=document.documentMode,qr=null,bo=null,Hn=null,jo=!1;function qc(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;jo||qr==null||qr!==yi(n)||(n=qr,"selectionStart"in n&&Sl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Hn&&os(Hn,n)||(Hn=n,n=Ni(bo,"onSelect"),0<n.length&&(t=new _l("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=qr)))}function Fs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vr={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionend:Fs("Transition","TransitionEnd")},Pa={},lh={};Pt&&(lh=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function Qi(e){if(Pa[e])return Pa[e];if(!Vr[e])return e;var t=Vr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in lh)return Pa[e]=t[r];return e}var ch=Qi("animationend"),uh=Qi("animationiteration"),dh=Qi("animationstart"),hh=Qi("transitionend"),fh=new Map,Vc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ar(e,t){fh.set(e,t),Pr(t,[e])}for(var Ta=0;Ta<Vc.length;Ta++){var Ra=Vc[Ta],Qp=Ra.toLowerCase(),Yp=Ra[0].toUpperCase()+Ra.slice(1);ar(Qp,"on"+Yp)}ar(ch,"onAnimationEnd");ar(uh,"onAnimationIteration");ar(dh,"onAnimationStart");ar("dblclick","onDoubleClick");ar("focusin","onFocus");ar("focusout","onBlur");ar(hh,"onTransitionEnd");ln("onMouseEnter",["mouseout","mouseover"]);ln("onMouseLeave",["mouseout","mouseover"]);ln("onPointerEnter",["pointerout","pointerover"]);ln("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mn));function Gc(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Qm(n,t,void 0,e),e.currentTarget=null}function mh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Gc(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Gc(s,l,u),i=c}}}if(xi)throw e=yo,xi=!1,yo=null,e}function Y(e,t){var r=t[Co];r===void 0&&(r=t[Co]=new Set);var n=e+"__bubble";r.has(n)||(ph(t,e,2,!1),r.add(n))}function Aa(e,t,r){var n=0;t&&(n|=4),ph(r,e,n,t)}var zs="_reactListening"+Math.random().toString(36).slice(2);function ls(e){if(!e[zs]){e[zs]=!0,jd.forEach(function(r){r!=="selectionchange"&&(Xp.has(r)||Aa(r,!1,e),Aa(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zs]||(t[zs]=!0,Aa("selectionchange",!1,t))}}function ph(e,t,r,n){switch(Xd(t)){case 1:var s=hp;break;case 4:s=fp;break;default:s=bl}r=s.bind(null,t,r,e),s=void 0,!go||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function La(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=vr(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Md(function(){var u=i,d=yl(r),h=[];e:{var m=fh.get(e);if(m!==void 0){var y=_l,v=e;switch(e){case"keypress":if(ii(r)===0)break e;case"keydown":case"keyup":y=Ep;break;case"focusin":v="focus",y=Sa;break;case"focusout":v="blur",y=Sa;break;case"beforeblur":case"afterblur":y=Sa;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=gp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Rp;break;case ch:case uh:case dh:y=xp;break;case hh:y=Lp;break;case"scroll":y=mp;break;case"wheel":y=Op;break;case"copy":case"cut":case"paste":y=bp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Dc}var x=(t&4)!==0,b=!x&&e==="scroll",p=x?m!==null?m+"Capture":null:m;x=[];for(var g=u,f;g!==null;){f=g;var N=f.stateNode;if(f.tag===5&&N!==null&&(f=N,p!==null&&(N=rs(g,p),N!=null&&x.push(cs(g,N,f)))),b)break;g=g.return}0<x.length&&(m=new y(m,v,null,r,d),h.push({event:m,listeners:x}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",m&&r!==mo&&(v=r.relatedTarget||r.fromElement)&&(vr(v)||v[Tt]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(v=r.relatedTarget||r.toElement,y=u,v=v?vr(v):null,v!==null&&(b=Tr(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(y=null,v=u),y!==v)){if(x=Oc,N="onMouseLeave",p="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(x=Dc,N="onPointerLeave",p="onPointerEnter",g="pointer"),b=y==null?m:Gr(y),f=v==null?m:Gr(v),m=new x(N,g+"leave",y,r,d),m.target=b,m.relatedTarget=f,N=null,vr(d)===u&&(x=new x(p,g+"enter",v,r,d),x.target=f,x.relatedTarget=b,N=x),b=N,y&&v)t:{for(x=y,p=v,g=0,f=x;f;f=Lr(f))g++;for(f=0,N=p;N;N=Lr(N))f++;for(;0<g-f;)x=Lr(x),g--;for(;0<f-g;)p=Lr(p),f--;for(;g--;){if(x===p||p!==null&&x===p.alternate)break t;x=Lr(x),p=Lr(p)}x=null}else x=null;y!==null&&Kc(h,m,y,x,!1),v!==null&&b!==null&&Kc(h,b,v,x,!0)}}e:{if(m=u?Gr(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var k=Bp;else if(Fc(m))if(sh)k=Vp;else{k=Hp;var j=Wp}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=qp);if(k&&(k=k(e,u))){nh(h,k,r,d);break e}j&&j(e,m,u),e==="focusout"&&(j=m._wrapperState)&&j.controlled&&m.type==="number"&&lo(m,"number",m.value)}switch(j=u?Gr(u):window,e){case"focusin":(Fc(j)||j.contentEditable==="true")&&(qr=j,bo=u,Hn=null);break;case"focusout":Hn=bo=qr=null;break;case"mousedown":jo=!0;break;case"contextmenu":case"mouseup":case"dragend":jo=!1,qc(h,r,d);break;case"selectionchange":if(Jp)break;case"keydown":case"keyup":qc(h,r,d)}var _;if(kl)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Hr?th(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(eh&&r.locale!=="ko"&&(Hr||C!=="onCompositionStart"?C==="onCompositionEnd"&&Hr&&(_=Zd()):(Vt=d,jl="value"in Vt?Vt.value:Vt.textContent,Hr=!0)),j=Ni(u,C),0<j.length&&(C=new Ic(C,e,null,r,d),h.push({event:C,listeners:j}),_?C.data=_:(_=rh(r),_!==null&&(C.data=_)))),(_=Dp?Mp(e,r):Up(e,r))&&(u=Ni(u,"onBeforeInput"),0<u.length&&(d=new Ic("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=_))}mh(h,t)})}function cs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ni(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=rs(e,r),i!=null&&n.unshift(cs(e,i,s)),i=rs(e,t),i!=null&&n.push(cs(e,i,s))),e=e.return}return n}function Lr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kc(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=rs(r,i),c!=null&&o.unshift(cs(r,c,l))):s||(c=rs(r,i),c!=null&&o.push(cs(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Zp=/\r\n?/g,eg=/\u0000|\uFFFD/g;function Jc(e){return(typeof e=="string"?e:""+e).replace(Zp,`
`).replace(eg,"")}function Bs(e,t,r){if(t=Jc(t),Jc(e)!==t&&r)throw Error(R(425))}function ki(){}var _o=null,No=null;function ko(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var So=typeof setTimeout=="function"?setTimeout:void 0,tg=typeof clearTimeout=="function"?clearTimeout:void 0,Qc=typeof Promise=="function"?Promise:void 0,rg=typeof queueMicrotask=="function"?queueMicrotask:typeof Qc<"u"?function(e){return Qc.resolve(null).then(e).catch(ng)}:So;function ng(e){setTimeout(function(){throw e})}function $a(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),is(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);is(t)}function Yt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var vn=Math.random().toString(36).slice(2),mt="__reactFiber$"+vn,us="__reactProps$"+vn,Tt="__reactContainer$"+vn,Co="__reactEvents$"+vn,sg="__reactListeners$"+vn,ig="__reactHandles$"+vn;function vr(e){var t=e[mt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Tt]||r[mt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Yc(e);e!==null;){if(r=e[mt])return r;e=Yc(e)}return t}e=r,r=e.parentNode}return null}function Ns(e){return e=e[mt]||e[Tt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(R(33))}function Yi(e){return e[us]||null}var Eo=[],Kr=-1;function or(e){return{current:e}}function X(e){0>Kr||(e.current=Eo[Kr],Eo[Kr]=null,Kr--)}function Q(e,t){Kr++,Eo[Kr]=e.current,e.current=t}var nr={},ke=or(nr),$e=or(!1),_r=nr;function cn(e,t){var r=e.type.contextTypes;if(!r)return nr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Oe(e){return e=e.childContextTypes,e!=null}function Si(){X($e),X(ke)}function Xc(e,t,r){if(ke.current!==nr)throw Error(R(168));Q(ke,t),Q($e,r)}function gh(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(R(108,Wm(e)||"Unknown",s));return ie({},r,n)}function Ci(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||nr,_r=ke.current,Q(ke,e),Q($e,$e.current),!0}function Zc(e,t,r){var n=e.stateNode;if(!n)throw Error(R(169));r?(e=gh(e,t,_r),n.__reactInternalMemoizedMergedChildContext=e,X($e),X(ke),Q(ke,e)):X($e),Q($e,r)}var wt=null,Xi=!1,Oa=!1;function yh(e){wt===null?wt=[e]:wt.push(e)}function ag(e){Xi=!0,yh(e)}function lr(){if(!Oa&&wt!==null){Oa=!0;var e=0,t=K;try{var r=wt;for(K=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}wt=null,Xi=!1}catch(s){throw wt!==null&&(wt=wt.slice(e+1)),Bd(vl,lr),s}finally{K=t,Oa=!1}}return null}var Jr=[],Qr=0,Ei=null,Pi=0,He=[],qe=0,Nr=null,_t=1,Nt="";function mr(e,t){Jr[Qr++]=Pi,Jr[Qr++]=Ei,Ei=e,Pi=t}function vh(e,t,r){He[qe++]=_t,He[qe++]=Nt,He[qe++]=Nr,Nr=e;var n=_t;e=Nt;var s=32-ot(n)-1;n&=~(1<<s),r+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,_t=1<<32-ot(t)+s|r<<s|n,Nt=i+e}else _t=1<<i|r<<s|n,Nt=e}function Cl(e){e.return!==null&&(mr(e,1),vh(e,1,0))}function El(e){for(;e===Ei;)Ei=Jr[--Qr],Jr[Qr]=null,Pi=Jr[--Qr],Jr[Qr]=null;for(;e===Nr;)Nr=He[--qe],He[qe]=null,Nt=He[--qe],He[qe]=null,_t=He[--qe],He[qe]=null}var Fe=null,Ue=null,ee=!1,it=null;function xh(e,t){var r=Ve(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function eu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fe=e,Ue=Yt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fe=e,Ue=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Nr!==null?{id:_t,overflow:Nt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Ve(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Fe=e,Ue=null,!0):!1;default:return!1}}function Po(e){return(e.mode&1)!==0&&(e.flags&128)===0}function To(e){if(ee){var t=Ue;if(t){var r=t;if(!eu(e,t)){if(Po(e))throw Error(R(418));t=Yt(r.nextSibling);var n=Fe;t&&eu(e,t)?xh(n,r):(e.flags=e.flags&-4097|2,ee=!1,Fe=e)}}else{if(Po(e))throw Error(R(418));e.flags=e.flags&-4097|2,ee=!1,Fe=e}}}function tu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fe=e}function Ws(e){if(e!==Fe)return!1;if(!ee)return tu(e),ee=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ko(e.type,e.memoizedProps)),t&&(t=Ue)){if(Po(e))throw wh(),Error(R(418));for(;t;)xh(e,t),t=Yt(t.nextSibling)}if(tu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ue=Yt(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ue=null}}else Ue=Fe?Yt(e.stateNode.nextSibling):null;return!0}function wh(){for(var e=Ue;e;)e=Yt(e.nextSibling)}function un(){Ue=Fe=null,ee=!1}function Pl(e){it===null?it=[e]:it.push(e)}var og=$t.ReactCurrentBatchConfig;function Pn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var n=r.stateNode}if(!n)throw Error(R(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(R(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ru(e){var t=e._init;return t(e._payload)}function bh(e){function t(p,g){if(e){var f=p.deletions;f===null?(p.deletions=[g],p.flags|=16):f.push(g)}}function r(p,g){if(!e)return null;for(;g!==null;)t(p,g),g=g.sibling;return null}function n(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function s(p,g){return p=tr(p,g),p.index=0,p.sibling=null,p}function i(p,g,f){return p.index=f,e?(f=p.alternate,f!==null?(f=f.index,f<g?(p.flags|=2,g):f):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,g,f,N){return g===null||g.tag!==6?(g=Ba(f,p.mode,N),g.return=p,g):(g=s(g,f),g.return=p,g)}function c(p,g,f,N){var k=f.type;return k===Wr?d(p,g,f.props.children,N,f.key):g!==null&&(g.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ft&&ru(k)===g.type)?(N=s(g,f.props),N.ref=Pn(p,g,f),N.return=p,N):(N=hi(f.type,f.key,f.props,null,p.mode,N),N.ref=Pn(p,g,f),N.return=p,N)}function u(p,g,f,N){return g===null||g.tag!==4||g.stateNode.containerInfo!==f.containerInfo||g.stateNode.implementation!==f.implementation?(g=Wa(f,p.mode,N),g.return=p,g):(g=s(g,f.children||[]),g.return=p,g)}function d(p,g,f,N,k){return g===null||g.tag!==7?(g=jr(f,p.mode,N,k),g.return=p,g):(g=s(g,f),g.return=p,g)}function h(p,g,f){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ba(""+g,p.mode,f),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ls:return f=hi(g.type,g.key,g.props,null,p.mode,f),f.ref=Pn(p,null,g),f.return=p,f;case Br:return g=Wa(g,p.mode,f),g.return=p,g;case Ft:var N=g._init;return h(p,N(g._payload),f)}if(In(g)||Nn(g))return g=jr(g,p.mode,f,null),g.return=p,g;Hs(p,g)}return null}function m(p,g,f,N){var k=g!==null?g.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return k!==null?null:l(p,g,""+f,N);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ls:return f.key===k?c(p,g,f,N):null;case Br:return f.key===k?u(p,g,f,N):null;case Ft:return k=f._init,m(p,g,k(f._payload),N)}if(In(f)||Nn(f))return k!==null?null:d(p,g,f,N,null);Hs(p,f)}return null}function y(p,g,f,N,k){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(f)||null,l(g,p,""+N,k);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ls:return p=p.get(N.key===null?f:N.key)||null,c(g,p,N,k);case Br:return p=p.get(N.key===null?f:N.key)||null,u(g,p,N,k);case Ft:var j=N._init;return y(p,g,f,j(N._payload),k)}if(In(N)||Nn(N))return p=p.get(f)||null,d(g,p,N,k,null);Hs(g,N)}return null}function v(p,g,f,N){for(var k=null,j=null,_=g,C=g=0,E=null;_!==null&&C<f.length;C++){_.index>C?(E=_,_=null):E=_.sibling;var A=m(p,_,f[C],N);if(A===null){_===null&&(_=E);break}e&&_&&A.alternate===null&&t(p,_),g=i(A,g,C),j===null?k=A:j.sibling=A,j=A,_=E}if(C===f.length)return r(p,_),ee&&mr(p,C),k;if(_===null){for(;C<f.length;C++)_=h(p,f[C],N),_!==null&&(g=i(_,g,C),j===null?k=_:j.sibling=_,j=_);return ee&&mr(p,C),k}for(_=n(p,_);C<f.length;C++)E=y(_,p,C,f[C],N),E!==null&&(e&&E.alternate!==null&&_.delete(E.key===null?C:E.key),g=i(E,g,C),j===null?k=E:j.sibling=E,j=E);return e&&_.forEach(function(q){return t(p,q)}),ee&&mr(p,C),k}function x(p,g,f,N){var k=Nn(f);if(typeof k!="function")throw Error(R(150));if(f=k.call(f),f==null)throw Error(R(151));for(var j=k=null,_=g,C=g=0,E=null,A=f.next();_!==null&&!A.done;C++,A=f.next()){_.index>C?(E=_,_=null):E=_.sibling;var q=m(p,_,A.value,N);if(q===null){_===null&&(_=E);break}e&&_&&q.alternate===null&&t(p,_),g=i(q,g,C),j===null?k=q:j.sibling=q,j=q,_=E}if(A.done)return r(p,_),ee&&mr(p,C),k;if(_===null){for(;!A.done;C++,A=f.next())A=h(p,A.value,N),A!==null&&(g=i(A,g,C),j===null?k=A:j.sibling=A,j=A);return ee&&mr(p,C),k}for(_=n(p,_);!A.done;C++,A=f.next())A=y(_,p,C,A.value,N),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?C:A.key),g=i(A,g,C),j===null?k=A:j.sibling=A,j=A);return e&&_.forEach(function(re){return t(p,re)}),ee&&mr(p,C),k}function b(p,g,f,N){if(typeof f=="object"&&f!==null&&f.type===Wr&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Ls:e:{for(var k=f.key,j=g;j!==null;){if(j.key===k){if(k=f.type,k===Wr){if(j.tag===7){r(p,j.sibling),g=s(j,f.props.children),g.return=p,p=g;break e}}else if(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ft&&ru(k)===j.type){r(p,j.sibling),g=s(j,f.props),g.ref=Pn(p,j,f),g.return=p,p=g;break e}r(p,j);break}else t(p,j);j=j.sibling}f.type===Wr?(g=jr(f.props.children,p.mode,N,f.key),g.return=p,p=g):(N=hi(f.type,f.key,f.props,null,p.mode,N),N.ref=Pn(p,g,f),N.return=p,p=N)}return o(p);case Br:e:{for(j=f.key;g!==null;){if(g.key===j)if(g.tag===4&&g.stateNode.containerInfo===f.containerInfo&&g.stateNode.implementation===f.implementation){r(p,g.sibling),g=s(g,f.children||[]),g.return=p,p=g;break e}else{r(p,g);break}else t(p,g);g=g.sibling}g=Wa(f,p.mode,N),g.return=p,p=g}return o(p);case Ft:return j=f._init,b(p,g,j(f._payload),N)}if(In(f))return v(p,g,f,N);if(Nn(f))return x(p,g,f,N);Hs(p,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,g!==null&&g.tag===6?(r(p,g.sibling),g=s(g,f),g.return=p,p=g):(r(p,g),g=Ba(f,p.mode,N),g.return=p,p=g),o(p)):r(p,g)}return b}var dn=bh(!0),jh=bh(!1),Ti=or(null),Ri=null,Yr=null,Tl=null;function Rl(){Tl=Yr=Ri=null}function Al(e){var t=Ti.current;X(Ti),e._currentValue=t}function Ro(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function sn(e,t){Ri=e,Tl=Yr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Le=!0),e.firstContext=null)}function Je(e){var t=e._currentValue;if(Tl!==e)if(e={context:e,memoizedValue:t,next:null},Yr===null){if(Ri===null)throw Error(R(308));Yr=e,Ri.dependencies={lanes:0,firstContext:e}}else Yr=Yr.next=e;return t}var xr=null;function Ll(e){xr===null?xr=[e]:xr.push(e)}function _h(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Ll(t)):(r.next=s.next,s.next=r),t.interleaved=r,Rt(e,n)}function Rt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var zt=!1;function $l(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Xt(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,G&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Rt(e,r)}return s=n.interleaved,s===null?(t.next=t,Ll(n)):(t.next=s.next,s.next=t),n.interleaved=t,Rt(e,r)}function ai(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xl(e,r)}}function nu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ai(e,t,r,n){var s=e.updateQueue;zt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((n&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,x=l;switch(m=t,y=r,x.tag){case 1:if(v=x.payload,typeof v=="function"){h=v.call(y,h,m);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,m=typeof v=="function"?v.call(y,h,m):v,m==null)break e;h=ie({},h,m);break e;case 2:zt=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=h):d=d.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Sr|=o,e.lanes=o,e.memoizedState=h}}function su(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(R(191,s));s.call(n)}}}var ks={},gt=or(ks),ds=or(ks),hs=or(ks);function wr(e){if(e===ks)throw Error(R(174));return e}function Ol(e,t){switch(Q(hs,t),Q(ds,e),Q(gt,ks),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:uo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=uo(t,e)}X(gt),Q(gt,t)}function hn(){X(gt),X(ds),X(hs)}function kh(e){wr(hs.current);var t=wr(gt.current),r=uo(t,e.type);t!==r&&(Q(ds,e),Q(gt,r))}function Il(e){ds.current===e&&(X(gt),X(ds))}var ne=or(0);function Li(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ia=[];function Dl(){for(var e=0;e<Ia.length;e++)Ia[e]._workInProgressVersionPrimary=null;Ia.length=0}var oi=$t.ReactCurrentDispatcher,Da=$t.ReactCurrentBatchConfig,kr=0,se=null,he=null,pe=null,$i=!1,qn=!1,fs=0,lg=0;function be(){throw Error(R(321))}function Ml(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ct(e[r],t[r]))return!1;return!0}function Ul(e,t,r,n,s,i){if(kr=i,se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oi.current=e===null||e.memoizedState===null?hg:fg,e=r(n,s),qn){i=0;do{if(qn=!1,fs=0,25<=i)throw Error(R(301));i+=1,pe=he=null,t.updateQueue=null,oi.current=mg,e=r(n,s)}while(qn)}if(oi.current=Oi,t=he!==null&&he.next!==null,kr=0,pe=he=se=null,$i=!1,t)throw Error(R(300));return e}function Fl(){var e=fs!==0;return fs=0,e}function ft(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?se.memoizedState=pe=e:pe=pe.next=e,pe}function Qe(){if(he===null){var e=se.alternate;e=e!==null?e.memoizedState:null}else e=he.next;var t=pe===null?se.memoizedState:pe.next;if(t!==null)pe=t,he=e;else{if(e===null)throw Error(R(310));he=e,e={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},pe===null?se.memoizedState=pe=e:pe=pe.next=e}return pe}function ms(e,t){return typeof t=="function"?t(e):t}function Ma(e){var t=Qe(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=he,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((kr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,se.lanes|=d,Sr|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,ct(n,t.memoizedState)||(Le=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,se.lanes|=i,Sr|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ua(e){var t=Qe(),r=t.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);ct(i,t.memoizedState)||(Le=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Sh(){}function Ch(e,t){var r=se,n=Qe(),s=t(),i=!ct(n.memoizedState,s);if(i&&(n.memoizedState=s,Le=!0),n=n.queue,zl(Th.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||pe!==null&&pe.memoizedState.tag&1){if(r.flags|=2048,ps(9,Ph.bind(null,r,n,s,t),void 0,null),ge===null)throw Error(R(349));kr&30||Eh(r,t,s)}return s}function Eh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ph(e,t,r,n){t.value=r,t.getSnapshot=n,Rh(t)&&Ah(e)}function Th(e,t,r){return r(function(){Rh(t)&&Ah(e)})}function Rh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ct(e,r)}catch{return!0}}function Ah(e){var t=Rt(e,1);t!==null&&lt(t,e,1,-1)}function iu(e){var t=ft();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ms,lastRenderedState:e},t.queue=e,e=e.dispatch=dg.bind(null,se,e),[t.memoizedState,e]}function ps(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Lh(){return Qe().memoizedState}function li(e,t,r,n){var s=ft();se.flags|=e,s.memoizedState=ps(1|t,r,void 0,n===void 0?null:n)}function Zi(e,t,r,n){var s=Qe();n=n===void 0?null:n;var i=void 0;if(he!==null){var o=he.memoizedState;if(i=o.destroy,n!==null&&Ml(n,o.deps)){s.memoizedState=ps(t,r,i,n);return}}se.flags|=e,s.memoizedState=ps(1|t,r,i,n)}function au(e,t){return li(8390656,8,e,t)}function zl(e,t){return Zi(2048,8,e,t)}function $h(e,t){return Zi(4,2,e,t)}function Oh(e,t){return Zi(4,4,e,t)}function Ih(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dh(e,t,r){return r=r!=null?r.concat([e]):null,Zi(4,4,Ih.bind(null,t,e),r)}function Bl(){}function Mh(e,t){var r=Qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ml(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Uh(e,t){var r=Qe();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ml(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Fh(e,t,r){return kr&21?(ct(r,t)||(r=qd(),se.lanes|=r,Sr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Le=!0),e.memoizedState=r)}function cg(e,t){var r=K;K=r!==0&&4>r?r:4,e(!0);var n=Da.transition;Da.transition={};try{e(!1),t()}finally{K=r,Da.transition=n}}function zh(){return Qe().memoizedState}function ug(e,t,r){var n=er(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Bh(e))Wh(t,r);else if(r=_h(e,t,r,n),r!==null){var s=Ce();lt(r,e,n,s),Hh(r,t,n)}}function dg(e,t,r){var n=er(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bh(e))Wh(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,ct(l,o)){var c=t.interleaved;c===null?(s.next=s,Ll(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=_h(e,t,s,n),r!==null&&(s=Ce(),lt(r,e,n,s),Hh(r,t,n))}}function Bh(e){var t=e.alternate;return e===se||t!==null&&t===se}function Wh(e,t){qn=$i=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Hh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,xl(e,r)}}var Oi={readContext:Je,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useInsertionEffect:be,useLayoutEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useMutableSource:be,useSyncExternalStore:be,useId:be,unstable_isNewReconciler:!1},hg={readContext:Je,useCallback:function(e,t){return ft().memoizedState=[e,t===void 0?null:t],e},useContext:Je,useEffect:au,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,li(4194308,4,Ih.bind(null,t,e),r)},useLayoutEffect:function(e,t){return li(4194308,4,e,t)},useInsertionEffect:function(e,t){return li(4,2,e,t)},useMemo:function(e,t){var r=ft();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ft();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ug.bind(null,se,e),[n.memoizedState,e]},useRef:function(e){var t=ft();return e={current:e},t.memoizedState=e},useState:iu,useDebugValue:Bl,useDeferredValue:function(e){return ft().memoizedState=e},useTransition:function(){var e=iu(!1),t=e[0];return e=cg.bind(null,e[1]),ft().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=se,s=ft();if(ee){if(r===void 0)throw Error(R(407));r=r()}else{if(r=t(),ge===null)throw Error(R(349));kr&30||Eh(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,au(Th.bind(null,n,i,e),[e]),n.flags|=2048,ps(9,Ph.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=ft(),t=ge.identifierPrefix;if(ee){var r=Nt,n=_t;r=(n&~(1<<32-ot(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=fs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=lg++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fg={readContext:Je,useCallback:Mh,useContext:Je,useEffect:zl,useImperativeHandle:Dh,useInsertionEffect:$h,useLayoutEffect:Oh,useMemo:Uh,useReducer:Ma,useRef:Lh,useState:function(){return Ma(ms)},useDebugValue:Bl,useDeferredValue:function(e){var t=Qe();return Fh(t,he.memoizedState,e)},useTransition:function(){var e=Ma(ms)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:Sh,useSyncExternalStore:Ch,useId:zh,unstable_isNewReconciler:!1},mg={readContext:Je,useCallback:Mh,useContext:Je,useEffect:zl,useImperativeHandle:Dh,useInsertionEffect:$h,useLayoutEffect:Oh,useMemo:Uh,useReducer:Ua,useRef:Lh,useState:function(){return Ua(ms)},useDebugValue:Bl,useDeferredValue:function(e){var t=Qe();return he===null?t.memoizedState=e:Fh(t,he.memoizedState,e)},useTransition:function(){var e=Ua(ms)[0],t=Qe().memoizedState;return[e,t]},useMutableSource:Sh,useSyncExternalStore:Ch,useId:zh,unstable_isNewReconciler:!1};function rt(e,t){if(e&&e.defaultProps){t=ie({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ao(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ie({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ea={isMounted:function(e){return(e=e._reactInternals)?Tr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ce(),s=er(e),i=kt(n,s);i.payload=t,r!=null&&(i.callback=r),t=Xt(e,i,s),t!==null&&(lt(t,e,s,n),ai(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ce(),s=er(e),i=kt(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Xt(e,i,s),t!==null&&(lt(t,e,s,n),ai(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ce(),n=er(e),s=kt(r,n);s.tag=2,t!=null&&(s.callback=t),t=Xt(e,s,n),t!==null&&(lt(t,e,n,r),ai(t,e,n))}};function ou(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!os(r,n)||!os(s,i):!0}function qh(e,t,r){var n=!1,s=nr,i=t.contextType;return typeof i=="object"&&i!==null?i=Je(i):(s=Oe(t)?_r:ke.current,n=t.contextTypes,i=(n=n!=null)?cn(e,s):nr),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ea,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function lu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ea.enqueueReplaceState(t,t.state,null)}function Lo(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},$l(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Je(i):(i=Oe(t)?_r:ke.current,s.context=cn(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Ao(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&ea.enqueueReplaceState(s,s.state,null),Ai(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function fn(e,t){try{var r="",n=t;do r+=Bm(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function Fa(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function $o(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var pg=typeof WeakMap=="function"?WeakMap:Map;function Vh(e,t,r){r=kt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Di||(Di=!0,Ho=n),$o(e,t)},r}function Gh(e,t,r){r=kt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){$o(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){$o(e,t),typeof n!="function"&&(Zt===null?Zt=new Set([this]):Zt.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function cu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new pg;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Pg.bind(null,e,t,r),t.then(e,e))}function uu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function du(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=kt(-1,1),t.tag=2,Xt(r,t,1))),r.lanes|=1),e)}var gg=$t.ReactCurrentOwner,Le=!1;function Se(e,t,r,n){t.child=e===null?jh(t,null,r,n):dn(t,e.child,r,n)}function hu(e,t,r,n,s){r=r.render;var i=t.ref;return sn(t,s),n=Ul(e,t,r,n,i,s),r=Fl(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,At(e,t,s)):(ee&&r&&Cl(t),t.flags|=1,Se(e,t,n,s),t.child)}function fu(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Ql(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,Kh(e,t,i,n,s)):(e=hi(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:os,r(o,n)&&e.ref===t.ref)return At(e,t,s)}return t.flags|=1,e=tr(i,n),e.ref=t.ref,e.return=t,t.child=e}function Kh(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(os(i,n)&&e.ref===t.ref)if(Le=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Le=!0);else return t.lanes=e.lanes,At(e,t,s)}return Oo(e,t,r,n,s)}function Jh(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Q(Zr,Me),Me|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Q(Zr,Me),Me|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Q(Zr,Me),Me|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Q(Zr,Me),Me|=n;return Se(e,t,s,r),t.child}function Qh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Oo(e,t,r,n,s){var i=Oe(r)?_r:ke.current;return i=cn(t,i),sn(t,s),r=Ul(e,t,r,n,i,s),n=Fl(),e!==null&&!Le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,At(e,t,s)):(ee&&n&&Cl(t),t.flags|=1,Se(e,t,r,s),t.child)}function mu(e,t,r,n,s){if(Oe(r)){var i=!0;Ci(t)}else i=!1;if(sn(t,s),t.stateNode===null)ci(e,t),qh(t,r,n),Lo(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Je(u):(u=Oe(r)?_r:ke.current,u=cn(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&lu(t,o,n,u),zt=!1;var m=t.memoizedState;o.state=m,Ai(t,n,o,s),c=t.memoizedState,l!==n||m!==c||$e.current||zt?(typeof d=="function"&&(Ao(t,r,d,n),c=t.memoizedState),(l=zt||ou(t,r,l,n,m,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Nh(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:rt(t.type,l),o.props=u,h=t.pendingProps,m=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Je(c):(c=Oe(r)?_r:ke.current,c=cn(t,c));var y=r.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||m!==c)&&lu(t,o,n,c),zt=!1,m=t.memoizedState,o.state=m,Ai(t,n,o,s);var v=t.memoizedState;l!==h||m!==v||$e.current||zt?(typeof y=="function"&&(Ao(t,r,y,n),v=t.memoizedState),(u=zt||ou(t,r,u,n,m,v,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),n=!1)}return Io(e,t,r,n,i,s)}function Io(e,t,r,n,s,i){Qh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Zc(t,r,!1),At(e,t,i);n=t.stateNode,gg.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=dn(t,e.child,null,i),t.child=dn(t,null,l,i)):Se(e,t,l,i),t.memoizedState=n.state,s&&Zc(t,r,!0),t.child}function Yh(e){var t=e.stateNode;t.pendingContext?Xc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Xc(e,t.context,!1),Ol(e,t.containerInfo)}function pu(e,t,r,n,s){return un(),Pl(s),t.flags|=256,Se(e,t,r,n),t.child}var Do={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xh(e,t,r){var n=t.pendingProps,s=ne.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Q(ne,s&1),e===null)return To(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=na(o,n,0,null),e=jr(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Mo(r),t.memoizedState=Do,e):Wl(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return yg(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=tr(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=tr(l,i):(i=jr(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?Mo(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=Do,n}return i=e.child,e=i.sibling,n=tr(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Wl(e,t){return t=na({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qs(e,t,r,n){return n!==null&&Pl(n),dn(t,e.child,null,r),e=Wl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function yg(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=Fa(Error(R(422))),qs(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=na({mode:"visible",children:n.children},s,0,null),i=jr(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&dn(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Do,i);if(!(t.mode&1))return qs(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(R(419)),n=Fa(i,n,void 0),qs(e,t,o,n)}if(l=(o&e.childLanes)!==0,Le||l){if(n=ge,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Rt(e,s),lt(n,e,s,-1))}return Jl(),n=Fa(Error(R(421))),qs(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=Tg.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Ue=Yt(s.nextSibling),Fe=t,ee=!0,it=null,e!==null&&(He[qe++]=_t,He[qe++]=Nt,He[qe++]=Nr,_t=e.id,Nt=e.overflow,Nr=t),t=Wl(t,n.children),t.flags|=4096,t)}function gu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Ro(e.return,t,r)}function za(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Zh(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Se(e,t,n.children,r),n=ne.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gu(e,r,t);else if(e.tag===19)gu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Q(ne,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Li(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),za(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Li(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}za(t,!0,r,null,i);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ci(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function At(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Sr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(R(153));if(t.child!==null){for(e=t.child,r=tr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=tr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function vg(e,t,r){switch(t.tag){case 3:Yh(t),un();break;case 5:kh(t);break;case 1:Oe(t.type)&&Ci(t);break;case 4:Ol(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Q(Ti,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Q(ne,ne.current&1),t.flags|=128,null):r&t.child.childLanes?Xh(e,t,r):(Q(ne,ne.current&1),e=At(e,t,r),e!==null?e.sibling:null);Q(ne,ne.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Zh(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Q(ne,ne.current),n)break;return null;case 22:case 23:return t.lanes=0,Jh(e,t,r)}return At(e,t,r)}var ef,Uo,tf,rf;ef=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Uo=function(){};tf=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,wr(gt.current);var i=null;switch(r){case"input":s=ao(e,s),n=ao(e,n),i=[];break;case"select":s=ie({},s,{value:void 0}),n=ie({},n,{value:void 0}),i=[];break;case"textarea":s=co(e,s),n=co(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ki)}ho(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(es.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(es.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Y("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};rf=function(e,t,r,n){r!==n&&(t.flags|=4)};function Tn(e,t){if(!ee)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function xg(e,t,r){var n=t.pendingProps;switch(El(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return Oe(t.type)&&Si(),je(t),null;case 3:return n=t.stateNode,hn(),X($e),X(ke),Dl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ws(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,it!==null&&(Go(it),it=null))),Uo(e,t),je(t),null;case 5:Il(t);var s=wr(hs.current);if(r=t.type,e!==null&&t.stateNode!=null)tf(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(R(166));return je(t),null}if(e=wr(gt.current),Ws(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[mt]=t,n[us]=i,e=(t.mode&1)!==0,r){case"dialog":Y("cancel",n),Y("close",n);break;case"iframe":case"object":case"embed":Y("load",n);break;case"video":case"audio":for(s=0;s<Mn.length;s++)Y(Mn[s],n);break;case"source":Y("error",n);break;case"img":case"image":case"link":Y("error",n),Y("load",n);break;case"details":Y("toggle",n);break;case"input":kc(n,i),Y("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Y("invalid",n);break;case"textarea":Cc(n,i),Y("invalid",n)}ho(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bs(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bs(n.textContent,l,e),s=["children",""+l]):es.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Y("scroll",n)}switch(r){case"input":$s(n),Sc(n,i,!0);break;case"textarea":$s(n),Ec(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=ki)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Td(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[mt]=t,e[us]=n,ef(e,t,!1,!1),t.stateNode=e;e:{switch(o=fo(r,n),r){case"dialog":Y("cancel",e),Y("close",e),s=n;break;case"iframe":case"object":case"embed":Y("load",e),s=n;break;case"video":case"audio":for(s=0;s<Mn.length;s++)Y(Mn[s],e);s=n;break;case"source":Y("error",e),s=n;break;case"img":case"image":case"link":Y("error",e),Y("load",e),s=n;break;case"details":Y("toggle",e),s=n;break;case"input":kc(e,n),s=ao(e,n),Y("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ie({},n,{value:void 0}),Y("invalid",e);break;case"textarea":Cc(e,n),s=co(e,n),Y("invalid",e);break;default:s=n}ho(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Ld(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Rd(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ts(e,c):typeof c=="number"&&ts(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(es.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Y("scroll",e):c!=null&&fl(e,i,c,o))}switch(r){case"input":$s(e),Sc(e,n,!1);break;case"textarea":$s(e),Ec(e);break;case"option":n.value!=null&&e.setAttribute("value",""+rr(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?en(e,!!n.multiple,i,!1):n.defaultValue!=null&&en(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ki)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)rf(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(R(166));if(r=wr(hs.current),wr(gt.current),Ws(t)){if(n=t.stateNode,r=t.memoizedProps,n[mt]=t,(i=n.nodeValue!==r)&&(e=Fe,e!==null))switch(e.tag){case 3:Bs(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bs(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[mt]=t,t.stateNode=n}return je(t),null;case 13:if(X(ne),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ee&&Ue!==null&&t.mode&1&&!(t.flags&128))wh(),un(),t.flags|=98560,i=!1;else if(i=Ws(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(R(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(R(317));i[mt]=t}else un(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),i=!1}else it!==null&&(Go(it),it=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ne.current&1?fe===0&&(fe=3):Jl())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return hn(),Uo(e,t),e===null&&ls(t.stateNode.containerInfo),je(t),null;case 10:return Al(t.type._context),je(t),null;case 17:return Oe(t.type)&&Si(),je(t),null;case 19:if(X(ne),i=t.memoizedState,i===null)return je(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Tn(i,!1);else{if(fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Li(e),o!==null){for(t.flags|=128,Tn(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Q(ne,ne.current&1|2),t.child}e=e.sibling}i.tail!==null&&le()>mn&&(t.flags|=128,n=!0,Tn(i,!1),t.lanes=4194304)}else{if(!n)if(e=Li(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Tn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ee)return je(t),null}else 2*le()-i.renderingStartTime>mn&&r!==1073741824&&(t.flags|=128,n=!0,Tn(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=le(),t.sibling=null,r=ne.current,Q(ne,n?r&1|2:r&1),t):(je(t),null);case 22:case 23:return Kl(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Me&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(R(156,t.tag))}function wg(e,t){switch(El(t),t.tag){case 1:return Oe(t.type)&&Si(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hn(),X($e),X(ke),Dl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Il(t),null;case 13:if(X(ne),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(R(340));un()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X(ne),null;case 4:return hn(),null;case 10:return Al(t.type._context),null;case 22:case 23:return Kl(),null;case 24:return null;default:return null}}var Vs=!1,Ne=!1,bg=typeof WeakSet=="function"?WeakSet:Set,O=null;function Xr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){oe(e,t,n)}else r.current=null}function Fo(e,t,r){try{r()}catch(n){oe(e,t,n)}}var yu=!1;function jg(e,t){if(_o=ji,e=oh(),Sl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,m=null;t:for(;;){for(var y;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(y=h.firstChild)!==null;)m=h,h=y;for(;;){if(h===e)break t;if(m===r&&++u===s&&(l=o),m===i&&++d===n&&(c=o),(y=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=y}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(No={focusedElem:e,selectionRange:r},ji=!1,O=t;O!==null;)if(t=O,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,O=e;else for(;O!==null;){t=O;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,b=v.memoizedState,p=t.stateNode,g=p.getSnapshotBeforeUpdate(t.elementType===t.type?x:rt(t.type,x),b);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(N){oe(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,O=e;break}O=t.return}return v=yu,yu=!1,v}function Vn(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Fo(t,r,i)}s=s.next}while(s!==n)}}function ta(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function zo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function nf(e){var t=e.alternate;t!==null&&(e.alternate=null,nf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[mt],delete t[us],delete t[Co],delete t[sg],delete t[ig])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sf(e){return e.tag===5||e.tag===3||e.tag===4}function vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ki));else if(n!==4&&(e=e.child,e!==null))for(Bo(e,t,r),e=e.sibling;e!==null;)Bo(e,t,r),e=e.sibling}function Wo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Wo(e,t,r),e=e.sibling;e!==null;)Wo(e,t,r),e=e.sibling}var ye=null,nt=!1;function Dt(e,t,r){for(r=r.child;r!==null;)af(e,t,r),r=r.sibling}function af(e,t,r){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(Gi,r)}catch{}switch(r.tag){case 5:Ne||Xr(r,t);case 6:var n=ye,s=nt;ye=null,Dt(e,t,r),ye=n,nt=s,ye!==null&&(nt?(e=ye,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ye.removeChild(r.stateNode));break;case 18:ye!==null&&(nt?(e=ye,r=r.stateNode,e.nodeType===8?$a(e.parentNode,r):e.nodeType===1&&$a(e,r),is(e)):$a(ye,r.stateNode));break;case 4:n=ye,s=nt,ye=r.stateNode.containerInfo,nt=!0,Dt(e,t,r),ye=n,nt=s;break;case 0:case 11:case 14:case 15:if(!Ne&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Fo(r,t,o),s=s.next}while(s!==n)}Dt(e,t,r);break;case 1:if(!Ne&&(Xr(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){oe(r,t,l)}Dt(e,t,r);break;case 21:Dt(e,t,r);break;case 22:r.mode&1?(Ne=(n=Ne)||r.memoizedState!==null,Dt(e,t,r),Ne=n):Dt(e,t,r);break;default:Dt(e,t,r)}}function xu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new bg),t.forEach(function(n){var s=Rg.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function et(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ye=l.stateNode,nt=!1;break e;case 3:ye=l.stateNode.containerInfo,nt=!0;break e;case 4:ye=l.stateNode.containerInfo,nt=!0;break e}l=l.return}if(ye===null)throw Error(R(160));af(i,o,s),ye=null,nt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){oe(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)of(t,e),t=t.sibling}function of(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(et(t,e),ht(e),n&4){try{Vn(3,e,e.return),ta(3,e)}catch(x){oe(e,e.return,x)}try{Vn(5,e,e.return)}catch(x){oe(e,e.return,x)}}break;case 1:et(t,e),ht(e),n&512&&r!==null&&Xr(r,r.return);break;case 5:if(et(t,e),ht(e),n&512&&r!==null&&Xr(r,r.return),e.flags&32){var s=e.stateNode;try{ts(s,"")}catch(x){oe(e,e.return,x)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ed(s,i),fo(l,o);var u=fo(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?Ld(s,h):d==="dangerouslySetInnerHTML"?Rd(s,h):d==="children"?ts(s,h):fl(s,d,h,u)}switch(l){case"input":oo(s,i);break;case"textarea":Pd(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?en(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?en(s,!!i.multiple,i.defaultValue,!0):en(s,!!i.multiple,i.multiple?[]:"",!1))}s[us]=i}catch(x){oe(e,e.return,x)}}break;case 6:if(et(t,e),ht(e),n&4){if(e.stateNode===null)throw Error(R(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(x){oe(e,e.return,x)}}break;case 3:if(et(t,e),ht(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{is(t.containerInfo)}catch(x){oe(e,e.return,x)}break;case 4:et(t,e),ht(e);break;case 13:et(t,e),ht(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vl=le())),n&4&&xu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ne=(u=Ne)||d,et(t,e),Ne=u):et(t,e),ht(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(O=e,d=e.child;d!==null;){for(h=O=d;O!==null;){switch(m=O,y=m.child,m.tag){case 0:case 11:case 14:case 15:Vn(4,m,m.return);break;case 1:Xr(m,m.return);var v=m.stateNode;if(typeof v.componentWillUnmount=="function"){n=m,r=m.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(x){oe(n,r,x)}}break;case 5:Xr(m,m.return);break;case 22:if(m.memoizedState!==null){bu(h);continue}}y!==null?(y.return=m,O=y):bu(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ad("display",o))}catch(x){oe(e,e.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){oe(e,e.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:et(t,e),ht(e),n&4&&xu(e);break;case 21:break;default:et(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(sf(r)){var n=r;break e}r=r.return}throw Error(R(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ts(s,""),n.flags&=-33);var i=vu(e);Wo(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=vu(e);Bo(e,l,o);break;default:throw Error(R(161))}}catch(c){oe(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _g(e,t,r){O=e,lf(e)}function lf(e,t,r){for(var n=(e.mode&1)!==0;O!==null;){var s=O,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Vs;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Ne;l=Vs;var u=Ne;if(Vs=o,(Ne=c)&&!u)for(O=s;O!==null;)o=O,c=o.child,o.tag===22&&o.memoizedState!==null?ju(s):c!==null?(c.return=o,O=c):ju(s);for(;i!==null;)O=i,lf(i),i=i.sibling;O=s,Vs=l,Ne=u}wu(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,O=i):wu(e)}}function wu(e){for(;O!==null;){var t=O;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ne||ta(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ne)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:rt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&su(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}su(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&is(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Ne||t.flags&512&&zo(t)}catch(m){oe(t,t.return,m)}}if(t===e){O=null;break}if(r=t.sibling,r!==null){r.return=t.return,O=r;break}O=t.return}}function bu(e){for(;O!==null;){var t=O;if(t===e){O=null;break}var r=t.sibling;if(r!==null){r.return=t.return,O=r;break}O=t.return}}function ju(e){for(;O!==null;){var t=O;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ta(4,t)}catch(c){oe(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){oe(t,s,c)}}var i=t.return;try{zo(t)}catch(c){oe(t,i,c)}break;case 5:var o=t.return;try{zo(t)}catch(c){oe(t,o,c)}}}catch(c){oe(t,t.return,c)}if(t===e){O=null;break}var l=t.sibling;if(l!==null){l.return=t.return,O=l;break}O=t.return}}var Ng=Math.ceil,Ii=$t.ReactCurrentDispatcher,Hl=$t.ReactCurrentOwner,Ge=$t.ReactCurrentBatchConfig,G=0,ge=null,de=null,ve=0,Me=0,Zr=or(0),fe=0,gs=null,Sr=0,ra=0,ql=0,Gn=null,Re=null,Vl=0,mn=1/0,vt=null,Di=!1,Ho=null,Zt=null,Gs=!1,Gt=null,Mi=0,Kn=0,qo=null,ui=-1,di=0;function Ce(){return G&6?le():ui!==-1?ui:ui=le()}function er(e){return e.mode&1?G&2&&ve!==0?ve&-ve:og.transition!==null?(di===0&&(di=qd()),di):(e=K,e!==0||(e=window.event,e=e===void 0?16:Xd(e.type)),e):1}function lt(e,t,r,n){if(50<Kn)throw Kn=0,qo=null,Error(R(185));js(e,r,n),(!(G&2)||e!==ge)&&(e===ge&&(!(G&2)&&(ra|=r),fe===4&&Ht(e,ve)),Ie(e,n),r===1&&G===0&&!(t.mode&1)&&(mn=le()+500,Xi&&lr()))}function Ie(e,t){var r=e.callbackNode;op(e,t);var n=bi(e,e===ge?ve:0);if(n===0)r!==null&&Rc(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Rc(r),t===1)e.tag===0?ag(_u.bind(null,e)):yh(_u.bind(null,e)),rg(function(){!(G&6)&&lr()}),r=null;else{switch(Vd(n)){case 1:r=vl;break;case 4:r=Wd;break;case 16:r=wi;break;case 536870912:r=Hd;break;default:r=wi}r=gf(r,cf.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function cf(e,t){if(ui=-1,di=0,G&6)throw Error(R(327));var r=e.callbackNode;if(an()&&e.callbackNode!==r)return null;var n=bi(e,e===ge?ve:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Ui(e,n);else{t=n;var s=G;G|=2;var i=df();(ge!==e||ve!==t)&&(vt=null,mn=le()+500,br(e,t));do try{Cg();break}catch(l){uf(e,l)}while(!0);Rl(),Ii.current=i,G=s,de!==null?t=0:(ge=null,ve=0,t=fe)}if(t!==0){if(t===2&&(s=vo(e),s!==0&&(n=s,t=Vo(e,s))),t===1)throw r=gs,br(e,0),Ht(e,n),Ie(e,le()),r;if(t===6)Ht(e,n);else{if(s=e.current.alternate,!(n&30)&&!kg(s)&&(t=Ui(e,n),t===2&&(i=vo(e),i!==0&&(n=i,t=Vo(e,i))),t===1))throw r=gs,br(e,0),Ht(e,n),Ie(e,le()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(R(345));case 2:pr(e,Re,vt);break;case 3:if(Ht(e,n),(n&130023424)===n&&(t=Vl+500-le(),10<t)){if(bi(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ce(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=So(pr.bind(null,e,Re,vt),t);break}pr(e,Re,vt);break;case 4:if(Ht(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ot(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=le()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ng(n/1960))-n,10<n){e.timeoutHandle=So(pr.bind(null,e,Re,vt),n);break}pr(e,Re,vt);break;case 5:pr(e,Re,vt);break;default:throw Error(R(329))}}}return Ie(e,le()),e.callbackNode===r?cf.bind(null,e):null}function Vo(e,t){var r=Gn;return e.current.memoizedState.isDehydrated&&(br(e,t).flags|=256),e=Ui(e,t),e!==2&&(t=Re,Re=r,t!==null&&Go(t)),e}function Go(e){Re===null?Re=e:Re.push.apply(Re,e)}function kg(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ct(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ht(e,t){for(t&=~ql,t&=~ra,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),n=1<<r;e[r]=-1,t&=~n}}function _u(e){if(G&6)throw Error(R(327));an();var t=bi(e,0);if(!(t&1))return Ie(e,le()),null;var r=Ui(e,t);if(e.tag!==0&&r===2){var n=vo(e);n!==0&&(t=n,r=Vo(e,n))}if(r===1)throw r=gs,br(e,0),Ht(e,t),Ie(e,le()),r;if(r===6)throw Error(R(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,pr(e,Re,vt),Ie(e,le()),null}function Gl(e,t){var r=G;G|=1;try{return e(t)}finally{G=r,G===0&&(mn=le()+500,Xi&&lr())}}function Cr(e){Gt!==null&&Gt.tag===0&&!(G&6)&&an();var t=G;G|=1;var r=Ge.transition,n=K;try{if(Ge.transition=null,K=1,e)return e()}finally{K=n,Ge.transition=r,G=t,!(G&6)&&lr()}}function Kl(){Me=Zr.current,X(Zr)}function br(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,tg(r)),de!==null)for(r=de.return;r!==null;){var n=r;switch(El(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Si();break;case 3:hn(),X($e),X(ke),Dl();break;case 5:Il(n);break;case 4:hn();break;case 13:X(ne);break;case 19:X(ne);break;case 10:Al(n.type._context);break;case 22:case 23:Kl()}r=r.return}if(ge=e,de=e=tr(e.current,null),ve=Me=t,fe=0,gs=null,ql=ra=Sr=0,Re=Gn=null,xr!==null){for(t=0;t<xr.length;t++)if(r=xr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}xr=null}return e}function uf(e,t){do{var r=de;try{if(Rl(),oi.current=Oi,$i){for(var n=se.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}$i=!1}if(kr=0,pe=he=se=null,qn=!1,fs=0,Hl.current=null,r===null||r.return===null){fe=1,gs=t,de=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=ve,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=uu(o);if(y!==null){y.flags&=-257,du(y,o,l,i,t),y.mode&1&&cu(i,u,t),t=y,c=u;var v=t.updateQueue;if(v===null){var x=new Set;x.add(c),t.updateQueue=x}else v.add(c);break e}else{if(!(t&1)){cu(i,u,t),Jl();break e}c=Error(R(426))}}else if(ee&&l.mode&1){var b=uu(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),du(b,o,l,i,t),Pl(fn(c,l));break e}}i=c=fn(c,l),fe!==4&&(fe=2),Gn===null?Gn=[i]:Gn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=Vh(i,c,t);nu(i,p);break e;case 1:l=c;var g=i.type,f=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Zt===null||!Zt.has(f)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=Gh(i,l,t);nu(i,N);break e}}i=i.return}while(i!==null)}ff(r)}catch(k){t=k,de===r&&r!==null&&(de=r=r.return);continue}break}while(!0)}function df(){var e=Ii.current;return Ii.current=Oi,e===null?Oi:e}function Jl(){(fe===0||fe===3||fe===2)&&(fe=4),ge===null||!(Sr&268435455)&&!(ra&268435455)||Ht(ge,ve)}function Ui(e,t){var r=G;G|=2;var n=df();(ge!==e||ve!==t)&&(vt=null,br(e,t));do try{Sg();break}catch(s){uf(e,s)}while(!0);if(Rl(),G=r,Ii.current=n,de!==null)throw Error(R(261));return ge=null,ve=0,fe}function Sg(){for(;de!==null;)hf(de)}function Cg(){for(;de!==null&&!Xm();)hf(de)}function hf(e){var t=pf(e.alternate,e,Me);e.memoizedProps=e.pendingProps,t===null?ff(e):de=t,Hl.current=null}function ff(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=wg(r,t),r!==null){r.flags&=32767,de=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fe=6,de=null;return}}else if(r=xg(r,t,Me),r!==null){de=r;return}if(t=t.sibling,t!==null){de=t;return}de=t=e}while(t!==null);fe===0&&(fe=5)}function pr(e,t,r){var n=K,s=Ge.transition;try{Ge.transition=null,K=1,Eg(e,t,r,n)}finally{Ge.transition=s,K=n}return null}function Eg(e,t,r,n){do an();while(Gt!==null);if(G&6)throw Error(R(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(R(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(lp(e,i),e===ge&&(de=ge=null,ve=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gs||(Gs=!0,gf(wi,function(){return an(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Ge.transition,Ge.transition=null;var o=K;K=1;var l=G;G|=4,Hl.current=null,jg(e,r),of(r,e),Kp(No),ji=!!_o,No=_o=null,e.current=r,_g(r),Zm(),G=l,K=o,Ge.transition=i}else e.current=r;if(Gs&&(Gs=!1,Gt=e,Mi=s),i=e.pendingLanes,i===0&&(Zt=null),rp(r.stateNode),Ie(e,le()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Di)throw Di=!1,e=Ho,Ho=null,e;return Mi&1&&e.tag!==0&&an(),i=e.pendingLanes,i&1?e===qo?Kn++:(Kn=0,qo=e):Kn=0,lr(),null}function an(){if(Gt!==null){var e=Vd(Mi),t=Ge.transition,r=K;try{if(Ge.transition=null,K=16>e?16:e,Gt===null)var n=!1;else{if(e=Gt,Gt=null,Mi=0,G&6)throw Error(R(331));var s=G;for(G|=4,O=e.current;O!==null;){var i=O,o=i.child;if(O.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(O=u;O!==null;){var d=O;switch(d.tag){case 0:case 11:case 15:Vn(8,d,i)}var h=d.child;if(h!==null)h.return=d,O=h;else for(;O!==null;){d=O;var m=d.sibling,y=d.return;if(nf(d),d===u){O=null;break}if(m!==null){m.return=y,O=m;break}O=y}}}var v=i.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}O=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,O=o;else e:for(;O!==null;){if(i=O,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Vn(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,O=p;break e}O=i.return}}var g=e.current;for(O=g;O!==null;){o=O;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,O=f;else e:for(o=g;O!==null;){if(l=O,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ta(9,l)}}catch(k){oe(l,l.return,k)}if(l===o){O=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,O=N;break e}O=l.return}}if(G=s,lr(),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(Gi,e)}catch{}n=!0}return n}finally{K=r,Ge.transition=t}}return!1}function Nu(e,t,r){t=fn(r,t),t=Vh(e,t,1),e=Xt(e,t,1),t=Ce(),e!==null&&(js(e,1,t),Ie(e,t))}function oe(e,t,r){if(e.tag===3)Nu(e,e,r);else for(;t!==null;){if(t.tag===3){Nu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zt===null||!Zt.has(n))){e=fn(r,e),e=Gh(t,e,1),t=Xt(t,e,1),e=Ce(),t!==null&&(js(t,1,e),Ie(t,e));break}}t=t.return}}function Pg(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ce(),e.pingedLanes|=e.suspendedLanes&r,ge===e&&(ve&r)===r&&(fe===4||fe===3&&(ve&130023424)===ve&&500>le()-Vl?br(e,0):ql|=r),Ie(e,t)}function mf(e,t){t===0&&(e.mode&1?(t=Ds,Ds<<=1,!(Ds&130023424)&&(Ds=4194304)):t=1);var r=Ce();e=Rt(e,t),e!==null&&(js(e,t,r),Ie(e,r))}function Tg(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),mf(e,r)}function Rg(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(t),mf(e,r)}var pf;pf=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||$e.current)Le=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Le=!1,vg(e,t,r);Le=!!(e.flags&131072)}else Le=!1,ee&&t.flags&1048576&&vh(t,Pi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ci(e,t),e=t.pendingProps;var s=cn(t,ke.current);sn(t,r),s=Ul(null,t,n,e,s,r);var i=Fl();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Oe(n)?(i=!0,Ci(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,$l(t),s.updater=ea,t.stateNode=s,s._reactInternals=t,Lo(t,n,e,r),t=Io(null,t,n,!0,i,r)):(t.tag=0,ee&&i&&Cl(t),Se(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ci(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Lg(n),e=rt(n,e),s){case 0:t=Oo(null,t,n,e,r);break e;case 1:t=mu(null,t,n,e,r);break e;case 11:t=hu(null,t,n,e,r);break e;case 14:t=fu(null,t,n,rt(n.type,e),r);break e}throw Error(R(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rt(n,s),Oo(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rt(n,s),mu(e,t,n,s,r);case 3:e:{if(Yh(t),e===null)throw Error(R(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Nh(e,t),Ai(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=fn(Error(R(423)),t),t=pu(e,t,n,r,s);break e}else if(n!==s){s=fn(Error(R(424)),t),t=pu(e,t,n,r,s);break e}else for(Ue=Yt(t.stateNode.containerInfo.firstChild),Fe=t,ee=!0,it=null,r=jh(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(un(),n===s){t=At(e,t,r);break e}Se(e,t,n,r)}t=t.child}return t;case 5:return kh(t),e===null&&To(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,ko(n,s)?o=null:i!==null&&ko(n,i)&&(t.flags|=32),Qh(e,t),Se(e,t,o,r),t.child;case 6:return e===null&&To(t),null;case 13:return Xh(e,t,r);case 4:return Ol(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=dn(t,null,n,r):Se(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rt(n,s),hu(e,t,n,s,r);case 7:return Se(e,t,t.pendingProps,r),t.child;case 8:return Se(e,t,t.pendingProps.children,r),t.child;case 12:return Se(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Q(Ti,n._currentValue),n._currentValue=o,i!==null)if(ct(i.value,o)){if(i.children===s.children&&!$e.current){t=At(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=kt(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Ro(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(R(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Ro(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Se(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,sn(t,r),s=Je(s),n=n(s),t.flags|=1,Se(e,t,n,r),t.child;case 14:return n=t.type,s=rt(n,t.pendingProps),s=rt(n.type,s),fu(e,t,n,s,r);case 15:return Kh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:rt(n,s),ci(e,t),t.tag=1,Oe(n)?(e=!0,Ci(t)):e=!1,sn(t,r),qh(t,n,s),Lo(t,n,s,r),Io(null,t,n,!0,e,r);case 19:return Zh(e,t,r);case 22:return Jh(e,t,r)}throw Error(R(156,t.tag))};function gf(e,t){return Bd(e,t)}function Ag(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(e,t,r,n){return new Ag(e,t,r,n)}function Ql(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Lg(e){if(typeof e=="function")return Ql(e)?1:0;if(e!=null){if(e=e.$$typeof,e===pl)return 11;if(e===gl)return 14}return 2}function tr(e,t){var r=e.alternate;return r===null?(r=Ve(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function hi(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")Ql(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Wr:return jr(r.children,s,i,t);case ml:o=8,s|=8;break;case ro:return e=Ve(12,r,t,s|2),e.elementType=ro,e.lanes=i,e;case no:return e=Ve(13,r,t,s),e.elementType=no,e.lanes=i,e;case so:return e=Ve(19,r,t,s),e.elementType=so,e.lanes=i,e;case kd:return na(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _d:o=10;break e;case Nd:o=9;break e;case pl:o=11;break e;case gl:o=14;break e;case Ft:o=16,n=null;break e}throw Error(R(130,e==null?e:typeof e,""))}return t=Ve(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function jr(e,t,r,n){return e=Ve(7,e,n,t),e.lanes=r,e}function na(e,t,r,n){return e=Ve(22,e,n,t),e.elementType=kd,e.lanes=r,e.stateNode={isHidden:!1},e}function Ba(e,t,r){return e=Ve(6,e,null,t),e.lanes=r,e}function Wa(e,t,r){return t=Ve(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $g(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_a(0),this.expirationTimes=_a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yl(e,t,r,n,s,i,o,l,c){return e=new $g(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Ve(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$l(i),e}function Og(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Br,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function yf(e){if(!e)return nr;e=e._reactInternals;e:{if(Tr(e)!==e||e.tag!==1)throw Error(R(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Oe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(R(171))}if(e.tag===1){var r=e.type;if(Oe(r))return gh(e,r,t)}return t}function vf(e,t,r,n,s,i,o,l,c){return e=Yl(r,n,!0,e,s,i,o,l,c),e.context=yf(null),r=e.current,n=Ce(),s=er(r),i=kt(n,s),i.callback=t??null,Xt(r,i,s),e.current.lanes=s,js(e,s,n),Ie(e,n),e}function sa(e,t,r,n){var s=t.current,i=Ce(),o=er(s);return r=yf(r),t.context===null?t.context=r:t.pendingContext=r,t=kt(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Xt(s,t,o),e!==null&&(lt(e,s,o,i),ai(e,s,o)),o}function Fi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ku(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Xl(e,t){ku(e,t),(e=e.alternate)&&ku(e,t)}function Ig(){return null}var xf=typeof reportError=="function"?reportError:function(e){console.error(e)};function Zl(e){this._internalRoot=e}ia.prototype.render=Zl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(R(409));sa(e,t,null,null)};ia.prototype.unmount=Zl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cr(function(){sa(null,e,null,null)}),t[Tt]=null}};function ia(e){this._internalRoot=e}ia.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jd();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Wt.length&&t!==0&&t<Wt[r].priority;r++);Wt.splice(r,0,e),r===0&&Yd(e)}};function ec(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function aa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Su(){}function Dg(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Fi(o);i.call(u)}}var o=vf(t,n,e,0,null,!1,!1,"",Su);return e._reactRootContainer=o,e[Tt]=o.current,ls(e.nodeType===8?e.parentNode:e),Cr(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Fi(c);l.call(u)}}var c=Yl(e,0,!1,null,null,!1,!1,"",Su);return e._reactRootContainer=c,e[Tt]=c.current,ls(e.nodeType===8?e.parentNode:e),Cr(function(){sa(t,c,r,n)}),c}function oa(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Fi(o);l.call(c)}}sa(t,o,e,s)}else o=Dg(r,t,e,s,n);return Fi(o)}Gd=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Dn(t.pendingLanes);r!==0&&(xl(t,r|1),Ie(t,le()),!(G&6)&&(mn=le()+500,lr()))}break;case 13:Cr(function(){var n=Rt(e,1);if(n!==null){var s=Ce();lt(n,e,1,s)}}),Xl(e,1)}};wl=function(e){if(e.tag===13){var t=Rt(e,134217728);if(t!==null){var r=Ce();lt(t,e,134217728,r)}Xl(e,134217728)}};Kd=function(e){if(e.tag===13){var t=er(e),r=Rt(e,t);if(r!==null){var n=Ce();lt(r,e,t,n)}Xl(e,t)}};Jd=function(){return K};Qd=function(e,t){var r=K;try{return K=e,t()}finally{K=r}};po=function(e,t,r){switch(t){case"input":if(oo(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Yi(n);if(!s)throw Error(R(90));Cd(n),oo(n,s)}}}break;case"textarea":Pd(e,r);break;case"select":t=r.value,t!=null&&en(e,!!r.multiple,t,!1)}};Id=Gl;Dd=Cr;var Mg={usingClientEntryPoint:!1,Events:[Ns,Gr,Yi,$d,Od,Gl]},Rn={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ug={bundleType:Rn.bundleType,version:Rn.version,rendererPackageName:Rn.rendererPackageName,rendererConfig:Rn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$t.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fd(e),e===null?null:e.stateNode},findFiberByHostInstance:Rn.findFiberByHostInstance||Ig,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ks.isDisabled&&Ks.supportsFiber)try{Gi=Ks.inject(Ug),pt=Ks}catch{}}Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mg;Be.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ec(t))throw Error(R(200));return Og(e,t,null,r)};Be.createRoot=function(e,t){if(!ec(e))throw Error(R(299));var r=!1,n="",s=xf;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Yl(e,1,!1,null,null,r,!1,n,s),e[Tt]=t.current,ls(e.nodeType===8?e.parentNode:e),new Zl(t)};Be.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(R(188)):(e=Object.keys(e).join(","),Error(R(268,e)));return e=Fd(t),e=e===null?null:e.stateNode,e};Be.flushSync=function(e){return Cr(e)};Be.hydrate=function(e,t,r){if(!aa(t))throw Error(R(200));return oa(null,e,t,!0,r)};Be.hydrateRoot=function(e,t,r){if(!ec(e))throw Error(R(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=xf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=vf(t,null,e,1,r??null,s,!1,i,o),e[Tt]=t.current,ls(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new ia(t)};Be.render=function(e,t,r){if(!aa(t))throw Error(R(200));return oa(null,e,t,!1,r)};Be.unmountComponentAtNode=function(e){if(!aa(e))throw Error(R(40));return e._reactRootContainer?(Cr(function(){oa(null,null,e,!1,function(){e._reactRootContainer=null,e[Tt]=null})}),!0):!1};Be.unstable_batchedUpdates=Gl;Be.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!aa(r))throw Error(R(200));if(e==null||e._reactInternals===void 0)throw Error(R(38));return oa(e,t,r,!1,n)};Be.version="18.3.1-next-f1338f8080-20240426";function wf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wf)}catch(e){console.error(e)}}wf(),xd.exports=Be;var Fg=xd.exports,bf,Cu=Fg;bf=Cu.createRoot,Cu.hydrateRoot;/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Eu="popstate";function zg(e={}){function t(s,i){let{pathname:o="/",search:l="",hash:c=""}=Rr(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ko("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(s,i){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=s.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof i=="string"?i:ys(i))}function n(s,i){Ye(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(i)})`)}return Wg(t,r,n,e)}function te(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ye(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Bg(){return Math.random().toString(36).substring(2,10)}function Pu(e,t){return{usr:e.state,key:e.key,idx:t}}function Ko(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Rr(t):t,state:r,key:t&&t.key||n||Bg()}}function ys({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Rr(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Wg(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=d(),p=b==null?null:b-u;u=b,c&&c({action:l,location:x.location,delta:p})}function m(b,p){l="PUSH";let g=Ko(x.location,b,p);r&&r(g,b),u=d()+1;let f=Pu(g,u),N=x.createHref(g);try{o.pushState(f,"",N)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(N)}i&&c&&c({action:l,location:x.location,delta:1})}function y(b,p){l="REPLACE";let g=Ko(x.location,b,p);r&&r(g,b),u=d();let f=Pu(g,u),N=x.createHref(g);o.replaceState(f,"",N),i&&c&&c({action:l,location:x.location,delta:0})}function v(b){return Hg(b)}let x={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Eu,h),c=b,()=>{s.removeEventListener(Eu,h),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let p=v(b);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:m,replace:y,go(b){return o.go(b)}};return x}function Hg(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),te(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:ys(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function jf(e,t,r="/"){return qg(e,t,r,!1)}function qg(e,t,r,n){let s=typeof t=="string"?Rr(t):t,i=Lt(s.pathname||"/",r);if(i==null)return null;let o=_f(e);Vg(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=n0(i);l=t0(o[c],u,n)}return l}function _f(e,t=[],r=[],n=""){let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(te(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let u=St([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(te(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),_f(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Zg(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Nf(i.path))s(i,o,c)}),t}function Nf(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Nf(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Vg(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:e0(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Gg=/^:[\w-]+$/,Kg=3,Jg=2,Qg=1,Yg=10,Xg=-2,Tu=e=>e==="*";function Zg(e,t){let r=e.split("/"),n=r.length;return r.some(Tu)&&(n+=Xg),t&&(n+=Jg),r.filter(s=>!Tu(s)).reduce((s,i)=>s+(Gg.test(i)?Kg:i===""?Qg:Yg),n)}function e0(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function t0(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=zi({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=zi({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:St([i,h.pathname]),pathnameBase:o0(St([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=St([i,h.pathnameBase]))}return o}function zi(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=r0(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:h},m)=>{if(d==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const y=l[m];return h&&!y?u[d]=void 0:u[d]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function r0(e,t=!1,r=!0){Ye(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function n0(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ye(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Lt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function s0(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Rr(e):e;return{pathname:r?r.startsWith("/")?r:i0(r,t):t,search:l0(n),hash:c0(s)}}function i0(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Ha(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function a0(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function tc(e){let t=a0(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function rc(e,t,r,n=!1){let s;typeof e=="string"?s=Rr(e):(s={...e},te(!s.pathname||!s.pathname.includes("?"),Ha("?","pathname","search",s)),te(!s.pathname||!s.pathname.includes("#"),Ha("#","pathname","hash",s)),te(!s.search||!s.search.includes("#"),Ha("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=s0(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var St=e=>e.join("/").replace(/\/\/+/g,"/"),o0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),l0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,c0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function u0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var kf=["POST","PUT","PATCH","DELETE"];new Set(kf);var d0=["GET",...kf];new Set(d0);var xn=w.createContext(null);xn.displayName="DataRouter";var la=w.createContext(null);la.displayName="DataRouterState";w.createContext(!1);var Sf=w.createContext({isTransitioning:!1});Sf.displayName="ViewTransition";var h0=w.createContext(new Map);h0.displayName="Fetchers";var f0=w.createContext(null);f0.displayName="Await";var ut=w.createContext(null);ut.displayName="Navigation";var Ss=w.createContext(null);Ss.displayName="Location";var dt=w.createContext({outlet:null,matches:[],isDataRoute:!1});dt.displayName="Route";var nc=w.createContext(null);nc.displayName="RouteError";function m0(e,{relative:t}={}){te(wn(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(ut),{hash:s,pathname:i,search:o}=Cs(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:St([r,i])),n.createHref({pathname:l,search:o,hash:s})}function wn(){return w.useContext(Ss)!=null}function Ot(){return te(wn(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Ss).location}var Cf="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ef(e){w.useContext(ut).static||w.useLayoutEffect(e)}function Xe(){let{isDataRoute:e}=w.useContext(dt);return e?E0():p0()}function p0(){te(wn(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(xn),{basename:t,navigator:r}=w.useContext(ut),{matches:n}=w.useContext(dt),{pathname:s}=Ot(),i=JSON.stringify(tc(n)),o=w.useRef(!1);return Ef(()=>{o.current=!0}),w.useCallback((c,u={})=>{if(Ye(o.current,Cf),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=rc(c,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:St([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,s,e])}w.createContext(null);function g0(){let{matches:e}=w.useContext(dt),t=e[e.length-1];return t?t.params:{}}function Cs(e,{relative:t}={}){let{matches:r}=w.useContext(dt),{pathname:n}=Ot(),s=JSON.stringify(tc(r));return w.useMemo(()=>rc(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function y0(e,t){return Pf(e,t)}function Pf(e,t,r,n){var p;te(wn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=w.useContext(ut),{matches:i}=w.useContext(dt),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let g=d&&d.path||"";Tf(c,!d||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let h=Ot(),m;if(t){let g=typeof t=="string"?Rr(t):t;te(u==="/"||((p=g.pathname)==null?void 0:p.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${g.pathname}" was given in the \`location\` prop.`),m=g}else m=h;let y=m.pathname||"/",v=y;if(u!=="/"){let g=u.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(g.length).join("/")}let x=jf(e,{pathname:v});Ye(d||x!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Ye(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=j0(x&&x.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:St([u,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:St([u,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,r,n);return t&&b?w.createElement(Ss.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function v0(){let e=C0(),t=u0(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:s},r):null,o)}var x0=w.createElement(v0,null),w0=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(dt.Provider,{value:this.props.routeContext},w.createElement(nc.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function b0({routeContext:e,match:t,children:r}){let n=w.useContext(xn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(dt.Provider,{value:e},r)}function j0(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r==null?void 0:r.errors;if(i!=null){let c=s.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);te(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:h}=r,m=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||m){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,u,d)=>{let h,m=!1,y=null,v=null;r&&(h=i&&u.route.id?i[u.route.id]:void 0,y=u.route.errorElement||x0,o&&(l<0&&d===0?(Tf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===d&&(m=!0,v=u.route.hydrateFallbackElement||null)));let x=t.concat(s.slice(0,d+1)),b=()=>{let p;return h?p=y:m?p=v:u.route.Component?p=w.createElement(u.route.Component,null):u.route.element?p=u.route.element:p=c,w.createElement(b0,{match:u,routeContext:{outlet:c,matches:x,isDataRoute:r!=null},children:p})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?w.createElement(w0,{location:r.location,revalidation:r.revalidation,component:y,error:h,children:b(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):b()},null)}function sc(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _0(e){let t=w.useContext(xn);return te(t,sc(e)),t}function N0(e){let t=w.useContext(la);return te(t,sc(e)),t}function k0(e){let t=w.useContext(dt);return te(t,sc(e)),t}function ic(e){let t=k0(e),r=t.matches[t.matches.length-1];return te(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function S0(){return ic("useRouteId")}function C0(){var n;let e=w.useContext(nc),t=N0("useRouteError"),r=ic("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function E0(){let{router:e}=_0("useNavigate"),t=ic("useNavigate"),r=w.useRef(!1);return Ef(()=>{r.current=!0}),w.useCallback(async(s,i={})=>{Ye(r.current,Cf),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var Ru={};function Tf(e,t,r){!t&&!Ru[e]&&(Ru[e]=!0,Ye(!1,r))}w.memo(P0);function P0({routes:e,future:t,state:r}){return Pf(e,void 0,r,t)}function bt({to:e,replace:t,state:r,relative:n}){te(wn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=w.useContext(ut);Ye(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(dt),{pathname:o}=Ot(),l=Xe(),c=rc(e,tc(i),o,n==="path"),u=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})},[l,u,n,t,r]),null}function ue(e){te(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function T0({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){te(!wn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=Rr(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:m="default"}=r,y=w.useMemo(()=>{let v=Lt(c,o);return v==null?null:{location:{pathname:v,search:u,hash:d,state:h,key:m},navigationType:n}},[o,c,u,d,h,m,n]);return Ye(y!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:w.createElement(ut.Provider,{value:l},w.createElement(Ss.Provider,{children:t,value:y}))}function R0({children:e,location:t}){return y0(Jo(e),t)}function Jo(e,t=[]){let r=[];return w.Children.forEach(e,(n,s)=>{if(!w.isValidElement(n))return;let i=[...t,s];if(n.type===w.Fragment){r.push.apply(r,Jo(n.props.children,i));return}te(n.type===ue,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),te(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Jo(n.props.children,i)),r.push(o)}),r}var fi="get",mi="application/x-www-form-urlencoded";function ca(e){return e!=null&&typeof e.tagName=="string"}function A0(e){return ca(e)&&e.tagName.toLowerCase()==="button"}function L0(e){return ca(e)&&e.tagName.toLowerCase()==="form"}function $0(e){return ca(e)&&e.tagName.toLowerCase()==="input"}function O0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function I0(e,t){return e.button===0&&(!t||t==="_self")&&!O0(e)}var Js=null;function D0(){if(Js===null)try{new FormData(document.createElement("form"),0),Js=!1}catch{Js=!0}return Js}var M0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qa(e){return e!=null&&!M0.has(e)?(Ye(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mi}"`),null):e}function U0(e,t){let r,n,s,i,o;if(L0(e)){let l=e.getAttribute("action");n=l?Lt(l,t):null,r=e.getAttribute("method")||fi,s=qa(e.getAttribute("enctype"))||mi,i=new FormData(e)}else if(A0(e)||$0(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?Lt(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||fi,s=qa(e.getAttribute("formenctype"))||qa(l.getAttribute("enctype"))||mi,i=new FormData(l,e),!D0()){let{name:u,type:d,value:h}=e;if(d==="image"){let m=u?`${u}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else u&&i.append(u,h)}}else{if(ca(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=fi,n=null,s=mi,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ac(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function F0(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Lt(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function z0(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function B0(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function W0(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await z0(i,r);return o.links?o.links():[]}return[]}));return G0(n.flat(1).filter(B0).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Au(e,t,r,n,s,i){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{var h;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function H0(e,t,{includeHydrateFallback:r}={}){return q0(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function q0(e){return[...new Set(e)]}function V0(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function G0(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(V0(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function Rf(){let e=w.useContext(xn);return ac(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function K0(){let e=w.useContext(la);return ac(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var oc=w.createContext(void 0);oc.displayName="FrameworkContext";function Af(){let e=w.useContext(oc);return ac(e,"You must render this element inside a <HydratedRouter> element"),e}function J0(e,t){let r=w.useContext(oc),[n,s]=w.useState(!1),[i,o]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,m=w.useRef(null);w.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let x=p=>{p.forEach(g=>{o(g.isIntersecting)})},b=new IntersectionObserver(x,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[e]),w.useEffect(()=>{if(n){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[n]);let y=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,m,{}]:[i,m,{onFocus:An(l,y),onBlur:An(c,v),onMouseEnter:An(u,y),onMouseLeave:An(d,v),onTouchStart:An(h,y)}]:[!1,m,{}]}function An(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Q0({page:e,...t}){let{router:r}=Rf(),n=w.useMemo(()=>jf(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(X0,{page:e,matches:n,...t}):null}function Y0(e){let{manifest:t,routeModules:r}=Af(),[n,s]=w.useState([]);return w.useEffect(()=>{let i=!1;return W0(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function X0({page:e,matches:t,...r}){let n=Ot(),{manifest:s,routeModules:i}=Af(),{basename:o}=Rf(),{loaderData:l,matches:c}=K0(),u=w.useMemo(()=>Au(e,t,c,s,n,"data"),[e,t,c,s,n]),d=w.useMemo(()=>Au(e,t,c,s,n,"assets"),[e,t,c,s,n]),h=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,x=!1;if(t.forEach(p=>{var f;let g=s.routes[p.route.id];!g||!g.hasLoader||(!u.some(N=>N.route.id===p.route.id)&&p.route.id in l&&((f=i[p.route.id])!=null&&f.shouldRevalidate)||g.hasClientLoader?x=!0:v.add(p.route.id))}),v.size===0)return[];let b=F0(e,o,"data");return x&&v.size>0&&b.searchParams.set("_routes",t.filter(p=>v.has(p.route.id)).map(p=>p.route.id).join(",")),[b.pathname+b.search]},[o,l,n,s,u,t,e,i]),m=w.useMemo(()=>H0(d,s),[d,s]),y=Y0(d);return w.createElement(w.Fragment,null,h.map(v=>w.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),m.map(v=>w.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),y.map(({key:v,link:x})=>w.createElement("link",{key:v,...x})))}function Z0(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Lf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Lf&&(window.__reactRouterVersion="7.7.0")}catch{}function ey({basename:e,children:t,window:r}){let n=w.useRef();n.current==null&&(n.current=zg({window:r,v5Compat:!0}));let s=n.current,[i,o]=w.useState({action:s.action,location:s.location}),l=w.useCallback(c=>{w.startTransition(()=>o(c))},[o]);return w.useLayoutEffect(()=>s.listen(l),[s,l]),w.createElement(T0,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var $f=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ct=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h,...m},y){let{basename:v}=w.useContext(ut),x=typeof u=="string"&&$f.test(u),b,p=!1;if(typeof u=="string"&&x&&(b=u,Lf))try{let E=new URL(window.location.href),A=u.startsWith("//")?new URL(E.protocol+u):new URL(u),q=Lt(A.pathname,v);A.origin===E.origin&&q!=null?u=q+A.search+A.hash:p=!0}catch{Ye(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=m0(u,{relative:s}),[f,N,k]=J0(n,m),j=sy(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function _(E){t&&t(E),E.defaultPrevented||j(E)}let C=w.createElement("a",{...m,...k,href:b||g,onClick:p||i?t:_,ref:Z0(y,N),target:c,"data-discover":!x&&r==="render"?"true":void 0});return f&&!x?w.createElement(w.Fragment,null,C,w.createElement(Q0,{page:g})):C});Ct.displayName="Link";var ty=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...u},d){let h=Cs(o,{relative:u.relative}),m=Ot(),y=w.useContext(la),{navigator:v,basename:x}=w.useContext(ut),b=y!=null&&cy(h)&&l===!0,p=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,g=m.pathname,f=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(g=g.toLowerCase(),f=f?f.toLowerCase():null,p=p.toLowerCase()),f&&x&&(f=Lt(f,x)||f);const N=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let k=g===p||!s&&g.startsWith(p)&&g.charAt(N)==="/",j=f!=null&&(f===p||!s&&f.startsWith(p)&&f.charAt(p.length)==="/"),_={isActive:k,isPending:j,isTransitioning:b},C=k?t:void 0,E;typeof n=="function"?E=n(_):E=[n,k?"active":null,j?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let A=typeof i=="function"?i(_):i;return w.createElement(Ct,{...u,"aria-current":C,className:E,ref:d,style:A,to:o,viewTransition:l},typeof c=="function"?c(_):c)});ty.displayName="NavLink";var ry=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=fi,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...m},y)=>{let v=oy(),x=ly(l,{relative:u}),b=o.toLowerCase()==="get"?"get":"post",p=typeof l=="string"&&$f.test(l),g=f=>{if(c&&c(f),f.defaultPrevented)return;f.preventDefault();let N=f.nativeEvent.submitter,k=(N==null?void 0:N.getAttribute("formmethod"))||o;v(N||f.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:h})};return w.createElement("form",{ref:y,method:b,action:x,onSubmit:n?c:g,...m,"data-discover":!p&&e==="render"?"true":void 0})});ry.displayName="Form";function ny(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Of(e){let t=w.useContext(xn);return te(t,ny(e)),t}function sy(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=Xe(),c=Ot(),u=Cs(e,{relative:i});return w.useCallback(d=>{if(I0(d,t)){d.preventDefault();let h=r!==void 0?r:ys(c)===ys(u);l(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,u,r,n,t,e,s,i,o])}var iy=0,ay=()=>`__${String(++iy)}__`;function oy(){let{router:e}=Of("useSubmit"),{basename:t}=w.useContext(ut),r=S0();return w.useCallback(async(n,s={})=>{let{action:i,method:o,encType:l,formData:c,body:u}=U0(n,t);if(s.navigate===!1){let d=s.fetcherKey||ay();await e.fetch(d,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function ly(e,{relative:t}={}){let{basename:r}=w.useContext(ut),n=w.useContext(dt);te(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Cs(e||".",{relative:t})},o=Ot();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:St([r,i.pathname])),ys(i)}function cy(e,t={}){let r=w.useContext(Sf);te(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Of("useViewTransitionState"),s=Cs(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=Lt(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Lt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return zi(s.pathname,o)!=null||zi(s.pathname,i)!=null}const uy="modulepreload",dy=function(e){return"/BrightRoots/"+e},Lu={},Es=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=dy(c),c in Lu)return;Lu[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":uy,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,y)=>{h.addEventListener("load",m),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},hy=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Es(async()=>{const{default:n}=await Promise.resolve().then(()=>bn);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class lc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class fy extends lc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $u extends lc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ou extends lc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Qo;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Qo||(Qo={}));var my=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class py{constructor(t,{headers:r={},customFetch:n,region:s=Qo.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=hy(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return my(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(x=>{throw new fy(x)}),m=h.headers.get("x-relay-error");if(m&&m==="true")throw new $u(h);if(!h.ok)throw new Ou(h);let y=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return y==="application/json"?v=yield h.json():y==="application/octet-stream"?v=yield h.blob():y==="text/event-stream"?v=h:y==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof Ou||s instanceof $u?s.context:void 0}}})}}var Ae={},cc={},ua={},Ps={},da={},ha={},gy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},pn=gy();const yy=pn.fetch,If=pn.fetch.bind(pn),Df=pn.Headers,vy=pn.Request,xy=pn.Response,bn=Object.freeze(Object.defineProperty({__proto__:null,Headers:Df,Request:vy,Response:xy,default:If,fetch:yy},Symbol.toStringTag,{value:"Module"})),wy=mm(bn);var fa={};Object.defineProperty(fa,"__esModule",{value:!0});let by=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};fa.default=by;var Mf=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ha,"__esModule",{value:!0});const jy=Mf(wy),_y=Mf(fa);let Ny=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=jy.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,h=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const p=await i.text();p===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=p:d=JSON.parse(p))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),b=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(d=[],u=null,m=200,y="OK")}catch{i.status===404&&x===""?(m=204,y="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,m=200,y="OK"),u&&this.shouldThrowOnError)throw new _y.default(u)}return{error:u,data:d,count:h,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};ha.default=Ny;var ky=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(da,"__esModule",{value:!0});const Sy=ky(ha);let Cy=class extends Sy.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};da.default=Cy;var Ey=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ps,"__esModule",{value:!0});const Py=Ey(da);let Ty=class extends Py.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Ps.default=Ty;var Ry=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ua,"__esModule",{value:!0});const Ln=Ry(Ps);let Ay=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ln.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ln.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Ln.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Ln.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ln.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ua.default=Ay;var ma={},pa={};Object.defineProperty(pa,"__esModule",{value:!0});pa.version=void 0;pa.version="0.0.0-automated";Object.defineProperty(ma,"__esModule",{value:!0});ma.DEFAULT_HEADERS=void 0;const Ly=pa;ma.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Ly.version}`};var Uf=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cc,"__esModule",{value:!0});const $y=Uf(ua),Oy=Uf(Ps),Iy=ma;let Dy=class Ff{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},Iy.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new $y.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Ff(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Oy.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};cc.default=Dy;var jn=Ke&&Ke.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.PostgrestError=Ae.PostgrestBuilder=Ae.PostgrestTransformBuilder=Ae.PostgrestFilterBuilder=Ae.PostgrestQueryBuilder=Ae.PostgrestClient=void 0;const zf=jn(cc);Ae.PostgrestClient=zf.default;const Bf=jn(ua);Ae.PostgrestQueryBuilder=Bf.default;const Wf=jn(Ps);Ae.PostgrestFilterBuilder=Wf.default;const Hf=jn(da);Ae.PostgrestTransformBuilder=Hf.default;const qf=jn(ha);Ae.PostgrestBuilder=qf.default;const Vf=jn(fa);Ae.PostgrestError=Vf.default;var My=Ae.default={PostgrestClient:zf.default,PostgrestQueryBuilder:Bf.default,PostgrestFilterBuilder:Wf.default,PostgrestTransformBuilder:Hf.default,PostgrestBuilder:qf.default,PostgrestError:Vf.default};const{PostgrestClient:Uy,PostgrestQueryBuilder:o1,PostgrestFilterBuilder:l1,PostgrestTransformBuilder:c1,PostgrestBuilder:u1,PostgrestError:d1}=My;function Fy(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const zy=Fy(),By="2.11.15",Wy=`realtime-js/${By}`,Hy="1.0.0",Gf=1e4,qy=1e3;var Jn;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Jn||(Jn={}));var _e;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(_e||(_e={}));var st;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(st||(st={}));var Yo;(function(e){e.websocket="websocket"})(Yo||(Yo={}));var yr;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(yr||(yr={}));class Vy{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class Kf{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(J||(J={}));const Iu=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=Gy(o,e,t,s),i),{})},Gy=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?Jf(i,o):Xo(o)},Jf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Yy(t,r)}switch(e){case J.bool:return Ky(t);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return Jy(t);case J.json:case J.jsonb:return Qy(t);case J.timestamp:return Xy(t);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return Xo(t);default:return Xo(t)}},Xo=e=>e,Ky=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Jy=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Qy=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Yy=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Jf(t,l))}return e},Xy=e=>typeof e=="string"?e.replace(" ","T"):e,Qf=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Va{constructor(t,r,n={},s=Gf){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Du;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Du||(Du={}));class Qn{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Qn.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Qn.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Qn.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const m=d.map(b=>b.presence_ref),y=h.map(b=>b.presence_ref),v=d.filter(b=>y.indexOf(b.presence_ref)<0),x=h.filter(b=>m.indexOf(b.presence_ref)<0);v.length>0&&(l[u]=v),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(y=>y.presence_ref),m=d.filter(y=>h.indexOf(y.presence_ref)<0);t[l].unshift(...m)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mu;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Mu||(Mu={}));var Uu;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Uu||(Uu={}));var xt;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(xt||(xt={}));class uc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=_e.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Va(this,st.join,this.params,this.timeout),this.rejoinTimer=new Kf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=_e.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=_e.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=_e.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Qn(this),this.broadcastEndpointURL=Qf(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==_e.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(xt.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(xt.CLOSED));const c={},u={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){t==null||t(xt.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(h=m==null?void 0:m.length)!==null&&h!==void 0?h:0,v=[];for(let x=0;x<y;x++){const b=m[x],{filter:{event:p,schema:g,table:f,filter:N}}=b,k=d&&d[x];if(k&&k.event===p&&k.schema===g&&k.table===f&&k.filter===N)v.push(Object.assign(Object.assign({},b),{id:k.id}));else{this.unsubscribe(),this.state=_e.errored,t==null||t(xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(xt.SUBSCRIBED);return}}).receive("error",d=>{this.state=_e.errored,t==null||t(xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=_e.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Va(this,st.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Va(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=st;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let m=this._onMessage(o,r,n);if(r&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var v,x,b;return((v=y.filter)===null||v===void 0?void 0:v.event)==="*"||((b=(x=y.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===o}).map(y=>y.callback(m,n)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var v,x,b,p,g,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const N=y.id,k=(v=y.filter)===null||v===void 0?void 0:v.event;return N&&((x=r.ids)===null||x===void 0?void 0:x.includes(N))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((b=r.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const N=(g=(p=y==null?void 0:y.filter)===null||p===void 0?void 0:p.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return N==="*"||N===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const v=m.data,{schema:x,table:b,commit_timestamp:p,type:g,errors:f}=v;m=Object.assign(Object.assign({},{schema:x,table:b,commit_timestamp:p,eventType:g,new:{},old:{},errors:f}),this._getPayloadRecords(v))}y.callback(m,n)})}_isClosed(){return this.state===_e.closed}_isJoined(){return this.state===_e.joined}_isJoining(){return this.state===_e.joining}_isLeaving(){return this.state===_e.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&uc.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(st.close,{},t)}_onError(t){this._on(st.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=_e.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Iu(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Iu(t.columns,t.old_record)),r}}const Fu=()=>{},Zy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ev{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gf,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Fu,this.ref=0,this.logger=Fu,this.conn=null,this.sendBuffer=[],this.serializer=new Vy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Es(async()=>{const{default:c}=await Promise.resolve().then(()=>bn);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${Yo.websocket}`,this.httpEndpoint=Qf(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Kf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=zy),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Hy}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Jn.connecting:return yr.Connecting;case Jn.open:return yr.Open;case Jn.closing:return yr.Closing;default:return yr.Closed}}isConnected(){return this.connectionState()===yr.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new uc(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Wy};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(st.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(qy,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(st.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Zy],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class dc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function me(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class tv extends dc{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Zo extends dc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var rv=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Yf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Es(async()=>{const{default:n}=await Promise.resolve().then(()=>bn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},nv=()=>rv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Es(()=>Promise.resolve().then(()=>bn),void 0)).Response:Response}),el=e=>{if(Array.isArray(e))return e.map(r=>el(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=el(n)}),t};var Ar=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const Ga=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sv=(e,t,r)=>Ar(void 0,void 0,void 0,function*(){const n=yield nv();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new tv(Ga(s),e.status||500))}).catch(s=>{t(new Zo(Ga(s),s))}):t(new Zo(Ga(e),e))}),iv=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Ts(e,t,r,n,s,i){return Ar(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,iv(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>sv(c,l,n))})})}function Bi(e,t,r,n){return Ar(this,void 0,void 0,function*(){return Ts(e,"GET",t,r,n)})}function Bt(e,t,r,n,s){return Ar(this,void 0,void 0,function*(){return Ts(e,"POST",t,n,s,r)})}function av(e,t,r,n,s){return Ar(this,void 0,void 0,function*(){return Ts(e,"PUT",t,n,s,r)})}function ov(e,t,r,n){return Ar(this,void 0,void 0,function*(){return Ts(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Xf(e,t,r,n,s){return Ar(this,void 0,void 0,function*(){return Ts(e,"DELETE",t,n,s,r)})}var Te=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const lv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class cv{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=Yf(s)}uploadOrUpdate(t,r,n,s){return Te(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},zu),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield h.json();return h.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(me(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Te(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:zu.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield h.json();return h.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Te(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Bt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new dc("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}update(t,r,n){return Te(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Te(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Te(this,void 0,void 0,function*(){try{return{data:{path:(yield Bt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Te(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Bt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Te(this,void 0,void 0,function*(){try{const s=yield Bt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}download(t,r){return Te(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Bi(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(me(l))return{data:null,error:l};throw l}})}info(t){return Te(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Bi(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:el(n),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}exists(t){return Te(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield ov(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(me(n)&&n instanceof Zo){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Te(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}list(t,r,n){return Te(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},lv),r),{prefix:t||""});return{data:yield Bt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const uv="2.7.1",dv={"X-Client-Info":`storage-js/${uv}`};var $r=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class hv{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},dv),r),this.fetch=Yf(n)}listBuckets(){return $r(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(me(t))return{data:null,error:t};throw t}})}getBucket(t){return $r(this,void 0,void 0,function*(){try{return{data:yield Bi(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return $r(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return $r(this,void 0,void 0,function*(){try{return{data:yield av(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(me(n))return{data:null,error:n};throw n}})}emptyBucket(t){return $r(this,void 0,void 0,function*(){try{return{data:yield Bt(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $r(this,void 0,void 0,function*(){try{return{data:yield Xf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}}class fv extends hv{constructor(t,r={},n){super(t,r,n)}from(t){return new cv(this.url,this.headers,t,this.fetch)}}const mv="2.52.0";let Un="";typeof Deno<"u"?Un="deno":typeof document<"u"?Un="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Un="react-native":Un="node";const pv={"X-Client-Info":`supabase-js-${Un}/${mv}`},gv={headers:pv},yv={schema:"public"},vv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},xv={};var wv=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const bv=e=>{let t;return e?t=e:typeof fetch>"u"?t=If:t=fetch,(...r)=>t(...r)},jv=()=>typeof Headers>"u"?Df:Headers,_v=(e,t,r)=>{const n=bv(r),s=jv();return(i,o)=>wv(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var Nv=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function kv(e){return e.endsWith("/")?e:e+"/"}function Sv(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Nv(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const Zf="2.71.1",Ur=30*1e3,tl=3,Ka=tl*Ur,Cv="http://localhost:9999",Ev="supabase.auth.token",Pv={"X-Client-Info":`gotrue-js/${Zf}`},rl="X-Supabase-Api-Version",em={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Tv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Rv=10*60*1e3;class hc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function z(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Av extends hc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Lv(e){return z(e)&&e.name==="AuthApiError"}class tm extends hc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class cr extends hc{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Ut extends cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $v(e){return z(e)&&e.name==="AuthSessionMissingError"}class Qs extends cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ys extends cr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Xs extends cr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ov(e){return z(e)&&e.name==="AuthImplicitGrantRedirectError"}class Bu extends cr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nl extends cr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Ja(e){return z(e)&&e.name==="AuthRetryableFetchError"}class Wu extends cr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class sl extends cr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hu=` 	
\r=`.split(""),Iv=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Hu.length;t+=1)e[Hu[t].charCodeAt(0)]=-2;for(let t=0;t<Wi.length;t+=1)e[Wi[t].charCodeAt(0)]=t;return e})();function qu(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Wi[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Wi[n]),t.queuedBits-=6}}function rm(e,t,r){const n=Iv[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Vu(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Uv(o,n,r)};for(let o=0;o<e.length;o+=1)rm(e.charCodeAt(o),s,i);return t.join("")}function Dv(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Mv(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Dv(n,t)}}function Uv(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Fv(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)rm(e.charCodeAt(s),r,n);return new Uint8Array(t)}function zv(e){const t=[];return Mv(e,r=>t.push(r)),new Uint8Array(t)}function Bv(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>qu(s,r,n)),qu(null,r,n),t.join("")}function Wv(e){return Math.round(Date.now()/1e3)+e}function Hv(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const tt=()=>typeof window<"u"&&typeof document<"u",dr={tested:!1,writable:!1},nm=()=>{if(!tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dr.tested)return dr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),dr.tested=!0,dr.writable=!0}catch{dr.tested=!0,dr.writable=!1}return dr.writable};function qv(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const sm=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Es(async()=>{const{default:n}=await Promise.resolve().then(()=>bn);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Vv=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Fr=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},hr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Mt=async(e,t)=>{await e.removeItem(t)};class ga{constructor(){this.promise=new ga.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}ga.promiseConstructor=Promise;function Qa(e){const t=e.split(".");if(t.length!==3)throw new sl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Tv.test(t[n]))throw new sl("JWT not in base64url format");return{header:JSON.parse(Vu(t[0])),payload:JSON.parse(Vu(t[1])),signature:Fv(t[2]),raw:{header:t[0],payload:t[1]}}}async function Gv(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Kv(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function Jv(e){return("0"+e.toString(16)).substr(-2)}function Qv(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,Jv).join("")}async function Yv(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Xv(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Yv(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Or(e,t,r=!1){const n=Qv();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Fr(e,`${t}-code-verifier`,s);const i=await Xv(n);return[i,n===i?"plain":"s256"]}const Zv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ex(e){const t=e.headers.get(rl);if(!t||!t.match(Zv))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function tx(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function rx(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const nx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ir(e){if(!nx.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ya(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Gu(e){return JSON.parse(JSON.stringify(e))}var sx=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const gr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ix=[502,503,504];async function Ku(e){var t;if(!Vv(e))throw new nl(gr(e),0);if(ix.includes(e.status))throw new nl(gr(e),e.status);let r;try{r=await e.json()}catch(i){throw new tm(gr(i),i)}let n;const s=ex(e);if(s&&s.getTime()>=em["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Wu(gr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Ut}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Wu(gr(r),e.status,r.weak_password.reasons);throw new Av(gr(r),e.status||500,n)}const ax=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function W(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[rl]||(i[rl]=em["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await ox(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function ox(e,t,r,n,s,i){const o=ax(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new nl(gr(c),0)}if(l.ok||await Ku(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Ku(c)}}function yt(e){var t;let r=null;dx(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=Wv(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Ju(e){const t=yt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function lx(e){return{data:e,error:null}}function cx(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=sx(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function ux(e){return e}function dx(e){return e.access_token&&e.refresh_token&&e.expires_in}const Xa=["global","local","others"];var hx=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class fx{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=sm(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Xa[0]){if(Xa.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xa.join(", ")}`);try{return await W(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await W(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:qt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=hx(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await W(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:cx,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await W(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await W(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:ux});if(d.error)throw d.error;const h=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return y.length>0&&(y.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(v.split(";")[1].split("=")[1]);u[`${b}Page`]=x}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(z(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Ir(t);try{return await W(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qt})}catch(r){if(z(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Ir(t);try{return await W(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:qt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Ir(t);try{return await W(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:qt})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Ir(t.userId);try{const{data:r,error:n}=await W(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(z(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Ir(t.userId),Ir(t.id);try{return{data:await W(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}}function Qu(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function mx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Dr={debug:!!(globalThis&&nm()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class im extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class px extends im{}async function gx(e,t,r){Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Dr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new px(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Dr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}mx();const yx={url:Cv,storageKey:Ev,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Pv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Yu(e,t,r){return await r()}const Mr={};class vs{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=vs.nextInstanceID,vs.nextInstanceID+=1,this.instanceID>0&&tt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},yx),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new fx({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=sm(s.fetch),this.lock=s.lock||Yu,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:tt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=gx:this.lock=Yu,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:nm()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qu(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Qu(this.memoryStorage)),tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Mr[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Mr[this.storageKey]=Object.assign(Object.assign({},Mr[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Mr[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Mr[this.storageKey]=Object.assign(Object.assign({},Mr[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Zf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=qv(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),tt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ov(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return z(r)?{error:r}:{error:new tm("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:yt}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:m}=t;let y=null,v=null;this.flowType==="pkce"&&([y,v]=await Or(this.storage,this.storageKey)),i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:h,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:v},xform:yt})}else if("phone"in t){const{phone:d,password:h,options:m}=t;i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:yt})}else throw new Ys("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ju})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Ju})}else throw new Ys("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Qs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,m,y;let v,x;if("message"in t)v=t.message,x=t.signature;else{const{chain:b,wallet:p,statement:g,options:f}=t;let N;if(tt())if(typeof p=="object")N=p;else{const j=window;if("solana"in j&&typeof j.solana=="object"&&("signIn"in j.solana&&typeof j.solana.signIn=="function"||"signMessage"in j.solana&&typeof j.solana.signMessage=="function"))N=j.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=p}const k=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in N&&N.signIn){const j=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),g?{statement:g}:null));let _;if(Array.isArray(j)&&j[0]&&typeof j[0]=="object")_=j[0];else if(j&&typeof j=="object"&&"signedMessage"in j&&"signature"in j)_=j;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in _&&"signature"in _&&(typeof _.signedMessage=="string"||_.signedMessage instanceof Uint8Array)&&_.signature instanceof Uint8Array)v=typeof _.signedMessage=="string"?_.signedMessage:new TextDecoder().decode(_.signedMessage),x=_.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=f==null?void 0:f.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((u=f==null?void 0:f.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((h=(d=f==null?void 0:f.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...f.signInWithSolana.resources.map(_=>`- ${_}`)]:[]].join(`
`);const j=await N.signMessage(new TextEncoder().encode(v),"utf8");if(!j||!(j instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=j}}try{const{data:b,error:p}=await W(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:Bv(x)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=t.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:yt});if(p)throw p;return!b||!b.session||!b.user?{data:{user:null,session:null},error:new Qs}:(b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),{data:Object.assign({},b),error:p})}catch(b){if(z(b))return{data:{user:null,session:null},error:b};throw b}}async _exchangeCodeForSession(t){const r=await hr(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await W(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:yt});if(await Mt(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Qs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(z(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:yt}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Qs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Or(this.storage,this.storageKey));const{error:h}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Ys("You must provide either an email or phone number.")}catch(l){if(z(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await W(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:yt});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Or(this.storage,this.storageKey)),await W(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:lx})}catch(i){if(z(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Ut;const{error:s}=await W(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(z(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await W(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await W(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ys("You must provide either an email or phone number and a type")}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await hr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Ka:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await hr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=Ya()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ut}:await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:qt})})}catch(r){if(z(r))return $v(r)&&(await this._removeSession(),await Mt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ut;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Or(this.storage,this.storageKey));const{data:u,error:d}=await W(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:qt});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(z(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ut;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=Qa(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(z(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Ut;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(z(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!tt())throw new Xs("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Xs(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Bu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Bu("No code detected.");const{data:g,error:f}=await this._exchangeCodeForSession(t.code);if(f)throw f;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Xs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let m=d+h;c&&(m=parseInt(c));const y=m-d;y*1e3<=Ur&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${h}s`);const v=m-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,m,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,m,d);const{data:x,error:b}=await this._getUser(i);if(b)throw b;const p={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:m,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:t.type},error:null}}catch(n){if(z(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await hr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(Lv(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Mt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Hv(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Or(this.storage,this.storageKey,!0));try{return await W(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(z(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(z(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await W(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return tt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(z(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await W(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Kv(async s=>(s>0&&await Gv(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await W(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:yt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ja(i)&&Date.now()+o-n<Ur})}catch(n){if(this._debug(r,"error",n),z(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),tt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await hr(this.storage,this.storageKey);if(s&&this.userStorage){let o=await hr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Fr(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:Ya()}else if(s&&!s.user&&!s.user){const o=await hr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await Mt(this.storage,this.storageKey+"-user"),await Fr(this.storage,this.storageKey,s)):s.user=Ya()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Ka;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Ka}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ja(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Ut;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ga;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Ut;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),z(i)){const o={session:null,error:i};return Ja(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Fr(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=Gu(s);await Fr(this.storage,this.storageKey,i)}else{const s=Gu(r);await Fr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Mt(this.storage,this.storageKey),await Mt(this.storage,this.storageKey+"-code-verifier"),await Mt(this.storage,this.storageKey+"-user"),this.userStorage&&await Mt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ur);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ur);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ur}ms, refresh threshold is ${tl} ticks`),s<=tl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof im)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Or(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await W(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await W(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(z(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await W(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await W(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(z(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Qa(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+Rv>s)return n;const{data:i,error:o}=await W(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:y,error:v}=await this.getSession();if(v||!y.session)return{data:null,error:v};n=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=Qa(n);r!=null&&r.allowExpired||tx(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:y}=await this.getUser(n);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const d=rx(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,zv(`${l}.${c}`)))throw new sl("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(z(n))return{data:null,error:n};throw n}}}vs.nextInstanceID=0;const vx=vs;class xx extends vx{constructor(t){super(t)}}var wx=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class bx{constructor(t,r,n){var s,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=kv(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:yv,realtime:xv,auth:Object.assign(Object.assign({},vv),{storageKey:u}),global:gv},h=Sv(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=_v(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new Uy(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new py(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new fv(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return wx(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xx({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new ev(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const am=(e,t,r)=>new bx(e,t,r),om="https://djlhlnnfbwuvzugxbfcj.supabase.co",jx="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqbGhsbm5mYnd1dnp1Z3hiZmNqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyNzUyMDYsImV4cCI6MjA2ODg1MTIwNn0.v9u3HjnDBlIQXmxRpUhU9YNRBTHhMc3u-sMhhMHVw-0",_x="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqbGhsbm5mYnd1dnp1Z3hiZmNqIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MzI3NTIwNiwiZXhwIjoyMDY4ODUxMjA2fQ.lF1nnf9jkXO0gLB0bC05PBQXxUMxw388fLJOm8ZFV8E",U=am(om,jx),Zs=am(om,_x);class ce{static async createProvider(t){console.log("🔧 ProviderService.createProvider called with:",t);const r={...t,is_published:t.status==="approved"};console.log("🔧 Inserting provider data:",r);const{data:n,error:s}=await U.from("providers").insert(r).select().single();if(console.log("🔧 Insert result:",{provider:n,error:s}),s)throw s;return n}static async getProvider(t){const{data:r,error:n}=await U.from("providers").select("*").eq("id",t).single();if(n&&n.code!=="PGRST116")throw n;return r}static async getProviderByUserId(t){const{data:r,error:n}=await U.from("providers").select("*").eq("user_id",t);if(n)throw n;return r&&r.length>0?r[0]:null}static async updateProvider(t,r){const n={...r,...r.status==="approved"&&{is_published:!0},...r.status&&r.status!=="approved"&&{is_published:!1}},{data:s,error:i}=await U.from("providers").update(n).eq("id",t).select().single();if(i)throw i;return s}static async publishProvider(t){const{data:r,error:n}=await Zs.from("providers").update({is_published:!0,status:"approved"}).eq("id",t).select().single();if(n)throw n;return r}static async unpublishProvider(t){const{data:r,error:n}=await Zs.from("providers").update({is_published:!1}).eq("id",t).select().single();if(n)throw n;return r}static async getPublishedProviders(t){let r=U.from("providers").select(`
        *,
        provider_services(category),
        provider_classes(id, name, price, mode, age_group, duration),
        provider_media(file_path, media_type)
      `).eq("is_published",!0).eq("status","approved");t!=null&&t.city&&(r=r.eq("city",t.city)),t!=null&&t.area&&(r=r.eq("area",t.area)),t!=null&&t.search&&(r=r.or(`business_name.ilike.%${t.search}%,description.ilike.%${t.search}%`));const{data:n,error:s}=await r.order("created_at",{ascending:!1});return s?(console.error("Error fetching published providers:",s),[]):n||[]}static async addProviderServices(t,r){const n=r.map(i=>({provider_id:t,category:i})),{error:s}=await Zs.from("provider_services").insert(n);if(s)throw s}static async getProviderServices(t){const{data:r,error:n}=await U.from("provider_services").select("*").eq("provider_id",t);if(n)throw n;return r||[]}static async createClass(t){const{data:r,error:n}=await Zs.from("provider_classes").insert(t).select().single();if(n)throw n;return r}static async getProviderClasses(t){const{data:r,error:n}=await U.from("provider_classes").select("*").eq("provider_id",t).eq("is_active",!0).order("created_at",{ascending:!1});if(n)throw n;return r||[]}static async updateClass(t,r){const{data:n,error:s}=await U.from("provider_classes").update(r).eq("id",t).select().single();if(s)throw s;return n}static async deleteClass(t){const{error:r}=await U.from("provider_classes").update({is_active:!1}).eq("id",t);if(r)throw r}static async uploadDocument(t,r,n){const s=n.name.split(".").pop(),i=`${r}_${Date.now()}.${s}`,o=`${t}/${i}`,{error:l}=await U.storage.from("provider-documents").upload(o,n);if(l)throw l;const{data:c,error:u}=await U.from("provider_documents").insert({provider_id:t,document_type:r,file_name:i,file_path:o,file_size:n.size,mime_type:n.type}).select().single();if(u)throw u;return c}static async getProviderDocuments(t){const{data:r,error:n}=await U.from("provider_documents").select("*").eq("provider_id",t).order("uploaded_at",{ascending:!1});if(n)throw n;return r||[]}static async uploadMedia(t,r,n,s){const i=n.name.split(".").pop(),o=`${r}_${Date.now()}.${i}`,l=`${t}/${o}`,{error:c}=await U.storage.from("provider-images").upload(l,n);if(c)throw c;const{data:u,error:d}=await U.from("provider_media").insert({provider_id:t,media_type:r,file_name:o,file_path:l,file_size:n.size,mime_type:n.type,caption:s}).select().single();if(d)throw d;return u}static async getProviderMedia(t){const{data:r,error:n}=await U.from("provider_media").select("*").eq("provider_id",t).eq("is_active",!0).order("display_order",{ascending:!0});if(n)throw n;return r||[]}static async getProviderEnquiries(t){const{data:r,error:n}=await U.from("enquiries").select("*").eq("provider_id",t).order("created_at",{ascending:!1});if(n)throw n;return r||[]}static async respondToEnquiry(t,r){const{data:n,error:s}=await U.from("enquiries").update({response:r,response_at:new Date().toISOString(),status:"responded"}).eq("id",t).select().single();if(s)throw s;return n}static async getProviderStats(t){var u,d,h,m;const[r,n,s]=await Promise.all([U.from("enquiries").select("id, status").eq("provider_id",t),U.from("provider_classes").select("id").eq("provider_id",t).eq("is_active",!0),U.from("bookings").select("id, status").eq("provider_id",t)]),i=((u=r.data)==null?void 0:u.length)||0,o=((d=r.data)==null?void 0:d.filter(y=>y.status==="sent").length)||0,l=((h=n.data)==null?void 0:h.length)||0,c=((m=s.data)==null?void 0:m.filter(y=>y.status==="confirmed").length)||0;return{totalEnquiries:i,pendingEnquiries:o,totalClasses:l,activeBookings:c}}static async searchProviders(t){let r=U.from("providers").select(`
        *,
        provider_services(category),
        provider_classes(id, name, price, mode),
        provider_media(file_path, media_type)
      `).eq("status","approved");t.city&&(r=r.eq("city",t.city)),t.area&&(r=r.eq("area",t.area)),t.search&&(r=r.or(`business_name.ilike.%${t.search}%,description.ilike.%${t.search}%`));const{data:n,error:s}=await r;if(s)throw s;return n||[]}}function Nx(){const[e,t]=w.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",type:"info"}),r=w.useCallback(i=>new Promise(o=>{t({...i,isOpen:!0}),window.__confirmResolve=o}),[]),n=w.useCallback(()=>{t(i=>({...i,isOpen:!1})),window.__confirmResolve&&(window.__confirmResolve(!0),delete window.__confirmResolve)},[]),s=w.useCallback(()=>{t(i=>({...i,isOpen:!1})),window.__confirmResolve&&(window.__confirmResolve(!1),delete window.__confirmResolve)},[]);return{dialogState:e,showConfirm:r,handleConfirm:n,handleCancel:s}}/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Sx=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),Xu=e=>{const t=Sx(e);return t.charAt(0).toUpperCase()+t.slice(1)},lm=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Cx=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ex={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Px=w.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>w.createElement("svg",{ref:c,...Ex,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:lm("lucide",s),...!i&&!Cx(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>w.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=(e,t)=>{const r=w.forwardRef(({className:n,...s},i)=>w.createElement(Px,{ref:i,iconNode:t,className:lm(`lucide-${kx(Xu(e))}`,`lucide-${e}`,n),...s}));return r.displayName=Xu(e),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],jt=B("arrow-left",Tx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],at=B("arrow-right",Rx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Yn=B("book-open",Ax);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],$x=B("building",Lx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ei=B("camera",Ox);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Dx=B("chevron-right",Ix);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ux=B("circle-alert",Mx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Et=B("circle-check-big",Fx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],pi=B("circle-x",zx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bx=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],on=B("clock",Bx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Hx=B("eye-off",Wx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],fc=B("eye",qx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],$n=B("file-text",Vx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],cm=B("funnel",Gx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Jx=B("globe",Kx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],mc=B("heart",Qx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Xx=B("house",Yx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zx=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],ew=B("info",Zx);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tw=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Zu=B("loader",tw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],pc=B("lock",rw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],gc=B("log-out",nw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],xs=B("mail",sw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_n=B("map-pin",iw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Xn=B("message-circle",aw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Hi=B("navigation",ow);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],sr=B("phone",lw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Zn=B("plus",cw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],il=B("save",uw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Er=B("search",dw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],fw=B("share",hw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],pw=B("shield",mw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],gi=B("square-pen",gw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],yc=B("star",yw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],um=B("trash-2",vw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],ww=B("trending-up",xw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ir=B("user",bw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ws=B("users",jw);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],qi=B("x",_w);function Nw({isOpen:e,title:t,message:r,confirmText:n="Confirm",cancelText:s="Cancel",onConfirm:i,onCancel:o,type:l="info"}){if(!e)return null;const u=(()=>{switch(l){case"danger":return{button:"bg-red-600 hover:bg-red-700 text-white",icon:"text-red-600"};case"warning":return{button:"bg-yellow-600 hover:bg-yellow-700 text-white",icon:"text-yellow-600"};default:return{button:"bg-blue-600 hover:bg-blue-700 text-white",icon:"text-blue-600"}}})();return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:o}),a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl mx-4 max-w-sm w-full transform transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t}),a.jsx("button",{onClick:o,className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:a.jsx(qi,{className:"w-5 h-5 text-gray-500"})})]}),a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-600 leading-relaxed",children:r})}),a.jsxs("div",{className:"flex gap-3 p-6 pt-0",children:[a.jsx("button",{onClick:o,className:"flex-1 px-4 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors",children:s}),a.jsx("button",{onClick:i,className:`flex-1 px-4 py-3 rounded-xl font-medium transition-colors ${u.button}`,children:n})]})]})]})}const dm=w.createContext(void 0);function De(){const e=w.useContext(dm);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function kw({children:e}){const[t,r]=w.useState(null),[n,s]=w.useState(null),[i,o]=w.useState(!0),{dialogState:l,showConfirm:c,handleConfirm:u,handleCancel:d}=Nx();w.useEffect(()=>{const f=localStorage.getItem("demoUser");if(f)try{const j=JSON.parse(f);r(j),o(!1);return}catch(j){console.error("Error parsing demo user:",j),localStorage.removeItem("demoUser")}(async()=>{var C;const{data:j,error:_}=await U.auth.getSession();if(j.session&&window.location.hash.includes("access_token")){((C=j.session.user.user_metadata)==null?void 0:C.role)==="provider"?window.location.href="/provider/onboarding":window.location.href="/location";return}})(),U.auth.getSession().then(({data:{session:j}})=>{j!=null&&j.user?(s(j.user),h(j.user.id)):o(!1)});const{data:{subscription:k}}=U.auth.onAuthStateChange(async(j,_)=>{var C;console.log("🔄 Auth state change:",j,(C=_==null?void 0:_.user)==null?void 0:C.id),_!=null&&_.user?(s(_.user),await h(_.user.id)):(s(null),r(null)),o(!1)});return()=>k.unsubscribe()},[]);const h=async f=>{var N,k,j,_,C,E,A,q,re,M,we;o(!0);try{console.log("🔍 Loading user profile for userId:",f);const{data:Z,error:S}=await U.auth.getUser();if(S){if((N=S.message)!=null&&N.includes("Invalid Refresh Token")||(k=S.message)!=null&&k.includes("Refresh Token Not Found")||(j=S.message)!=null&&j.includes("Auth session missing")){await p();return}throw S}if(!(Z!=null&&Z.user))throw new Error("No user data found");const $=((_=Z.user.user_metadata)==null?void 0:_.role)||"parent";if($==="provider")try{const P=await ce.getProviderByUserId(f);if(P){r({_id:f,id:f,name:P.owner_name,email:P.email,phone:P.phone,role:"provider",businessName:P.business_name,whatsapp:P.whatsapp||void 0,website:P.website||void 0,isVerified:P.is_verified,location:{city:P.city,area:P.area,pincode:P.pincode,coordinates:P.latitude&&P.longitude?{lat:P.latitude,lng:P.longitude}:void 0}});return}}catch{}if($==="parent")try{const{data:P,error:F}=await U.from("users").select("id").eq("id",f).single();if(F&&F.code==="PGRST116"){const{data:T,error:I}=await U.from("users").insert({id:f,name:((C=Z.user.user_metadata)==null?void 0:C.name)||"User",email:Z.user.email||"",role:"parent",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single()}}catch{}const L={_id:f,id:f,name:((E=Z.user.user_metadata)==null?void 0:E.name)||"User",email:Z.user.email||"",role:$,children:[]};r(L)}catch(Z){if(Z instanceof Error&&((A=Z.message)!=null&&A.includes("Invalid Refresh Token")||(q=Z.message)!=null&&q.includes("Refresh Token Not Found")||(re=Z.message)!=null&&re.includes("Auth session missing"))){await p();return}try{const{data:S,error:$}=await U.auth.getUser();if(S!=null&&S.user&&!$){const L=((M=S.user.user_metadata)==null?void 0:M.role)||"parent";r({_id:f,id:f,name:((we=S.user.user_metadata)==null?void 0:we.name)||"User",email:S.user.email||"",role:L,children:[]})}else r({_id:f,id:f,name:"User",email:"",role:"parent",children:[]})}catch{r({_id:f,id:f,name:"User",email:"",role:"parent",children:[]})}}finally{o(!1)}},m=async(f,N,k="parent")=>{const{data:j,error:_}=await U.auth.signInWithPassword({email:f,password:N});if(_)throw _;j.user&&await h(j.user.id)},y=async(f,N,k)=>{const{data:j,error:_}=await U.auth.signUp({email:f,password:N,options:{emailRedirectTo:`${window.location.origin}/`,data:{name:k.name,role:k.role||"parent"}}});if(_)throw _;return j},v=async f=>{const{error:N}=await U.auth.signInWithOtp({phone:f,options:{data:{role:"parent"}}});if(N)throw N},x=async(f,N)=>{const{data:k,error:j}=await U.auth.verifyOtp({phone:f,token:N,type:"sms"});if(j)throw j},b=f=>{if(t){const N={...t,location:f};r(N)}},p=async()=>{localStorage.removeItem("demoUser"),localStorage.removeItem("adminAuth"),localStorage.removeItem("adminUser"),r(null),U&&await U.auth.signOut(),window.location.hash="#/"},g=async()=>{await c({title:"Logout",message:"Are you sure you want to logout? This will end your current session.",confirmText:"Logout",cancelText:"Cancel",type:"warning"})&&p()};return a.jsxs(dm.Provider,{value:{user:t,supabaseUser:n,login:m,signUp:y,signInWithPhone:v,verifyOtp:x,setUserLocation:b,logout:p,logoutWithConfirmation:g,isLoading:i},children:[e,a.jsx(Nw,{isOpen:l.isOpen,title:l.title,message:l.message,confirmText:l.confirmText,cancelText:l.cancelText,type:l.type,onConfirm:u,onCancel:d})]})}function It(){const[e,t]=w.useState([]),r=w.useCallback(c=>{const u=Math.random().toString(36).substr(2,9),d={id:u,...c,onClose:n};return t(h=>[...h,d]),u},[]),n=w.useCallback(c=>{t(u=>u.filter(d=>d.id!==c))},[]),s=w.useCallback((c,u)=>r({type:"success",title:c,message:u}),[r]),i=w.useCallback((c,u)=>r({type:"error",title:c,message:u}),[r]),o=w.useCallback((c,u)=>r({type:"warning",title:c,message:u}),[r]),l=w.useCallback((c,u)=>r({type:"info",title:c,message:u}),[r]);return{toasts:e,addToast:r,removeToast:n,showSuccess:s,showError:i,showWarning:o,showInfo:l}}function Sw({id:e,type:t,title:r,message:n,duration:s=5e3,onClose:i}){const[o,l]=w.useState(!0),[c,u]=w.useState(!1);w.useEffect(()=>{const y=setTimeout(()=>{d()},s);return()=>clearTimeout(y)},[s]);const d=()=>{u(!0),setTimeout(()=>{l(!1),i(e)},300)};if(!o)return null;const h=()=>{switch(t){case"success":return a.jsx(Et,{className:"w-5 h-5 text-green-600"});case"error":return a.jsx(pi,{className:"w-5 h-5 text-red-600"});case"warning":return a.jsx(Ux,{className:"w-5 h-5 text-yellow-600"});case"info":return a.jsx(ew,{className:"w-5 h-5 text-blue-600"})}},m=()=>{switch(t){case"success":return"bg-green-50 border-green-200 text-green-800";case"error":return"bg-red-50 border-red-200 text-red-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800"}};return a.jsx("div",{className:`max-w-sm w-full transform transition-all duration-300 ${c?"translate-x-full opacity-0":"translate-x-0 opacity-100"}`,children:a.jsx("div",{className:`border rounded-lg shadow-lg p-4 ${m()}`,children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"flex-shrink-0",children:h()}),a.jsxs("div",{className:"ml-3 flex-1",children:[a.jsx("h3",{className:"text-sm font-medium",children:r}),n&&a.jsx("p",{className:"mt-1 text-sm opacity-90",children:n})]}),a.jsx("button",{onClick:d,className:"ml-4 flex-shrink-0 rounded-md p-1 hover:bg-black hover:bg-opacity-10 transition-colors",children:a.jsx(qi,{className:"w-4 h-4"})})]})})})}function Cw({toasts:e,onClose:t}){return a.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:e.map(r=>a.jsx(Sw,{...r,onClose:t},r.id))})}function Ew(){const e=Ot(),t=[{to:"/home",label:"Home",icon:Xx},{to:"/search",label:"Search",icon:Er},{to:"/wishlist",label:"Wishlist",icon:mc},{to:"/enquiries",label:"Enquiries",icon:Xn},{to:"/profile",label:"Profile",icon:ir}];return a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:a.jsx("div",{className:"grid grid-cols-5",children:t.map(({to:r,label:n,icon:s})=>a.jsxs(Ct,{to:r,className:`flex flex-col items-center justify-center py-2 px-1 transition-colors ${e.pathname===r?"text-purple-600":"text-gray-600 hover:text-purple-600"}`,children:[a.jsx(s,{className:"w-5 h-5 mb-1"}),a.jsx("span",{className:"text-xs font-medium",children:n})]},r))})})}function D({children:e,variant:t="primary",size:r="md",onClick:n,to:s,type:i="button",disabled:o=!1,className:l=""}){const c="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",u={primary:"bg-gradient-to-r from-purple-600 to-blue-600 text-white hover:from-purple-700 hover:to-blue-700 focus:ring-purple-500",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500",outline:"border-2 border-purple-600 text-purple-600 hover:bg-purple-600 hover:text-white focus:ring-purple-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},d={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},h=`${c} ${u[t]} ${d[r]} ${o?"opacity-50 cursor-not-allowed":""} ${l}`;return s?a.jsx(Ct,{to:s,className:h,children:e}):a.jsx("button",{type:i,onClick:n,disabled:o,className:h,children:e})}function Pw(){const[e,t]=w.useState("email"),[r,n]=w.useState(""),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,u]=w.useState(""),[d,h]=w.useState(!1),[m,y]=w.useState(""),[v,x]=w.useState(!1),[b,p]=w.useState(!1),[g,f]=w.useState(!1),[N,k]=w.useState(""),[j,_]=w.useState(""),{login:C,signUp:E,signInWithPhone:A,verifyOtp:q}=De(),{showSuccess:re,showError:M,showInfo:we}=It(),Z=Xe(),S=async()=>{try{p(!0);const{error:L}=await U.auth.resend({type:"signup",email:N});if(L)throw L;re("Verification Email Sent","Please check your email (including spam folder) for the verification link.")}catch(L){console.error("Resend verification error:",L),M("Failed to Resend Email",L.message||"Unable to resend verification email. Please try again.")}finally{p(!1)}},$=async L=>{if(L.preventDefault(),_(""),p(!0),r==="parent@demo.com"&&s==="parent123"){localStorage.setItem("demoUser",JSON.stringify({_id:"demo-parent-1",id:"demo-parent-1",name:"Demo Parent",email:"parent@demo.com",role:"parent",location:{city:"Gurgaon",area:"Sector 15",pincode:"122001",coordinates:{lat:28.4595,lng:77.0266}},children:[{name:"Emma",age:8,interests:["music","art"]},{name:"Liam",age:10,interests:["coding","sports"]}]})),re("Login Successful","Welcome to BrightRoots! Redirecting to home..."),setTimeout(()=>{window.location.href="/home"},1e3);return}try{if(e==="phone"&&!v){await A(r),x(!0);return}if(e==="phone"&&v){if(!m||m.length!==6){M("Invalid OTP","Please enter a valid 6-digit OTP");return}await q(r,m),Z("/location")}else if(e==="email"&&d){if(!r.trim()){M("Missing Email","Please enter your email address");return}const{error:P}=await U.auth.signInWithOtp({email:r,options:{emailRedirectTo:`${window.location.origin}/home`}});if(P)throw P;we("Magic Link Sent","Check your email for the login link!");return}else if(e==="email"&&!d){if(!r.trim()||!s.trim()){M("Missing Information","Please enter both email and password");return}if(o&&!c.trim()){M("Missing Information","Please enter your name");return}o?(await E(r,s,{name:c,role:"parent"}),re("Account Created Successfully!","Please check your email to verify your account before logging in. You can close this page and return after verification."),k(r),l(!1),u(""),i("")):(await C(r,s,"parent"),console.log("✅ Login completed, checking navigation..."))}}catch(P){console.error("Login error:",P),p(!1),P!=null&&P.message||P!=null&&P.error_description,P.message.includes("Invalid login credentials")?(M("Login Failed","Invalid email or password. Please check your credentials."),_("Invalid email or password. Please check your credentials.")):P.message.includes("Email not confirmed")?(M("Email Not Confirmed","Please check your email (including spam folder) and click the confirmation link before logging in."),f(!0),k(r)):P.message.includes("User already registered")?(M("Account Already Exists","An account with this email already exists. Please use the login option instead."),l(!1)):P.message.includes("Failed to fetch")?M("Connection Error","Unable to connect to the server. Please check your internet connection."):M(o?"Signup Failed":"Login Failed",P.message||`${o?"Account creation":"Login"} failed. Please try again.`)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-purple-600 to-blue-600 rounded-3xl mb-6",children:a.jsx(Yn,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome to BrightRoots"}),a.jsx("p",{className:"text-gray-600",children:"Find the best classes for your child"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[a.jsxs("form",{onSubmit:$,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[a.jsxs("button",{type:"button",onClick:()=>{t("email"),x(!1),y(""),i(""),l(!1)},className:`flex items-center justify-center p-4 border-2 rounded-xl transition-all ${e==="email"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx(xs,{className:"w-5 h-5 mr-2"}),a.jsx("span",{className:"font-medium",children:"Email"})]}),a.jsxs("button",{type:"button",onClick:()=>{t("phone"),x(!1),y(""),i("")},className:`flex items-center justify-center p-4 border-2 rounded-xl transition-all ${e==="phone"?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx(sr,{className:"w-5 h-5 mr-2"}),a.jsx("span",{className:"font-medium",children:"Phone"})]})]}),e==="email"&&o&&!d&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsx("input",{type:"text",value:c,onChange:L=>u(L.target.value),placeholder:"Enter your full name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e==="email"?"Email Address":"Phone Number"}),a.jsxs("div",{className:"relative",children:[e==="email"?a.jsx(xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}):a.jsx(sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:e==="email"?"email":"tel",value:r,onChange:L=>n(L.target.value),placeholder:e==="email"?"Enter your email":"Enter your phone number",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",required:!0,disabled:v})]})]}),e==="email"&&!d&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsx("input",{type:"password",value:s,onChange:L=>i(L.target.value),placeholder:o?"Create a password":"Enter your password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",required:!0,minLength:6}),o&&a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters long"})]}),e==="email"&&a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:L=>h(L.target.checked),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500 mr-2"}),"Use magic link instead"]}),!d&&a.jsx("button",{type:"button",onClick:()=>l(!o),className:"text-purple-600 hover:text-purple-700",children:o?"Already have account?":"Need an account?"})]}),e==="phone"&&v&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter OTP"}),a.jsx("input",{type:"text",value:m,onChange:L=>y(L.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"6-digit OTP",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all text-center text-lg tracking-widest",maxLength:6,required:!0}),a.jsxs("p",{className:"text-sm text-gray-500 mt-2 text-center",children:["OTP sent to ",r]})]}),a.jsxs(D,{type:"submit",size:"lg",className:"w-full group",children:[a.jsx("span",{children:e==="phone"&&!v?"Send OTP":e==="phone"&&v?"Verify OTP":e==="email"&&d?"Send Magic Link":e==="email"&&o?"Create Account":b?"Logging in...":"Login"}),!b&&a.jsx(at,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]}),j&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-700 text-center",children:j})}),g&&a.jsx("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"Email Not Verified"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Didn't receive the verification email?"})]}),a.jsx(D,{type:"button",variant:"outline",size:"sm",onClick:S,disabled:b,children:b?"Sending...":"Resend Email"})]})})]}),e==="phone"&&v&&a.jsx("div",{className:"mt-4 text-center",children:a.jsx("button",{type:"button",onClick:()=>{x(!1),y("")},className:"text-sm text-purple-600 hover:text-purple-700",children:"Change phone number"})}),a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Demo Credentials:"}),a.jsx("div",{className:"text-sm text-blue-800 space-y-1",children:a.jsxs("p",{children:[a.jsx("strong",{children:"Parent Login:"})," parent@demo.com / parent123"]})})]}),a.jsx("p",{className:"text-xs text-gray-500 text-center",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]}),a.jsx("div",{className:"mt-4 text-center",children:a.jsx(D,{to:"/provider/login",variant:"outline",size:"sm",children:"Are you an educator? Join as Provider"})}),a.jsx("div",{className:"mt-2 text-center",children:a.jsx(D,{to:"/admin/login",variant:"outline",size:"sm",children:"Admin Portal"})})]})]})})}function V({children:e,className:t="",hover:r=!1}){return a.jsx("div",{className:`bg-white rounded-xl shadow-sm border border-gray-200 ${r?"hover:shadow-md hover:border-gray-300 transition-all duration-200":""} ${t}`,children:e})}const Tw=["Delhi","Mumbai","Bangalore","Hyderabad","Chennai","Kolkata","Pune","Gurgaon","Noida","Ahmedabad","Jaipur","Lucknow"],ed={Gurgaon:["Sector 15","Sector 22","Phase 2","DLF City","Cyber City","Golf Course Road"],Delhi:["Connaught Place","Karol Bagh","Lajpat Nagar","Saket","Dwarka","Rohini"],Mumbai:["Bandra","Andheri","Powai","Thane","Navi Mumbai","Borivali"]};function Rw(){const[e,t]=w.useState("auto"),[r,n]=w.useState(!1),[s,i]=w.useState(""),[o,l]=w.useState(""),[c,u]=w.useState(""),{setUserLocation:d}=De(),h=Xe(),m=()=>{if(n(!0),console.log("🔍 Starting location detection..."),navigator.geolocation){console.log("✅ Geolocation API is available");const x={enableHighAccuracy:!0,timeout:15e3,maximumAge:6e5};navigator.geolocation.getCurrentPosition(async b=>{try{console.log("📍 GPS Coordinates received:",b.coords),console.log("📍 Latitude:",b.coords.latitude),console.log("📍 Longitude:",b.coords.longitude);const p=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${b.coords.latitude}&lon=${b.coords.longitude}&addressdetails=1`;console.log("🌍 Fetching from:",p);const g=await fetch(p);if(g.ok){const f=await g.json();console.log("🌍 Reverse geocoding result:",f);const N=f.address,k=N.city||N.town||N.village||N.county||"Gurgaon",j=N.suburb||N.neighbourhood||N.road||"Current Location",_={city:k,area:j,coordinates:{lat:b.coords.latitude,lng:b.coords.longitude}};console.log("✅ Real location detected:",_),d(_),n(!1),h("/home")}else throw new Error(`Reverse geocoding failed with status: ${g.status}`)}catch(p){console.warn("❌ Reverse geocoding failed, using GPS coordinates only:",p);const g={city:"Gurgaon",area:"Current Location",coordinates:{lat:b.coords.latitude,lng:b.coords.longitude}};console.log("✅ Using fallback location:",g),d(g),n(!1),h("/home")}},b=>{console.error("❌ GPS Error:",b),console.error("❌ Error code:",b.code),console.error("❌ Error message:",b.message);let p="Unable to detect location. ";switch(b.code){case b.PERMISSION_DENIED:p+="Location permission denied. Please allow location access and try again.";break;case b.POSITION_UNAVAILABLE:p+="Location information unavailable. Please try again.";break;case b.TIMEOUT:p+="Location request timed out. Please try again.";break;default:p+="Please select manually."}n(!1),t("manual"),alert(p)},x)}else console.error("❌ Geolocation API not supported"),n(!1),t("manual"),alert("Geolocation is not supported in this browser. Please select manually.")},y=()=>{if(!s||!o){alert("Please select both city and area");return}d({city:s,area:o,coordinates:{lat:28.4595,lng:77.0266}}),h("/home")},v=Tw.filter(x=>x.toLowerCase().includes(c.toLowerCase()));return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-blue-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-600 to-blue-600 rounded-2xl mb-4",children:a.jsx(_n,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"What's your location?"}),a.jsx("p",{className:"text-gray-600",children:"We'll show you the best classes nearby"})]}),a.jsx(V,{className:"p-6",children:e==="auto"?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r?a.jsx(Zu,{className:"w-8 h-8 text-purple-600 animate-spin"}):a.jsx(Hi,{className:"w-8 h-8 text-purple-600"})}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:r?"Detecting your location...":"Use current location"}),a.jsx("p",{className:"text-gray-600 text-sm mb-6",children:r?"Please wait while we find your location":"Allow location access for personalized recommendations"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(D,{onClick:m,disabled:r,className:"w-full",size:"lg",children:r?a.jsxs(a.Fragment,{children:[a.jsx(Zu,{className:"w-4 h-4 mr-2 animate-spin"}),"Detecting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Detect Automatically"]})}),a.jsxs(D,{onClick:()=>t("manual"),variant:"outline",className:"w-full",size:"lg",disabled:r,children:[a.jsx(Er,{className:"w-4 h-4 mr-2"}),"Enter Manually"]})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select your location"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Choose your city and area"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search City"}),a.jsxs("div",{className:"relative",children:[a.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",value:c,onChange:x=>u(x.target.value),placeholder:"Type city name...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select City"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:v.map(x=>a.jsx("button",{type:"button",onClick:()=>{i(x),l("")},className:`p-3 text-sm border rounded-lg transition-all ${s===x?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300"}`,children:x},x))})]}),s&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Area in ",s]}),ed[s]?a.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:ed[s].map(x=>a.jsx("button",{type:"button",onClick:()=>l(x),className:`p-3 text-sm border rounded-lg transition-all text-left ${o===x?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 hover:border-gray-300"}`,children:x},x))}):a.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),placeholder:`Enter area in ${s}`,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),!1,a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(D,{onClick:()=>t("auto"),variant:"outline",className:"flex-1",children:"Back"}),a.jsxs(D,{onClick:y,disabled:!s||!o||s.trim()===""||o.trim()==="",className:"flex-1 group",children:[a.jsx("span",{children:"Continue"}),a.jsx(at,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]})})]})})}const zr=[{id:"1",name:"Harmony Music Academy",description:"Professional music education with experienced instructors. We offer piano, guitar, violin, and vocal training for all age groups.",categories:["music"],location:{address:"Music Academy, Sector 15, Gurgaon",city:"Gurgaon",area:"Sector 15",coordinates:{lat:28.4595,lng:77.0266}},contact:{phone:"+91 98765 43210",whatsapp:"+91 98765 43210",email:"info@harmonymusic.com"},classes:[{id:"c1",name:"Piano for Beginners",description:"Learn piano basics with fun exercises",ageGroup:"6-12 years",mode:"offline",price:1500,duration:"45 mins",schedule:["Mon 4-5 PM","Wed 4-5 PM","Sat 10-11 AM"]}],images:["https://images.pexels.com/photos/164743/pexels-photo-164743.jpeg?auto=compress&cs=tinysrgb&w=400"],isVerified:!0,averageRating:4.8,totalReviews:24,distance:2.3,tags:["verified","experienced","group-classes"],priceRange:{min:1200,max:2e3}},{id:"2",name:"Champions Sports Club",description:"Complete sports training facility offering football, cricket, basketball, and swimming coaching for kids and teens.",categories:["sports"],location:{address:"Sports Complex, Phase 2, Gurgaon",city:"Gurgaon",area:"Phase 2",coordinates:{lat:28.4421,lng:77.0382}},contact:{phone:"+91 98765 43211",whatsapp:"+91 98765 43211"},classes:[{id:"c2",name:"Youth Football Training",description:"Professional football coaching for young athletes",ageGroup:"8-16 years",mode:"offline",price:2e3,duration:"60 mins",schedule:["Tue 5-6 PM","Thu 5-6 PM","Sun 9-10 AM"]}],images:["https://images.pexels.com/photos/274422/pexels-photo-274422.jpeg?auto=compress&cs=tinysrgb&w=400"],isVerified:!0,averageRating:4.6,totalReviews:18,distance:3.1,tags:["verified","outdoor","team-sports"],priceRange:{min:1800,max:2500}},{id:"3",name:"CodeCraft Academy",description:"Making coding fun and accessible for kids. We teach Python, Scratch, web development, and robotics through interactive projects.",categories:["coding"],location:{address:"Online Classes",city:"Gurgaon",area:"Online",coordinates:{lat:28.4595,lng:77.0266}},contact:{phone:"+91 98765 43212",email:"hello@codecraft.in"},classes:[{id:"c3",name:"Python for Kids",description:"Learn programming with fun Python projects",ageGroup:"10-16 years",mode:"online",price:1800,duration:"60 mins",schedule:["Mon 6-7 PM","Wed 6-7 PM"]}],images:["https://images.pexels.com/photos/574071/pexels-photo-574071.jpeg?auto=compress&cs=tinysrgb&w=400"],isVerified:!0,averageRating:4.9,totalReviews:31,distance:0,tags:["verified","online","project-based"],priceRange:{min:1500,max:2200}},{id:"4",name:"Bright Minds Tuition Center",description:"Expert academic coaching for all subjects. Specialized in CBSE, ICSE curriculum with proven track record of excellent results.",categories:["tuition"],location:{address:"Learning Center, Sector 22, Gurgaon",city:"Gurgaon",area:"Sector 22",coordinates:{lat:28.4743,lng:77.0465}},contact:{phone:"+91 98765 43213",whatsapp:"+91 98765 43213"},classes:[{id:"c4",name:"Mathematics (Class 9-10)",description:"Comprehensive math coaching with concept clarity",ageGroup:"14-16 years",mode:"offline",price:1200,duration:"90 mins",schedule:["Mon 2-3:30 PM","Wed 2-3:30 PM","Fri 2-3:30 PM"]}],images:["https://images.pexels.com/photos/5212320/pexels-photo-5212320.jpeg?auto=compress&cs=tinysrgb&w=400"],isVerified:!0,averageRating:4.7,totalReviews:15,distance:4.2,tags:["verified","academic","small-batch"],priceRange:{min:1e3,max:1500}}],td=[{id:"tuition",name:"Tuitions",icon:"📚",color:"bg-blue-100 text-blue-800"},{id:"music",name:"Music",icon:"🎵",color:"bg-purple-100 text-purple-800"},{id:"sports",name:"Sports",icon:"⚽",color:"bg-green-100 text-green-800"},{id:"coding",name:"Coding",icon:"💻",color:"bg-orange-100 text-orange-800"},{id:"dance",name:"Dance",icon:"💃",color:"bg-pink-100 text-pink-800"},{id:"art",name:"Art & Craft",icon:"🎨",color:"bg-yellow-100 text-yellow-800"},{id:"daycare",name:"Daycare",icon:"🏠",color:"bg-indigo-100 text-indigo-800"},{id:"camps",name:"Summer Camps",icon:"🏕️",color:"bg-teal-100 text-teal-800"}],rd=[{id:"1",provider:"1",providerName:"Harmony Music Academy",parent:"parent1",childName:"Emma",childAge:8,interestedIn:"Piano for Beginners",message:"Hi, I would like to know more about piano lessons for my 8-year-old daughter.",status:"responded",createdAt:new Date(2025,1,10),response:"Thank you for your interest! We have slots available on weekdays. Please call us to schedule a trial class.",responseAt:new Date(2025,1,10)},{id:"2",provider:"3",providerName:"CodeCraft Academy",parent:"parent1",childName:"Liam",childAge:10,interestedIn:"Python for Kids",message:"Is this suitable for a complete beginner? My son has no coding experience.",status:"sent",createdAt:new Date(2025,1,12)}],Aw=[{id:"1",provider:"1",parent:"parent1",childName:"Emma",rating:5,comment:"Excellent teacher! Emma loves her piano lessons and has improved so much.",createdAt:new Date(2025,0,28),parentName:"Sarah Johnson",helpful:12},{id:"2",provider:"1",parent:"parent2",childName:"Alex",rating:5,comment:"Very patient and skilled instructor. Great for beginners!",createdAt:new Date(2025,0,25),parentName:"David Smith",helpful:8},{id:"3",provider:"3",parent:"parent3",childName:"Maya",rating:5,comment:"Perfect introduction to coding. My daughter is now excited about programming!",createdAt:new Date(2025,0,22),parentName:"Priya Sharma",helpful:15}];function al({rating:e,maxRating:t=5,size:r="md",readonly:n=!0,onRatingChange:s}){const i={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"};return a.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:t},(o,l)=>a.jsx("button",{type:"button",disabled:n,onClick:()=>!n&&(s==null?void 0:s(l+1)),className:`${n?"":"cursor-pointer hover:scale-110 transition-transform"}`,children:a.jsx(yc,{className:`${i[r]} ${l<e?"text-yellow-400 fill-yellow-400":"text-gray-300"}`})},l))})}function Za(e,t){if(!e||!t)return 0;const r=c=>c*Math.PI/180,n=6371,s=r(t.latitude-e.latitude),i=r(t.longitude-e.longitude),o=Math.sin(s/2)**2+Math.cos(r(e.latitude))*Math.cos(r(t.latitude))*Math.sin(i/2)**2,l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return n*l}function Lw(){var j;const{user:e,logoutWithConfirmation:t}=De(),[r,n]=w.useState(""),[s,i]=w.useState(""),[o,l]=w.useState(!1),[c,u]=w.useState([]),[d,h]=w.useState(!0),[m,y]=w.useState(null),[v,x]=w.useState(null),[b,p]=w.useState(!1);w.useEffect(()=>{var _;console.log("🌍 Checking location from AuthContext..."),(_=e==null?void 0:e.location)!=null&&_.coordinates?(console.log("📍 Using location from AuthContext:",e.location.coordinates),x({latitude:e.location.coordinates.lat,longitude:e.location.coordinates.lng})):(console.log("📍 No location in AuthContext, attempting GPS..."),navigator.geolocation.getCurrentPosition(C=>{console.log("✅ GPS location captured:",C.coords),x({latitude:C.coords.latitude,longitude:C.coords.longitude})},C=>{console.warn("❌ GPS location failed:",C),console.log("🔄 Using fallback location (Gurgaon)"),x({latitude:28.4595,longitude:77.0266})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5}))},[e==null?void 0:e.location]),w.useEffect(()=>{v&&g()},[v,s,e]);const g=async()=>{var _;h(!0),y(null);try{if(localStorage.getItem("demoUser")){console.log("👤 Demo user detected, using mock data");let E=[...zr];v&&!b?E=zr.map(A=>({...A,calculatedDistance:Za(v,A.location.coordinates)})).sort((A,q)=>A.calculatedDistance-q.calculatedDistance).map(({calculatedDistance:A,...q})=>({...q,distance:Math.round(A*10)/10})):E=zr.map(A=>({...A,distance:0})),u(E),h(!1);return}else{console.log("🔗 Regular user, fetching from Supabase");let E=U.from("providers").select(`
            *,
            provider_services(category),
            provider_classes(id, name, price, mode, age_group, duration),
            provider_media(file_path, media_type)
          `).eq("is_published",!0).eq("status","approved");s&&(E=E.eq("provider_services.category",s)),(_=e==null?void 0:e.location)!=null&&_.city&&!b&&(E=E.eq("city",e.location.city));const{data:A,error:q}=await E.order("created_at",{ascending:!1});if(q)throw q;console.log("📊 Published providers from Supabase:",A);let re=(A||[]).map((M,we)=>{var Z,S,$,L;return{id:M.id,name:M.business_name,description:M.description||`Professional services in ${M.city}`,categories:((Z=M.provider_services)==null?void 0:Z.map(P=>P.category))||[],location:{address:`${M.area}, ${M.city}`,city:M.city,area:M.area,coordinates:{lat:M.latitude||28.4595,lng:M.longitude||77.0266}},contact:{phone:M.phone,whatsapp:M.whatsapp,email:M.email},classes:((S=M.provider_classes)==null?void 0:S.map(P=>({id:P.id,name:P.name,description:P.description,ageGroup:P.age_group,mode:P.mode,price:P.price,duration:P.duration,schedule:P.schedule||[],type:P.mode,batchSize:P.batch_size,feeType:P.fee_type})))||[],images:(($=M.provider_media)==null?void 0:$.filter(P=>P.media_type==="profile_image").map(P=>P.file_path))||["https://images.pexels.com/photos/5212320/pexels-photo-5212320.jpeg?auto=compress&cs=tinysrgb&w=400"],isVerified:M.is_verified,averageRating:4.5+Math.random()*.5,totalReviews:Math.floor(Math.random()*50)+10,distance:0,tags:M.is_verified?["verified","experienced"]:["experienced"],priceRange:((L=M.provider_classes)==null?void 0:L.length)>0?{min:Math.min(...M.provider_classes.map(P=>P.price)),max:Math.max(...M.provider_classes.map(P=>P.price))}:{min:1200,max:2e3},createdAt:new Date(M.created_at),updatedAt:new Date(M.updated_at),status:M.status}});v&&!b?re=re.map(M=>({...M,distance:Za(v,M.location.coordinates)})).sort((M,we)=>M.distance-we.distance).map(M=>({...M,distance:Math.round(M.distance*10)/10})):b&&(re=re.map(M=>({...M,distance:0}))),console.log("✅ Converted and sorted providers for display:",re),u(re)}}catch(C){console.error("❌ Error loading providers:",C),y(C.message||"Failed to load providers"),console.log("🔄 Falling back to mock data due to error");let E=[...zr];v&&(E=zr.map(A=>({...A,distance:Za(v,A.location.coordinates)})).sort((A,q)=>A.distance-q.distance).map(A=>({...A,distance:Math.round(A.distance*10)/10}))),u(E)}finally{h(!1)}},f=c.filter(_=>{const C=_.name.toLowerCase().includes(r.toLowerCase())||_.description.toLowerCase().includes(r.toLowerCase()),E=!s||_.categories.includes(s);return C&&E}),N=_=>_===0?"Online":b?"All locations":`${_} km away`,k=()=>{p(!b)};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsxs("div",{className:"px-4 py-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(_n,{className:"w-4 h-4 text-purple-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"You're browsing in"}),a.jsx("p",{className:"font-medium text-gray-900",children:b?"All Locations":e!=null&&e.location?`${e.location.area}, ${e.location.city}`:"All Locations"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[(e==null?void 0:e.location)&&a.jsx(D,{variant:"outline",size:"sm",onClick:k,children:b?"Show Nearby":"View All"}),a.jsx(D,{variant:"outline",size:"sm",to:"/location",children:e!=null&&e.location?"Change":"Set Location"}),a.jsx("button",{onClick:t,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors",title:"Logout",children:a.jsx(gc,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search for classes, tutors, activities...",value:r,onChange:_=>n(_.target.value),className:"w-full pl-10 pr-12 py-3 bg-gray-100 rounded-xl border-0 focus:ring-2 focus:ring-purple-500 focus:bg-white transition-all"}),a.jsx("button",{onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1",children:a.jsx(cm,{className:"w-4 h-4 text-gray-400"})})]})]})}),a.jsxs("div",{className:"px-4 py-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Browse Categories"}),a.jsxs("div",{className:"flex space-x-3 overflow-x-auto pb-2",children:[a.jsx("button",{onClick:()=>i(""),className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all ${s?"bg-white text-gray-600 border border-gray-200":"bg-purple-600 text-white"}`,children:"All"}),td.map(_=>a.jsxs("button",{onClick:()=>i(_.id),className:`flex-shrink-0 flex items-center space-x-2 px-4 py-2 rounded-full text-sm font-medium transition-all ${s===_.id?"bg-purple-600 text-white":"bg-white text-gray-600 border border-gray-200"}`,children:[a.jsx("span",{children:_.icon}),a.jsx("span",{children:_.name})]},_.id))]})]}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s?`${(j=td.find(_=>_.id===s))==null?void 0:j.name} ${b?"everywhere":"near you"}`:b?"All providers":e!=null&&e.location?"Top-rated providers near you":"All providers"}),a.jsxs("span",{className:"text-sm text-gray-500",children:[f.length," found"]})]}),d&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading providers..."})]}),m&&a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("div",{className:"text-red-500 mb-4",children:[a.jsx("span",{className:"text-4xl",children:"⚠️"}),a.jsx("h3",{className:"text-xl font-medium mt-2",children:"Error Loading Providers"}),a.jsx("p",{className:"text-red-400 mt-2",children:m})]}),a.jsx(D,{onClick:()=>window.location.reload(),variant:"outline",children:"Retry"})]}),!d&&!m&&a.jsx("div",{className:"space-y-4",children:f.map(_=>a.jsxs(V,{hover:!0,className:"p-4",children:[a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("div",{className:"relative flex-shrink-0",children:[a.jsx("img",{src:_.images[0],alt:_.name,className:"w-20 h-20 rounded-xl object-cover"}),_.isVerified&&a.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white text-xs",children:"✓"})})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:_.name}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mt-1",children:_.description})]}),a.jsx("button",{className:"ml-2 p-1",children:a.jsx(mc,{className:"w-5 h-5 text-gray-400"})})]}),a.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:_.tags.slice(0,3).map(C=>a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:C},C))}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(al,{rating:_.averageRating||0,size:"sm"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:_.averageRating}),a.jsxs("span",{className:"text-sm text-gray-500",children:["(",_.totalReviews,")"]})]}),a.jsx("span",{className:"text-sm text-gray-500",children:b?"All locations":N(_.distance||0)})]}),_.priceRange&&a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["₹",_.priceRange.min,"-",_.priceRange.max]}),a.jsx("p",{className:"text-xs text-gray-500",children:"per session"})]})]})]})]}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:a.jsxs(D,{to:`/provider/${_.id}`,variant:"outline",className:"w-full group",children:[a.jsx("span",{children:"View Details & Enquire"}),a.jsx(Dx,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})})]},_.id))}),f.length===0&&!d&&!m&&a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("div",{className:"text-gray-500 mb-4",children:[a.jsx(Er,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("h3",{className:"text-xl font-medium",children:"No providers found"}),a.jsx("p",{className:"text-gray-400 mt-2",children:c.length===0?b?"No providers available anywhere.":"No providers have been added yet. Contact admin to add providers.":"Try adjusting your search or browse different categories"})]}),a.jsx(D,{onClick:()=>{n(""),i("")},variant:"outline",children:"Clear Search"})]})]})]})}function $w(){var g;const{id:e}=g0(),{user:t}=De(),r=Xe(),{showSuccess:n,showError:s}=It(),[i,o]=w.useState(!1),[l,c]=w.useState(""),[u,d]=w.useState(""),[h,m]=w.useState(""),y=zr.find(f=>String(f.id)===String(e)),v=Aw.filter(f=>f.provider===e);if(!y)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Provider not found"}),a.jsx(D,{to:"/home",children:"Back to Home"})]})});const x=()=>{if(!l||!u||!h.trim()){s("Missing Information","Please fill all fields");return}n("Enquiry Sent","Your enquiry has been sent successfully! The provider will contact you soon."),o(!1),r("/enquiries")},b=()=>{if(y.contact.whatsapp){const f=`Hi! I'm interested in classes for my child at ${y.name}. Can you please share more details?`,N=`https://wa.me/${y.contact.whatsapp.replace(/[^0-9]/g,"")}?text=${encodeURIComponent(f)}`;window.open(N,"_blank")}},p=f=>f===0?"Online Classes":`${f} km away`;return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsxs("div",{className:"flex items-center justify-between p-4",children:[a.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2",children:a.jsx(jt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2",children:a.jsx(mc,{className:"w-5 h-5 text-gray-600"})}),a.jsx("button",{className:"p-2",children:a.jsx(fw,{className:"w-5 h-5 text-gray-600"})})]})]})}),a.jsxs("div",{className:"px-4 pb-6",children:[a.jsxs("div",{className:"relative h-48 rounded-2xl overflow-hidden mb-4",children:[a.jsx("img",{src:y.images[0],alt:y.name,className:"w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),a.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"text-white",children:[a.jsx("h1",{className:"text-2xl font-bold mb-1",children:y.name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[y.isVerified&&a.jsxs("div",{className:"flex items-center space-x-1 bg-green-500 px-2 py-1 rounded-full",children:[a.jsx(Et,{className:"w-3 h-3"}),a.jsx("span",{className:"text-xs font-medium",children:"Verified"})]}),a.jsx("span",{className:"text-sm opacity-90",children:p(y.distance||0)})]})]})})})]}),a.jsxs(V,{className:"p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(al,{rating:y.averageRating||0,size:"sm"}),a.jsx("span",{className:"font-semibold text-gray-900",children:y.averageRating})]}),a.jsxs("span",{className:"text-gray-600",children:[y.totalReviews," reviews"]})]}),y.priceRange&&a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-semibold text-gray-900",children:["₹",y.priceRange.min,"-",y.priceRange.max]}),a.jsx("p",{className:"text-sm text-gray-500",children:"per session"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 mb-3",children:[a.jsx(_n,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm",children:y.location.address})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:y.tags.map(f=>a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-sm rounded-full",children:f},f))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[a.jsxs(D,{onClick:()=>o(!0),className:"flex items-center justify-center",children:[a.jsx(Xn,{className:"w-4 h-4 mr-2"}),"Enquire Now"]}),a.jsxs(D,{onClick:b,variant:"outline",className:"flex items-center justify-center",children:[a.jsx(sr,{className:"w-4 h-4 mr-2"}),"WhatsApp"]})]}),a.jsxs(V,{className:"p-4 mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"About"}),a.jsx("p",{className:"text-gray-700 leading-relaxed",children:y.description})]}),a.jsxs(V,{className:"p-4 mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Classes Offered"}),a.jsx("div",{className:"space-y-3",children:y.classes.map(f=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:f.name}),a.jsxs("span",{className:"font-semibold text-purple-600",children:["₹",f.price]})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:f.description}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(ws,{className:"w-4 h-4"}),a.jsx("span",{children:f.ageGroup})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(on,{className:"w-4 h-4"}),a.jsx("span",{children:f.duration})]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${f.mode==="online"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:f.mode})]}),a.jsx("div",{className:"mt-2",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[a.jsx("strong",{children:"Schedule:"})," ",f.schedule.join(", ")]})})]},f.id))})]}),a.jsxs(V,{className:"p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Reviews"}),a.jsx(D,{variant:"outline",size:"sm",children:"View All"})]}),v.length>0?a.jsx("div",{className:"space-y-4",children:v.slice(0,3).map(f=>a.jsxs("div",{className:"border-b border-gray-200 last:border-b-0 pb-4 last:pb-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx("span",{className:"font-medium text-gray-900",children:f.parentName}),a.jsxs("span",{className:"text-sm text-gray-500",children:["for ",f.childName]})]}),a.jsx(al,{rating:f.rating,size:"sm"})]}),a.jsx("span",{className:"text-sm text-gray-500",children:f.createdAt.toLocaleDateString()})]}),a.jsx("p",{className:"text-gray-700 text-sm",children:f.comment}),f.helpful&&a.jsx("div",{className:"mt-2 flex items-center space-x-2",children:a.jsxs("button",{className:"text-sm text-gray-500 hover:text-gray-700",children:["👍 Helpful (",f.helpful,")"]})})]},f.id))}):a.jsxs("div",{className:"text-center py-6 text-gray-500",children:[a.jsx(yc,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"No reviews yet"})]})]}),a.jsxs(V,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Contact Information"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sr,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-gray-700",children:y.contact.phone})]}),y.contact.email&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"w-4 h-4 text-gray-600",children:"✉️"}),a.jsx("span",{className:"text-gray-700",children:y.contact.email})]})]})]})]}),i&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end z-50",children:a.jsxs("div",{className:"bg-white rounded-t-2xl w-full max-h-[80vh] overflow-y-auto",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Send Enquiry"}),a.jsx("button",{onClick:()=>o(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:"✕"})]})}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Child"}),a.jsxs("select",{value:l,onChange:f=>c(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Choose a child"}),(g=t==null?void 0:t.children)==null?void 0:g.map(f=>a.jsxs("option",{value:f.name,children:[f.name," (Age ",f.age,")"]},f.name))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interested In"}),a.jsxs("select",{value:u,onChange:f=>d(f.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select a class"}),y.classes.map(f=>a.jsx("option",{value:f.name,children:f.name},f.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message"}),a.jsx("textarea",{value:h,onChange:f=>m(f.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",placeholder:"Tell us about your requirements, preferred timings, etc."})]}),a.jsxs("div",{className:"flex space-x-3 pt-4",children:[a.jsx(D,{onClick:()=>o(!1),variant:"outline",className:"flex-1",children:"Cancel"}),a.jsx(D,{onClick:x,disabled:!l||!u||!h.trim(),className:"flex-1",children:"Send Enquiry"})]})]})]})})]})}function Ow(){const{user:e}=De(),[t,r]=w.useState("all"),i=(localStorage.getItem("demoUser")?rd:rd.filter(c=>c.parent===(e==null?void 0:e._id))).filter(c=>t==="all"||c.status===t),o=c=>{switch(c){case"responded":return"bg-green-100 text-green-800";case"sent":return"bg-yellow-100 text-yellow-800";case"closed":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},l=c=>{switch(c){case"responded":return a.jsx(Et,{className:"w-4 h-4"});case"sent":return a.jsx(on,{className:"w-4 h-4"});case"closed":return a.jsx(Xn,{className:"w-4 h-4"});default:return a.jsx(Xn,{className:"w-4 h-4"})}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsxs("div",{className:"flex items-center p-4",children:[a.jsx("button",{onClick:()=>window.history.back(),className:"p-2 -ml-2 mr-2",children:a.jsx(jt,{className:"w-5 h-5"})}),a.jsx("h1",{className:"text-lg font-semibold",children:"My Enquiries"})]})}),a.jsxs("div",{className:"px-4 py-6",children:[a.jsx("div",{className:"flex space-x-2 mb-6 overflow-x-auto",children:["all","sent","responded","closed"].map(c=>a.jsx("button",{onClick:()=>r(c),className:`flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all ${t===c?"bg-purple-600 text-white":"bg-white text-gray-600 border border-gray-200"}`,children:c==="all"?"All":c.charAt(0).toUpperCase()+c.slice(1)},c))}),a.jsx("div",{className:"space-y-4",children:i.length>0?i.map(c=>{var u;return a.jsxs(V,{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:c.providerName}),a.jsxs("p",{className:"text-sm text-gray-600",children:["For ",c.childName," • ",c.interestedIn]})]}),a.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${o(c.status)}`,children:[l(c.status),a.jsx("span",{className:"capitalize",children:c.status})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-3 mb-3",children:a.jsx("p",{className:"text-sm text-gray-700",children:c.message})}),c.response&&a.jsxs("div",{className:"bg-purple-50 border-l-4 border-purple-500 rounded-lg p-3 mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-purple-900 mb-1",children:"Provider Response:"}),a.jsx("p",{className:"text-sm text-purple-800",children:c.response}),a.jsx("p",{className:"text-xs text-purple-600 mt-2",children:(u=c.responseAt)==null?void 0:u.toLocaleDateString()})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("span",{children:["Sent on ",c.createdAt.toLocaleDateString()]}),c.status==="responded"&&a.jsxs(D,{size:"sm",variant:"outline",children:[a.jsx(sr,{className:"w-3 h-3 mr-1"}),"Call Now"]})]})]},c.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsxs("div",{className:"text-gray-500 mb-4",children:[a.jsx(Xn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),a.jsx("h3",{className:"text-xl font-medium",children:"No enquiries found"}),a.jsx("p",{className:"text-gray-400 mt-2",children:t==="all"?"You haven't made any enquiries yet. Start exploring providers!":`No ${t} enquiries found.`})]}),t==="all"&&a.jsx(D,{to:"/home",children:"Explore Providers"})]})})]})]})}function hm(){const{user:e}=De(),[t,r]=w.useState(null),[n,s]=w.useState(!0),[i,o]=w.useState(null);w.useEffect(()=>{(e==null?void 0:e.role)==="provider"?l():s(!1)},[e]);const l=async()=>{try{if(s(!0),o(null),!(e!=null&&e.id))return;const d=await ce.getProviderByUserId(e.id);r(d)}catch(d){o(d instanceof Error?d.message:"Failed to load provider")}finally{s(!1)}};return{provider:t,loading:n,error:i,createProvider:async d=>{try{if(o(null),!(e!=null&&e.id))throw new Error("User not authenticated");const h=await ce.createProvider({...d,user_id:e.id});return r(h),h}catch(h){throw o(h instanceof Error?h.message:"Failed to create provider"),h}},updateProvider:async d=>{try{if(o(null),!(t!=null&&t.id))throw new Error("Provider not found");const h=await ce.updateProvider(t.id,d);return r(h),h}catch(h){throw o(h instanceof Error?h.message:"Failed to update provider"),h}},refetch:l}}function Iw(e){const[t,r]=w.useState([]),[n,s]=w.useState(!0),[i,o]=w.useState(null);w.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{if(s(!0),o(null),!e)return;const h=await ce.getProviderClasses(e);r(h)}catch(h){o(h instanceof Error?h.message:"Failed to load classes")}finally{s(!1)}};return{classes:t,loading:n,error:i,createClass:async h=>{try{if(o(null),!e)throw new Error("Provider ID required");const m=await ce.createClass({...h,provider_id:e});return r(y=>[m,...y]),m}catch(m){throw o(m instanceof Error?m.message:"Failed to create class"),m}},updateClass:async(h,m)=>{try{o(null);const y=await ce.updateClass(h,m);return r(v=>v.map(x=>x.id===h?y:x)),y}catch(y){throw o(y instanceof Error?y.message:"Failed to update class"),y}},deleteClass:async h=>{try{o(null),await ce.deleteClass(h),r(m=>m.filter(y=>y.id!==h))}catch(m){throw o(m instanceof Error?m.message:"Failed to delete class"),m}},refetch:l}}const Dw=["Delhi","Mumbai","Bangalore","Hyderabad","Chennai","Kolkata","Pune","Gurgaon","Noida","Ahmedabad","Jaipur","Lucknow"],nd={Gurgaon:["Sector 15","Sector 22","Phase 2","DLF City","Cyber City","Golf Course Road"],Delhi:["Connaught Place","Karol Bagh","Lajpat Nagar","Saket","Dwarka","Rohini"],Mumbai:["Bandra","Andheri","Powai","Thane","Navi Mumbai","Borivali"]},sd=[{id:"tuition",name:"Academic Tuitions",icon:"📚"},{id:"music",name:"Music Classes",icon:"🎵"},{id:"dance",name:"Dance Classes",icon:"💃"},{id:"sports",name:"Sports Training",icon:"⚽"},{id:"coding",name:"Coding / STEM",icon:"💻"},{id:"art",name:"Art & Craft",icon:"🎨"},{id:"daycare",name:"Daycare / After-school",icon:"🏠"},{id:"camps",name:"Summer Camps",icon:"🏕️"}],Mw=["3-5 years","6-8 years","9-12 years","13-16 years","16+ years"],Uw=["Morning (6-12 PM)","Afternoon (12-6 PM)","Evening (6-10 PM)","Flexible"];function Fw(){var F;const{user:e,supabaseUser:t}=De(),{provider:r,createProvider:n}=hm(),s=Xe(),[i,o]=w.useState(1),[l,c]=w.useState(!1),[u,d]=w.useState("auto"),[h,m]=w.useState(!1),[y,v]=w.useState(""),[x,b]=w.useState(""),[p,g]=w.useState(""),[f,N]=w.useState(""),[k,j]=w.useState({businessName:"",ownerName:((F=t==null?void 0:t.user_metadata)==null?void 0:F.name)||"",phone:"",whatsapp:"",email:(t==null?void 0:t.email)||"",website:""}),[_,C]=w.useState([]),[E,A]=w.useState({type:"offline",ageGroups:[],timings:[],duration:"",feeStructure:{type:"per_session",amount:0}}),q=7;useEffect(()=>{r&&s("/provider/dashboard")},[r,s]);const re=()=>{m(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(T=>{setTimeout(()=>{const I={city:"Gurgaon",area:"Sector 15",pincode:"122001",coordinates:{lat:T.coords.latitude,lng:T.coords.longitude}};v(I.city),b(I.area),g(I.pincode),m(!1),o(2)},2e3)},T=>{m(!1),d("manual"),alert("Unable to detect location. Please select manually.")}):(m(!1),d("manual"),alert("Geolocation is not supported. Please select manually."))},M=()=>{if(!y||!x||!p){alert("Please fill all location fields");return}o(2)},we=()=>{if(!k.businessName||!k.ownerName||!k.phone||!k.email){alert("Please fill all required fields");return}o(3)},Z=()=>{if(_.length===0){alert("Please select at least one service category");return}o(4)},S=()=>{if(!E.duration||E.ageGroups.length===0||E.timings.length===0||E.feeStructure.amount===0){alert("Please fill all class details");return}o(5)},$=async()=>{if(!t){alert("Authentication required");return}c(!0);try{const T={user_id:t.id,business_name:k.businessName,owner_name:k.ownerName,email:k.email,phone:k.phone,whatsapp:k.whatsapp||null,website:k.website||null,description:`Professional ${_.join(", ")} services`,address:`${x}, ${y}`,city:y,area:x,pincode:p,latitude:28.4595,longitude:77.0266,status:"pending"},I=await n(T);await ce.addProviderServices(I.id,_),E.ageGroups.length>0&&await ce.createClass({provider_id:I.id,name:`${_[0]} Classes`,description:`Professional ${_[0]} training`,category:_[0],age_group:E.ageGroups[0],mode:E.type,duration:E.duration,price:E.feeStructure.amount,fee_type:E.feeStructure.type,schedule:E.timings.map(ae=>({timing:ae}))}),alert("Application submitted successfully! We will review and approve your profile within 24-48 hours."),s("/provider/dashboard")}catch(T){console.error("Error submitting application:",T),alert("Failed to submit application. Please try again.")}finally{c(!1)}},L=Dw.filter(T=>T.toLowerCase().includes(f.toLowerCase())),P=()=>{switch(i){case 1:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(_n,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Set Your Location"}),a.jsx("p",{className:"text-gray-600",children:"Where do you provide your services?"})]}),u==="auto"?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h?a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}):a.jsx(Hi,{className:"w-8 h-8 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:h?"Detecting your location...":"Use current location"}),a.jsx("p",{className:"text-gray-600 text-sm mb-6",children:h?"Please wait while we find your location":"Allow location access for quick setup"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(D,{onClick:re,disabled:h,className:"w-full",size:"lg",children:h?"Detecting...":"Detect Automatically"}),a.jsx(D,{onClick:()=>d("manual"),variant:"outline",className:"w-full",size:"lg",disabled:h,children:"Enter Manually"})]})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search City"}),a.jsxs("div",{className:"relative",children:[a.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",value:f,onChange:T=>N(T.target.value),placeholder:"Type city name...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select City"}),a.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-40 overflow-y-auto",children:L.map(T=>a.jsx("button",{type:"button",onClick:()=>{v(T),b("")},className:`p-3 text-sm border rounded-lg transition-all ${y===T?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:T},T))})]}),y&&nd[y]&&a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Select Area in ",y]}),a.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-40 overflow-y-auto",children:nd[y].map(T=>a.jsx("button",{type:"button",onClick:()=>b(T),className:`p-3 text-sm border rounded-lg transition-all text-left ${x===T?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:T},T))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pin Code"}),a.jsx("input",{type:"text",value:p,onChange:T=>g(T.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit pin code",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:6})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(D,{onClick:()=>d("auto"),variant:"outline",className:"flex-1",children:"Back"}),a.jsx(D,{onClick:M,disabled:!y||!x||!p,className:"flex-1",children:"Continue"})]})]})]});case 2:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(ir,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Business Information"}),a.jsx("p",{className:"text-gray-600",children:"Tell us about your educational services"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business/Provider Name *"}),a.jsx("input",{type:"text",value:k.businessName,onChange:T=>j(I=>({...I,businessName:T.target.value})),placeholder:"e.g., Harmony Music Academy",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Name *"}),a.jsx("input",{type:"text",value:k.ownerName,onChange:T=>j(I=>({...I,ownerName:T.target.value})),placeholder:"Your full name",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),a.jsx("input",{type:"tel",value:k.phone,onChange:T=>j(I=>({...I,phone:T.target.value})),placeholder:"Your contact number",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp Number (Optional)"}),a.jsx("input",{type:"tel",value:k.whatsapp,onChange:T=>j(I=>({...I,whatsapp:T.target.value})),placeholder:"WhatsApp number for enquiries",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),a.jsx("input",{type:"email",value:k.email,onChange:T=>j(I=>({...I,email:T.target.value})),placeholder:"Your email address",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website/Social Link (Optional)"}),a.jsx("input",{type:"url",value:k.website,onChange:T=>j(I=>({...I,website:T.target.value})),placeholder:"https://your-website.com",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(D,{onClick:()=>o(1),variant:"outline",className:"flex-1",children:[a.jsx(jt,{className:"w-4 h-4 mr-2"}),"Back"]}),a.jsxs(D,{onClick:we,className:"flex-1",children:["Continue",a.jsx(at,{className:"w-4 h-4 ml-2"})]})]})]});case 3:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(Yn,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select Services"}),a.jsx("p",{className:"text-gray-600",children:"What educational services do you provide?"})]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:sd.map(T=>a.jsxs("button",{type:"button",onClick:()=>{C(I=>I.includes(T.id)?I.filter(ae=>ae!==T.id):[...I,T.id])},className:`p-4 border-2 rounded-xl transition-all text-left ${_.includes(T.id)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("div",{className:"text-2xl mb-2",children:T.icon}),a.jsx("div",{className:"font-medium text-sm",children:T.name})]},T.id))}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(D,{onClick:()=>o(2),variant:"outline",className:"flex-1",children:[a.jsx(jt,{className:"w-4 h-4 mr-2"}),"Back"]}),a.jsxs(D,{onClick:Z,disabled:_.length===0,className:"flex-1",children:["Continue",a.jsx(at,{className:"w-4 h-4 ml-2"})]})]})]});case 4:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(on,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Class Details"}),a.jsx("p",{className:"text-gray-600",children:"Provide details about your classes"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Class Type *"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["online","offline","hybrid"].map(T=>a.jsx("button",{type:"button",onClick:()=>A(I=>({...I,type:T})),className:`p-3 border-2 rounded-lg transition-all ${E.type===T?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:a.jsx("div",{className:"font-medium capitalize",children:T})},T))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Age Groups Served *"}),a.jsx("div",{className:"space-y-2",children:Mw.map(T=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:E.ageGroups.includes(T),onChange:I=>{I.target.checked?A(ae=>({...ae,ageGroups:[...ae.ageGroups,T]})):A(ae=>({...ae,ageGroups:ae.ageGroups.filter(Ze=>Ze!==T)}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:T})]},T))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Available Timings *"}),a.jsx("div",{className:"space-y-2",children:Uw.map(T=>a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:E.timings.includes(T),onChange:I=>{I.target.checked?A(ae=>({...ae,timings:[...ae.timings,T]})):A(ae=>({...ae,timings:ae.timings.filter(Ze=>Ze!==T)}))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("span",{className:"ml-2 text-sm text-gray-700",children:T})]},T))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class Duration *"}),a.jsx("input",{type:"text",value:E.duration,onChange:T=>A(I=>({...I,duration:T.target.value})),placeholder:"e.g., 45 minutes, 1 hour",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Fee Structure *"}),a.jsx("div",{className:"grid grid-cols-2 gap-3 mb-3",children:["per_session","monthly"].map(T=>a.jsx("button",{type:"button",onClick:()=>A(I=>({...I,feeStructure:{...I.feeStructure,type:T}})),className:`p-3 border-2 rounded-lg transition-all ${E.feeStructure.type===T?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:a.jsx("div",{className:"font-medium",children:T==="per_session"?"Per Session":"Monthly"})},T))}),a.jsx("input",{type:"number",value:E.feeStructure.amount,onChange:T=>A(I=>({...I,feeStructure:{...I.feeStructure,amount:parseInt(T.target.value)||0}})),placeholder:"Enter amount in ₹",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(D,{onClick:()=>o(3),variant:"outline",className:"flex-1",children:[a.jsx(jt,{className:"w-4 h-4 mr-2"}),"Back"]}),a.jsxs(D,{onClick:S,className:"flex-1",children:["Continue",a.jsx(at,{className:"w-4 h-4 ml-2"})]})]})]});case 5:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(ei,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Upload Media"}),a.jsx("p",{className:"text-gray-600",children:"Add photos to showcase your services"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Profile Picture/Logo"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[a.jsx(ei,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload profile image"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: Square image, max 2MB"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Cover Image"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[a.jsx(ei,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Click to upload cover image"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: 16:9 ratio, max 5MB"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Gallery (Optional)"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[a.jsx(ei,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload photos of your classes/setup"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Multiple images allowed, max 2MB each"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video URL (Optional)"}),a.jsx("input",{type:"url",placeholder:"YouTube or Instagram reel URL",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(D,{onClick:()=>o(4),variant:"outline",className:"flex-1",children:[a.jsx(jt,{className:"w-4 h-4 mr-2"}),"Back"]}),a.jsxs(D,{onClick:()=>o(6),className:"flex-1",children:["Continue",a.jsx(at,{className:"w-4 h-4 ml-2"})]})]})]});case 6:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx($n,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Documents & Verification"}),a.jsx("p",{className:"text-gray-600",children:"Upload documents for verification"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"PAN Card *"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[a.jsx($n,{className:"w-6 h-6 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload PAN card image"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Aadhaar Card *"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[a.jsx($n,{className:"w-6 h-6 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload Aadhaar card image"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Business Registration (Optional)"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[a.jsx($n,{className:"w-6 h-6 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload business registration certificate"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"For verified business tag"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Qualification Certificates (Optional)"}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[a.jsx($n,{className:"w-6 h-6 text-gray-400 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Upload teaching/professional certificates"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Multiple files allowed"})]})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("input",{type:"checkbox",id:"terms",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mt-1"}),a.jsxs("label",{htmlFor:"terms",className:"ml-3 text-sm text-blue-900",children:["I agree to the ",a.jsx("a",{href:"#",className:"underline",children:"Terms & Conditions"})," and ",a.jsx("a",{href:"#",className:"underline",children:"Privacy Policy"}),". I confirm that all information provided is accurate and I have the right to offer these educational services."]})]})})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(D,{onClick:()=>o(5),variant:"outline",className:"flex-1",children:[a.jsx(jt,{className:"w-4 h-4 mr-2"}),"Back"]}),a.jsxs(D,{onClick:()=>o(7),className:"flex-1",children:["Continue",a.jsx(at,{className:"w-4 h-4 ml-2"})]})]})]});case 7:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(Et,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review & Submit"}),a.jsx("p",{className:"text-gray-600",children:"Please review your information before submitting"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs(V,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Location"}),a.jsxs("p",{className:"text-sm text-gray-600",children:[x,", ",y," - ",p]})]}),a.jsxs(V,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Business Information"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Business:"})," ",k.businessName]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Owner:"})," ",k.ownerName]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Phone:"})," ",k.phone]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," ",k.email]})]})]}),a.jsxs(V,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Services"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(T=>{const I=sd.find(ae=>ae.id===T);return a.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:[I==null?void 0:I.icon," ",I==null?void 0:I.name]},T)})})]}),a.jsxs(V,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Class Details"}),a.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Type:"})," ",E.type]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Duration:"})," ",E.duration]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Fee:"})," ₹",E.feeStructure.amount," ",E.feeStructure.type==="per_session"?"per session":"monthly"]})]})]})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx("div",{className:"text-yellow-600 mr-3",children:"⏳"}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-yellow-900 mb-1",children:"What happens next?"}),a.jsx("p",{className:"text-sm text-yellow-800",children:"Our team will review your application within 24-48 hours. You'll receive an email notification once approved. After approval, your profile will be visible to parents in your area."})]})]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs(D,{onClick:()=>o(6),variant:"outline",className:"flex-1",children:[a.jsx(jt,{className:"w-4 h-4 mr-2"}),"Back"]}),a.jsxs(D,{onClick:$,disabled:l,className:"flex-1",children:[l?"Submitting...":"Submit Application",!l&&a.jsx(Et,{className:"w-4 h-4 ml-2"})]})]})]});default:return null}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsxs("div",{className:"px-4 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"Provider Onboarding"}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Step ",i," of ",q]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${i/q*100}%`}})})]})}),a.jsx("div",{className:"px-4 py-6",children:a.jsx(V,{className:"p-6 max-w-2xl mx-auto",children:P()})})]})}const zw=[{id:"tuition",name:"Academic Tuitions",icon:"📚"},{id:"music",name:"Music Classes",icon:"🎵"},{id:"dance",name:"Dance Classes",icon:"💃"},{id:"sports",name:"Sports Training",icon:"⚽"},{id:"coding",name:"Coding / STEM",icon:"💻"},{id:"art",name:"Art & Craft",icon:"🎨"},{id:"daycare",name:"Daycare / After-school",icon:"🏠"},{id:"camps",name:"Summer Camps",icon:"🏕️"}],Bw=["3-5 years","6-8 years","9-12 years","13-16 years","16+ years"];function Ww(){const{user:e,logoutWithConfirmation:t}=De(),{provider:r,loading:n,updateProvider:s}=hm(),{classes:i,loading:o,createClass:l,updateClass:c,deleteClass:u}=Iw(r==null?void 0:r.id),{showSuccess:d,showError:h}=It(),[m,y]=w.useState("dashboard"),[v,x]=w.useState(!1),[b,p]=w.useState(!1),[g,f]=w.useState(null),[N,k]=w.useState(!1),[j,_]=w.useState({business_name:"",owner_name:"",phone:"",email:"",whatsapp:"",website:"",description:"",address:"",city:"",area:"",pincode:""}),[C,E]=w.useState({name:"",category:"",description:"",age_group:"",mode:"offline",duration:"",price:0,fee_type:"per_session",schedule:"",is_active:!0});w.useEffect(()=>{r&&_({business_name:r.business_name||"",owner_name:r.owner_name||"",phone:r.phone||"",email:r.email||"",whatsapp:r.whatsapp||"",website:r.website||"",description:r.description||"",address:r.address||"",city:r.city||"",area:r.area||"",pincode:r.pincode||""})},[r]);const A=async S=>{if(S.preventDefault(),!!r){k(!0);try{await s(j),x(!1),d("Profile Updated","Your profile has been updated successfully")}catch{h("Update Failed","Failed to update profile. Please try again.")}finally{k(!1)}}},q=async S=>{if(S.preventDefault(),!!r){k(!0);try{const $={...C,provider_id:r.id,schedule:C.schedule?{timing:C.schedule}:null};g?(await c(g.id,$),d("Course Updated","Course has been updated successfully")):(await l($),d("Course Added","New course has been added successfully")),p(!1),f(null),we()}catch{h("Operation Failed","Failed to save course. Please try again.")}finally{k(!1)}}},re=S=>{var $;E({name:S.name||"",category:S.category||"",description:S.description||"",age_group:S.age_group||"",mode:S.mode||"offline",duration:S.duration||"",price:S.price||0,fee_type:S.fee_type||"per_session",schedule:(($=S.schedule)==null?void 0:$.timing)||"",is_active:S.is_active!==!1}),f(S),p(!0)},M=async S=>{if(confirm("Are you sure you want to delete this course?"))try{await u(S),d("Course Deleted","Course has been deleted successfully")}catch{h("Delete Failed","Failed to delete course. Please try again.")}},we=()=>{E({name:"",category:"",description:"",age_group:"",mode:"offline",duration:"",price:0,fee_type:"per_session",schedule:"",is_active:!0})},Z=[{label:"Total Courses",value:(i==null?void 0:i.length)||0,icon:Yn,color:"text-blue-600"},{label:"Active Courses",value:(i==null?void 0:i.filter(S=>S.is_active).length)||0,icon:Et,color:"text-green-600"},{label:"Profile Status",value:(r==null?void 0:r.status)||"Pending",icon:yc,color:"text-yellow-600"},{label:"Published",value:r!=null&&r.is_published?"Yes":"No",icon:fc,color:"text-purple-600"}];return n?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):r?a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex justify-between items-center py-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Provider Dashboard"}),a.jsxs("p",{className:"text-gray-600",children:["Welcome back, ",r.owner_name,"!"]})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsxs(D,{onClick:t,variant:"outline",className:"flex items-center gap-2",children:[a.jsx(gc,{className:"w-4 h-4"}),"Logout"]})})]}),a.jsx("div",{className:"flex space-x-8 border-b",children:[{id:"dashboard",label:"Dashboard",icon:ww},{id:"profile",label:"Profile",icon:ir},{id:"courses",label:"Courses",icon:Yn}].map(S=>a.jsxs("button",{onClick:()=>y(S.id),className:`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${m===S.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(S.icon,{className:"w-4 h-4"}),a.jsx("span",{children:S.label})]},S.id))})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m==="dashboard"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:Z.map((S,$)=>a.jsx(V,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:S.label}),a.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:S.value})]}),a.jsx("div",{className:`p-3 rounded-full bg-gray-100 ${S.color}`,children:a.jsx(S.icon,{className:"w-6 h-6"})})]})},$))}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs(V,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs(D,{onClick:()=>y("courses"),className:"w-full justify-start",children:[a.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Add New Course"]}),a.jsxs(D,{onClick:()=>y("profile"),variant:"outline",className:"w-full justify-start",children:[a.jsx(gi,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]})]}),a.jsxs(V,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Recent Activity"}),a.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[a.jsx("p",{children:"• Profile created"}),a.jsxs("p",{children:["• ",(i==null?void 0:i.length)||0," courses added"]}),a.jsxs("p",{children:["• Status: ",r.status]})]})]})]})]}),m==="profile"&&a.jsxs("div",{className:"max-w-2xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Profile Information"}),a.jsx(D,{onClick:()=>x(!v),variant:v?"outline":"primary",children:v?a.jsxs(a.Fragment,{children:[a.jsx(qi,{className:"w-4 h-4 mr-2"}),"Cancel"]}):a.jsxs(a.Fragment,{children:[a.jsx(gi,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]}),v?a.jsx(V,{className:"p-6",children:a.jsxs("form",{onSubmit:A,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),a.jsx("input",{type:"text",value:j.business_name,onChange:S=>_($=>({...$,business_name:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Name"}),a.jsx("input",{type:"text",value:j.owner_name,onChange:S=>_($=>({...$,owner_name:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),a.jsx("input",{type:"tel",value:j.phone,onChange:S=>_($=>({...$,phone:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:j.email,onChange:S=>_($=>({...$,email:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp"}),a.jsx("input",{type:"tel",value:j.whatsapp,onChange:S=>_($=>({...$,whatsapp:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),a.jsx("input",{type:"url",value:j.website,onChange:S=>_($=>({...$,website:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),a.jsx("input",{type:"text",value:j.city,onChange:S=>_($=>({...$,city:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area"}),a.jsx("input",{type:"text",value:j.area,onChange:S=>_($=>({...$,area:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pincode"}),a.jsx("input",{type:"text",value:j.pincode,onChange:S=>_($=>({...$,pincode:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{value:j.description,onChange:S=>_($=>({...$,description:S.target.value})),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(D,{type:"button",variant:"outline",onClick:()=>x(!1),className:"flex-1",children:"Cancel"}),a.jsxs(D,{type:"submit",disabled:N,className:"flex-1",children:[a.jsx(il,{className:"w-4 h-4 mr-2"}),N?"Saving...":"Save Changes"]})]})]})}):a.jsx(V,{className:"p-6",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Business Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.business_name})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Owner Name"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.owner_name})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Phone"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.phone})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Email"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.email})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Location"}),a.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[r.area,", ",r.city]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Status"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900 capitalize",children:r.status})]})]}),r.description&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Description"}),a.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.description})]})]})})]}),m==="courses"&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Manage Courses"}),a.jsxs(D,{onClick:()=>{we(),f(null),p(!0)},children:[a.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Add New Course"]})]}),b&&a.jsxs(V,{className:"p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:g?"Edit Course":"Add New Course"}),a.jsx(D,{variant:"outline",onClick:()=>{p(!1),f(null)},children:a.jsx(qi,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:q,className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Course Name *"}),a.jsx("input",{type:"text",value:C.name,onChange:S=>E($=>({...$,name:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),a.jsxs("select",{value:C.category,onChange:S=>E($=>({...$,category:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),zw.map(S=>a.jsx("option",{value:S.id,children:S.name},S.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age Group *"}),a.jsxs("select",{value:C.age_group,onChange:S=>E($=>({...$,age_group:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select Age Group"}),Bw.map(S=>a.jsx("option",{value:S,children:S},S))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode *"}),a.jsxs("select",{value:C.mode,onChange:S=>E($=>({...$,mode:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"offline",children:"Offline"}),a.jsx("option",{value:"online",children:"Online"}),a.jsx("option",{value:"hybrid",children:"Hybrid"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration *"}),a.jsx("input",{type:"text",value:C.duration,onChange:S=>E($=>({...$,duration:S.target.value})),placeholder:"e.g., 1 hour, 45 minutes",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fee *"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"number",value:C.price,onChange:S=>E($=>({...$,price:parseInt(S.target.value)||0})),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),a.jsxs("select",{value:C.fee_type,onChange:S=>E($=>({...$,fee_type:S.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"per_session",children:"Per Session"}),a.jsx("option",{value:"monthly",children:"Monthly"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule"}),a.jsx("input",{type:"text",value:C.schedule,onChange:S=>E($=>({...$,schedule:S.target.value})),placeholder:"e.g., Mon-Wed-Fri 4-5 PM",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",id:"is_active",checked:C.is_active,onChange:S=>E($=>({...$,is_active:S.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),a.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm text-gray-700",children:"Active (visible to parents)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{value:C.description,onChange:S=>E($=>({...$,description:S.target.value})),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(D,{type:"button",variant:"outline",onClick:()=>{p(!1),f(null)},className:"flex-1",children:"Cancel"}),a.jsxs(D,{type:"submit",disabled:N,className:"flex-1",children:[a.jsx(il,{className:"w-4 h-4 mr-2"}),N?"Saving...":g?"Update Course":"Add Course"]})]})]})]}),o?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading courses..."})]}):i&&i.length>0?a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:i.map(S=>{var $;return a.jsxs(V,{className:"p-6",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:S.name}),a.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:S.category}),a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full",children:S.age_group}),a.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:S.is_active?"Active":"Inactive"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:S.description}),a.jsxs("div",{className:"text-sm text-gray-500 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Mode:"})," ",S.mode]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Duration:"})," ",S.duration]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Fee:"})," ₹",S.price," ",S.fee_type==="per_session"?"per session":"monthly"]}),(($=S.schedule)==null?void 0:$.timing)&&a.jsxs("p",{children:[a.jsx("strong",{children:"Schedule:"})," ",S.schedule.timing]})]})]})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(D,{onClick:()=>re(S),variant:"outline",size:"sm",className:"flex-1",children:[a.jsx(gi,{className:"w-4 h-4 mr-1"}),"Edit"]}),a.jsxs(D,{onClick:()=>M(S.id),variant:"outline",size:"sm",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",children:[a.jsx(um,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]},S.id)})}):a.jsxs(V,{className:"p-12 text-center",children:[a.jsx(Yn,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No courses yet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Start by adding your first course to attract students"}),a.jsxs(D,{onClick:()=>{we(),f(null),p(!0)},children:[a.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Add Your First Course"]})]})]})]})]}):a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Provider Profile Not Found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please complete your onboarding process."}),a.jsx(D,{to:"/provider/setup",children:"Complete Profile Setup"})]})})}const Hw=["Delhi","Mumbai","Bangalore","Hyderabad","Chennai","Kolkata","Pune","Gurgaon","Noida","Ahmedabad","Jaipur","Lucknow"],id={Gurgaon:["Sector 15","Sector 22","Phase 2","DLF City","Cyber City","Golf Course Road"],Delhi:["Connaught Place","Karol Bagh","Lajpat Nagar","Saket","Dwarka","Rohini"],Mumbai:["Bandra","Andheri","Powai","Thane","Navi Mumbai","Borivali"],Bangalore:["Koramangala","Indiranagar","Whitefield","Electronic City","HSR Layout","Marathahalli"],Hyderabad:["Hitech City","Banjara Hills","Jubilee Hills","Kondapur","Gachibowli","Secunderabad"],Chennai:["T Nagar","Anna Nagar","Velachery","Adyar","Tambaram","OMR"]};function qw(){const{user:e,supabaseUser:t}=De(),r=Xe(),{showSuccess:n,showError:s}=It(),[i,o]=w.useState(!1),[l,c]=w.useState(!1),[u,d]=w.useState({phone:"",address:"",city:"",area:"",pincode:"",latitude:null,longitude:null,bio:""});w.useEffect(()=>{if(!e||e.role!=="provider"){r("/provider/login");return}h()},[e,r]);const h=async()=>{if(t!=null&&t.id)try{await ce.getProviderByUserId(t.id)&&r("/provider/dashboard")}catch{console.log("No existing provider found, continuing with onboarding")}},m=async()=>{c(!0);try{if(!navigator.geolocation)throw new Error("Geolocation is not supported by this browser");const v=await new Promise((p,g)=>{navigator.geolocation.getCurrentPosition(p,g,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:x,longitude:b}=v.coords;d(p=>({...p,city:"Gurgaon",area:"Sector 15",pincode:"122001",latitude:x,longitude:b})),n("Location Detected","Location detected successfully!")}catch(v){console.error("Error detecting location:",v),s("Location Error","Could not detect location. Please enter manually.")}finally{c(!1)}},y=async v=>{if(v.preventDefault(),!u.phone||!u.city||!u.area||!u.pincode){s("Missing Information","Please fill all required fields");return}if(!t){s("Authentication Error","User not authenticated");return}o(!0);try{const x={user_id:t.id,business_name:`${(e==null?void 0:e.name)||"Provider"}'s Classes`,owner_name:(e==null?void 0:e.name)||"Provider",email:t.email||"",phone:u.phone,description:u.bio||"Professional education services",address:`${u.area}, ${u.city}`,city:u.city,area:u.area,pincode:u.pincode,latitude:u.latitude||28.4595,longitude:u.longitude||77.0266,status:"pending"};await ce.createProvider(x),n("Profile Created","Your provider profile has been created successfully!"),r("/provider/dashboard")}catch(x){console.error("Error creating provider:",x),s("Profile Creation Failed","Failed to create provider profile. Please try again.")}finally{o(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-2xl w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl mb-4",children:a.jsx(ir,{className:"w-8 h-8 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Complete Your Profile"}),a.jsx("p",{className:"text-gray-600",children:"Set up your provider profile to start offering classes"})]}),a.jsx(V,{className:"p-8",children:a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),a.jsxs("div",{className:"relative",children:[a.jsx(sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"tel",value:u.phone,onChange:v=>d(x=>({...x,phone:v.target.value})),placeholder:"Enter your phone number",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]})})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Location Information"}),a.jsx("div",{className:"mb-4",children:a.jsx(D,{type:"button",onClick:m,disabled:l,variant:"outline",className:"w-full",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Detecting Location..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Auto-Detect Location"]})})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),a.jsxs("select",{value:u.city,onChange:v=>{d(x=>({...x,city:v.target.value,area:""}))},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select City"}),Hw.map(v=>a.jsx("option",{value:v,children:v},v))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area *"}),u.city&&id[u.city]?a.jsxs("select",{value:u.area,onChange:v=>d(x=>({...x,area:v.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select Area"}),id[u.city].map(v=>a.jsx("option",{value:v,children:v},v))]}):a.jsx("input",{type:"text",value:u.area,onChange:v=>d(x=>({...x,area:v.target.value})),placeholder:u.city?`Enter area in ${u.city}`:"Select city first",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:!u.city})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pin Code *"}),a.jsx("input",{type:"text",value:u.pincode,onChange:v=>d(x=>({...x,pincode:v.target.value.replace(/\D/g,"").slice(0,6)})),placeholder:"Enter 6-digit pin code",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:6,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Address"}),a.jsx("input",{type:"text",value:u.address,onChange:v=>d(x=>({...x,address:v.target.value})),placeholder:"Enter your full address",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"About You"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Short Bio"}),a.jsx("textarea",{value:u.bio,onChange:v=>d(x=>({...x,bio:v.target.value})),rows:4,placeholder:"Tell parents about your teaching experience and expertise...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),u.latitude&&u.longitude&&a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(_n,{className:"w-5 h-5 text-green-600 mr-2"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-green-900",children:"Location Coordinates"}),a.jsxs("p",{className:"text-sm text-green-700",children:["Lat: ",u.latitude.toFixed(6),", Lng: ",u.longitude.toFixed(6)]})]})]})}),a.jsxs(D,{type:"submit",disabled:i,className:"w-full group",size:"lg",children:[a.jsx("span",{children:i?"Creating Profile...":"Complete Profile Setup"}),!i&&a.jsx(at,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})})]})})}function Vw(){const[e,t]=w.useState("udayashok1997@gmail.com"),[r,n]=w.useState(null),[s,i]=w.useState(!1),o=async()=>{var l;i(!0),n(null);try{console.log("🔍 Checking user status for:",e);const c="https://djlhlnnfbwuvzugxbfcj.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRqbGhsbm5mYnd1dnp1Z3hiZmNqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMyNzUyMDYsImV4cCI6MjA2ODg1MTIwNn0.v9u3HjnDBlIQXmxRpUhU9YNRBTHhMc3u-sMhhMHVw-0",d={supabaseConfigured:!!(c&&u),supabaseUrl:c?"Configured":"Missing",supabaseKey:u?"Configured":"Missing",timestamp:new Date().toISOString()};if(console.log("🔧 Supabase Configuration:",d),!U){n({error:"Supabase not configured properly",debugInfo:d});return}console.log("📋 Checking current session...");const{data:h,error:m}=await U.auth.getSession();console.log("📋 Session result:",{sessionData:h,sessionError:m}),console.log("👤 Checking auth users...");const{data:y,error:v}=await U.auth.getUser();console.log("👤 User result:",{userData:y,userError:v}),console.log("🏢 Checking providers table...");let x=null,b=null;try{const{data:k,error:j}=await U.from("providers").select("*").eq("email",e);x=k,b=j}catch(k){b=k}console.log("🏢 Provider result:",{providerData:x,providerError:b}),console.log("🔗 Testing database connectivity...");let p=null,g=null;try{const{data:k,error:j}=await U.from("providers").select("count").limit(1);p=k,g=j}catch(k){g=k}console.log("🔗 Connectivity result:",{connectivityTest:p,connectivityError:g}),console.log("🔐 Testing login credentials...");let f=null,N=null;try{const{data:k,error:j}=await U.auth.signInWithPassword({email:e,password:"070597"});f=k,N=j,k.user&&!j&&(console.log("✅ Login test successful, signing out..."),await U.auth.signOut())}catch(k){N=k}console.log("🔐 Login test result:",{loginTest:f,loginError:N}),n({debugInfo:d,session:{data:h,error:m},user:{data:y,error:v},provider:{data:x,error:b},connectivity:{data:p,error:g},loginTest:{success:!!(f!=null&&f.user&&!N),user:f!=null&&f.user?{id:f.user.id,email:f.user.email,emailConfirmed:f.user.email_confirmed_at,role:(l=f.user.user_metadata)==null?void 0:l.role,createdAt:f.user.created_at}:null,error:N}})}catch(c){console.error("❌ Debug check failed:",c),n({error:c.message,debugInfo:{supabaseConfigured:!1,error:c.message}})}finally{i(!1)}};return a.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs(V,{className:"p-6 mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Debug User Login"}),a.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[a.jsx("input",{type:"email",value:e,onChange:l=>t(l.target.value),placeholder:"Enter email to check",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx(D,{onClick:o,disabled:s,children:s?"Checking...":"Check Status"})]}),r&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Configuration Status:"}),a.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(r.debugInfo,null,2)})]}),r.loginTest&&a.jsxs("div",{className:`p-4 rounded-lg ${r.loginTest.success?"bg-green-100":"bg-red-100"}`,children:[a.jsxs("h3",{className:"font-semibold mb-2",children:["Login Test: ",r.loginTest.success?"✅ SUCCESS":"❌ FAILED"]}),a.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(r.loginTest,null,2)})]}),r.provider&&a.jsxs("div",{className:"bg-blue-100 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Provider Data:"}),a.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(r.provider,null,2)})]}),r.connectivity&&a.jsxs("div",{className:"bg-yellow-100 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Database Connectivity:"}),a.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(r.connectivity,null,2)})]}),r.error&&a.jsxs("div",{className:"bg-red-100 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Error:"}),a.jsx("p",{className:"text-red-800",children:r.error})]})]})]}),a.jsxs(V,{className:"p-6",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Instructions:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-gray-700",children:[a.jsx("li",{children:'Click "Check Status" to test your credentials'}),a.jsx("li",{children:"Check the console (F12) for detailed logs"}),a.jsx("li",{children:"The results will show if your account exists and why login might be failing"}),a.jsx("li",{children:'Look for the "Login Test" section to see if credentials are valid'})]})]})]})})}function Gw(){const[e,t]=w.useState("admin"),[r,n]=w.useState("admin123"),[s,i]=w.useState(!1),o=Xe(),l=async c=>{if(c.preventDefault(),!e.trim()||!r.trim()){alert("Please fill all fields");return}i(!0),e==="admin"&&r==="admin123"?(localStorage.setItem("adminAuth","true"),localStorage.setItem("adminUser",JSON.stringify({id:"admin-1",username:"admin",role:"admin",name:"System Administrator"})),o("/admin/dashboard")):(alert("Invalid credentials. Use admin/admin123"),i(!1))};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-red-600 to-orange-600 rounded-3xl mb-6",children:a.jsx(pw,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Admin Portal"}),a.jsx("p",{className:"text-gray-400",children:"BrightRoots Management System"})]}),a.jsxs(V,{className:"p-8 bg-gray-800 border-gray-700",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Administrator Login"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Demo credentials: admin / admin123"})]}),a.jsxs("form",{onSubmit:l,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Username"}),a.jsxs("div",{className:"relative",children:[a.jsx(ir,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:e,onChange:c=>t(c.target.value),placeholder:"Enter username",className:"w-full pl-10 pr-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all text-white placeholder-gray-400",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"password",value:r,onChange:c=>n(c.target.value),placeholder:"Enter password",className:"w-full pl-10 pr-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent transition-all text-white placeholder-gray-400",required:!0})]})]}),a.jsxs(D,{type:"submit",size:"lg",className:"w-full group bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700",disabled:s,children:[a.jsx("span",{children:s?"Logging in...":"Login to Admin Panel"}),!s&&a.jsx(at,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:a.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Demo Credentials:"}),a.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Username:"})," admin"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Password:"})," admin123"]})]})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx(D,{to:"/",variant:"outline",className:"text-gray-400 border-gray-600 hover:text-white hover:border-gray-500",children:"Back to Main App"})})]})})}function Kw(){const e=Xe(),{showSuccess:t,showError:r}=It(),[n,s]=w.useState([]),[i,o]=w.useState(""),[l,c]=w.useState("all"),[u,d]=w.useState(!0),h=[{user_id:null,business_name:"Happy Minds Tuition Center",owner_name:"Rajesh Kumar",email:"happyminds@example.com",phone:"9876543210",whatsapp:"9876543210",description:"Expert tutors for Math, Science, and English",address:"MG Road, Bangalore",city:"Bangalore",area:"MG Road",pincode:"560001",latitude:12.9716,longitude:77.5946,status:"approved",is_published:!0},{user_id:null,business_name:"Tiny Talents Art School",owner_name:"Priya Sharma",email:"tinytalents@example.com",phone:"9999888877",whatsapp:"9999888877",description:"Painting, Craft & Sketching for kids",address:"Koramangala, Bangalore",city:"Bangalore",area:"Koramangala",pincode:"560034",latitude:12.976,longitude:77.58,status:"approved",is_published:!0},{user_id:null,business_name:"KickStart Football Club",owner_name:"Amit Singh",email:"kickstartfc@example.com",phone:"9900112233",whatsapp:"9900112233",description:"Football coaching by certified trainers",address:"Whitefield, Bangalore",city:"Bangalore",area:"Whitefield",pincode:"560066",latitude:12.9702,longitude:77.595,status:"approved",is_published:!0}];w.useEffect(()=>{if(!localStorage.getItem("adminAuth")){e("/admin/login");return}m(),y()},[e]);const m=async()=>{try{d(!0),console.log("🔄 Loading providers from Supabase...");const{data:j,error:_}=await U.from("providers").select(`
          *,
          provider_services(category)
        `).order("created_at",{ascending:!1});if(_){console.error("❌ Error loading providers:",_);return}const C=j.map(E=>{var A;return{id:E.id,businessName:E.business_name,ownerName:E.owner_name,email:E.email,phone:E.phone,city:E.city,area:E.area,categories:((A=E.provider_services)==null?void 0:A.map(q=>q.category))||[],status:E.status,createdAt:E.created_at.split("T")[0],isPublished:E.is_published}});console.log("✅ Loaded providers:",C),s(C)}catch(j){console.error("❌ Error in loadProviders:",j)}finally{d(!1)}},y=async()=>{try{const{data:j,error:_}=await U.from("providers").select("id").limit(1);if(_){console.error("❌ Error checking existing providers:",_);return}if(j&&j.length>0){console.log("✅ Sample data already exists, skipping insertion");return}console.log("🔄 Inserting sample providers data...");for(const C of h){const E=await ce.createProvider(C);let A=[];C.business_name.includes("Tuition")?A=["tuition"]:C.business_name.includes("Art")?A=["art"]:C.business_name.includes("Football")&&(A=["sports"]),A.length>0&&(await ce.addProviderServices(E.id,A),A.includes("tuition")?await ce.createClass({provider_id:E.id,name:"Mathematics Classes",description:"Expert tutoring for Math, Science, and English",category:"tuition",age_group:"6-14 years",mode:"offline",duration:"2 hours",price:2e3,fee_type:"monthly",schedule:{timing:"Mon-Fri 5PM-7PM"}}):A.includes("art")?await ce.createClass({provider_id:E.id,name:"Art & Craft Classes",description:"Painting, Craft & Sketching for kids",category:"art",age_group:"4-10 years",mode:"offline",duration:"2 hours",price:1500,fee_type:"monthly",schedule:{timing:"Sat-Sun 10AM-12PM"}}):A.includes("sports")&&await ce.createClass({provider_id:E.id,name:"Football Training",description:"Football coaching by certified trainers",category:"sports",age_group:"8-16 years",mode:"offline",duration:"2 hours",price:2500,fee_type:"monthly",schedule:{timing:"Mon-Wed-Fri 6AM-8AM"}}))}console.log("✅ Sample providers data inserted successfully"),await m()}catch(j){console.error("❌ Error inserting sample providers:",j)}},v=()=>{window.confirm("Are you sure you want to logout? This will end your current session.")&&(localStorage.removeItem("adminAuth"),localStorage.removeItem("adminUser"),window.location.hash="#/")},x=async(j,_)=>{try{console.log("📢 Updating provider status:",j,"to",_),await ce.updateProvider(j,{status:_,is_published:_==="approved"}),await m(),console.log("✅ Provider status updated successfully")}catch(C){console.error("❌ Error updating provider status:",C),r("Update Failed","Failed to update provider status. Please try again.")}},b=async j=>{try{const{error:_}=await U.from("providers").delete().eq("id",j);if(_)throw _;t("Provider Deleted","Provider has been deleted successfully."),await m()}catch(_){console.error("❌ Error deleting provider:",_),r("Delete Failed","Failed to delete provider. Please try again.")}},p=n.filter(j=>{const _=j.businessName.toLowerCase().includes(i.toLowerCase())||j.ownerName.toLowerCase().includes(i.toLowerCase())||j.email.toLowerCase().includes(i.toLowerCase()),C=l==="all"||j.status===l;return _&&C}),g=j=>({approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"})[j]||"bg-gray-100 text-gray-800",f=j=>({approved:a.jsx(Et,{className:"w-4 h-4"}),rejected:a.jsx(pi,{className:"w-4 h-4"}),pending:a.jsx(on,{className:"w-4 h-4"})})[j]||a.jsx(on,{className:"w-4 h-4"}),N={total:n.length,approved:n.filter(j=>j.status==="approved").length,pending:n.filter(j=>j.status==="pending").length,rejected:n.filter(j=>j.status==="rejected").length},k=({label:j,value:_,color:C,icon:E})=>a.jsx(V,{className:"p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:j}),a.jsx("p",{className:`text-3xl font-bold mt-2 ${C}`,children:_})]}),a.jsx("div",{className:`p-3 rounded-full bg-opacity-20 ${C.replace("text-","bg-").replace("-600","-100")}`,children:a.jsx(E,{className:`w-6 h-6 ${C}`})})]})});return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center py-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),a.jsx("p",{className:"text-gray-600",children:"Manage providers and platform settings"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(D,{onClick:()=>e("/admin/add-provider"),className:"flex items-center gap-2",children:[a.jsx(Zn,{className:"w-4 h-4"}),"Add Provider"]}),a.jsxs(D,{onClick:v,variant:"outline",className:"flex items-center gap-2",children:[a.jsx(gc,{className:"w-4 h-4"}),"Logout"]})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(k,{label:"Total Providers",value:N.total,color:"text-blue-600",icon:ws}),a.jsx(k,{label:"Approved",value:N.approved,color:"text-green-600",icon:Et}),a.jsx(k,{label:"Pending",value:N.pending,color:"text-yellow-600",icon:on}),a.jsx(k,{label:"Rejected",value:N.rejected,color:"text-red-600",icon:pi})]}),a.jsx(V,{className:"p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(Er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search providers...",value:i,onChange:j=>o(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(cm,{className:"w-4 h-4 text-gray-400"}),a.jsxs("select",{value:l,onChange:j=>c(j.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})}),a.jsx(V,{className:"overflow-hidden",children:u?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading providers..."})]}):p.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ws,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No providers found"}),a.jsx("p",{className:"text-gray-500 mb-4",children:i||l!=="all"?"Try adjusting your search or filters":"Get started by adding your first provider"}),a.jsxs(D,{onClick:()=>e("/admin/add-provider"),children:[a.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Add Provider"]})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Provider"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Location"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Categories"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(j=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.businessName}),a.jsx("div",{className:"text-sm text-gray-500",children:j.ownerName})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:j.email}),a.jsx("div",{className:"text-sm text-gray-500",children:j.phone})]}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:j.city}),a.jsx("div",{className:"text-sm text-gray-500",children:j.area})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex flex-wrap gap-1",children:j.categories.map(_=>a.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full",children:_},_))})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${g(j.status)}`,children:[f(j.status),a.jsx("span",{className:"ml-1 capitalize",children:j.status})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[j.status==="pending"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>x(j.id,"approved"),className:"text-green-600 hover:text-green-900",title:"Approve",children:a.jsx(Et,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>x(j.id,"rejected"),className:"text-red-600 hover:text-red-900",title:"Reject",children:a.jsx(pi,{className:"w-4 h-4"})})]}),a.jsx("button",{onClick:()=>e(`/admin/provider/${j.id}`),className:"text-blue-600 hover:text-blue-900",title:"View Details",children:a.jsx(fc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>e(`/admin/edit-provider/${j.id}`),className:"text-gray-600 hover:text-gray-900",title:"Edit",children:a.jsx(gi,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>b(j.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:a.jsx(um,{className:"w-4 h-4"})})]})})]},j.id))})]})})})]})]})}const Jw=["Delhi","Mumbai","Bangalore","Hyderabad","Chennai","Kolkata","Pune","Gurgaon","Noida","Ahmedabad","Jaipur","Lucknow"],ad={Gurgaon:["Sector 15","Sector 22","Phase 2","DLF City","Cyber City","Golf Course Road"],Delhi:["Connaught Place","Karol Bagh","Lajpat Nagar","Saket","Dwarka","Rohini"],Mumbai:["Bandra","Andheri","Powai","Thane","Navi Mumbai","Borivali"],Bangalore:["Koramangala","Indiranagar","Whitefield","Electronic City","HSR Layout","Marathahalli"],Hyderabad:["Hitech City","Banjara Hills","Jubilee Hills","Kondapur","Gachibowli","Secunderabad"],Chennai:["T Nagar","Anna Nagar","Velachery","Adyar","Tambaram","OMR"],Kolkata:["Salt Lake","Park Street","Ballygunge","New Town","Howrah","Rajarhat"],Pune:["Koregaon Park","Hinjewadi","Baner","Wakad","Kothrud","Viman Nagar"],Noida:["Sector 62","Sector 18","Sector 137","Greater Noida","Sector 76","Sector 135"],Ahmedabad:["Satellite","Vastrapur","Bopal","Prahlad Nagar","Maninagar","Navrangpura"],Jaipur:["Malviya Nagar","Vaishali Nagar","C Scheme","Mansarovar","Jagatpura","Tonk Road"],Lucknow:["Gomti Nagar","Hazratganj","Aliganj","Indira Nagar","Mahanagar","Alambagh"]},Qw=[{id:"tuition",name:"Academic Tuitions",icon:"📚"},{id:"music",name:"Music Classes",icon:"🎵"},{id:"dance",name:"Dance Classes",icon:"💃"},{id:"sports",name:"Sports Training",icon:"⚽"},{id:"coding",name:"Coding / STEM",icon:"💻"},{id:"art",name:"Art & Craft",icon:"🎨"},{id:"daycare",name:"Daycare / After-school",icon:"🏠"},{id:"camps",name:"Summer Camps",icon:"🏕️"}];function Yw(){const e=Xe(),{showSuccess:t,showError:r,showInfo:n}=It(),[s,i]=w.useState(!1),[o,l]=w.useState("manual"),[c,u]=w.useState(!1),[d,h]=w.useState({businessName:"",ownerName:"",email:"",phone:"",whatsapp:"",website:"",description:"",city:"",area:"",pincode:"",categories:[],status:"approved"}),m=(b,p)=>{h(g=>({...g,[b]:p}))},y=b=>{h(p=>({...p,categories:p.categories.includes(b)?p.categories.filter(g=>g!==b):[...p.categories,b]}))},v=async()=>{u(!0);try{if(!navigator.geolocation){r("Geolocation Error","Geolocation is not supported by this browser");return}const b=await new Promise((f,N)=>{navigator.geolocation.getCurrentPosition(f,N,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:p,longitude:g}=b.coords;h(f=>({...f,city:"Gurgaon",area:"Sector 15",pincode:"122001"})),t("Location Detected","Location detected successfully! Demo values filled.")}catch(b){console.error("Error detecting location:",b),r("Location Error","Could not detect location. Please enter manually.")}finally{u(!1)}},x=async b=>{if(b.preventDefault(),!d.businessName||!d.ownerName||!d.email||!d.phone||!d.city||!d.area||d.categories.length===0){r("Missing Information","Please fill all required fields and select at least one category");return}i(!0);try{console.log("📝 Creating new provider...",d);const p={user_id:null,business_name:d.businessName,owner_name:d.ownerName,email:d.email,phone:d.phone,whatsapp:d.whatsapp,website:d.website,description:d.description,address:`${d.area}, ${d.city}`,city:d.city,area:d.area,pincode:d.pincode,status:d.status,is_published:d.status==="approved",latitude:28.4595,longitude:77.0266};console.log("📝 Creating provider with data:",p);const g=await ce.createProvider(p);console.log("✅ Provider created:",g),d.categories.length>0&&(console.log("📝 Adding services:",d.categories),await ce.addProviderServices(g.id,d.categories),console.log("✅ Services added:",d.categories));for(const f of d.categories)console.log("📝 Creating class for category:",f),await ce.createClass({provider_id:g.id,name:`${f.charAt(0).toUpperCase()+f.slice(1)} Classes`,description:`Professional ${f} training and education`,category:f,age_group:"6-16 years",mode:"offline",duration:"60 minutes",price:1500,fee_type:"per_session",schedule:{timings:["Mon 4-5 PM","Wed 4-5 PM","Sat 10-11 AM"]}});console.log("✅ Sample classes created"),t("Provider Added","Provider has been added successfully and is now live!"),e("/admin/dashboard")}catch(p){console.error("Error adding provider:",p),r("Failed to Add Provider",(p==null?void 0:p.message)||"Unknown error occurred. Please try again.")}finally{i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center py-4",children:[a.jsx("button",{onClick:()=>e("/admin/dashboard"),className:"p-2 -ml-2 mr-4 hover:bg-gray-100 rounded-full",children:a.jsx(jt,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Provider"}),a.jsx("p",{className:"text-gray-600",children:"Create a new education provider profile"})]})]})})}),a.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("form",{onSubmit:x,className:"space-y-8",children:[a.jsxs(V,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx($x,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Basic Information"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name *"}),a.jsx("input",{type:"text",value:d.businessName,onChange:b=>m("businessName",b.target.value),placeholder:"e.g., Harmony Music Academy",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Owner Name *"}),a.jsx("input",{type:"text",value:d.ownerName,onChange:b=>m("ownerName",b.target.value),placeholder:"Full name of the owner",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),a.jsxs("div",{className:"relative",children:[a.jsx(xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"email",value:d.email,onChange:b=>m("email",b.target.value),placeholder:"contact@example.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),a.jsxs("div",{className:"relative",children:[a.jsx(sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"tel",value:d.phone,onChange:b=>m("phone",b.target.value),placeholder:"+91 98765 43210",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"WhatsApp Number"}),a.jsxs("div",{className:"relative",children:[a.jsx(sr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"tel",value:d.whatsapp,onChange:b=>m("whatsapp",b.target.value),placeholder:"+91 98765 43210",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),a.jsxs("div",{className:"relative",children:[a.jsx(Jx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"url",value:d.website,onChange:b=>m("website",b.target.value),placeholder:"https://www.example.com",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),a.jsx("textarea",{value:d.description,onChange:b=>m("description",b.target.value),rows:4,placeholder:"Brief description of services offered...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]}),a.jsxs(V,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(_n,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Location Information"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsxs("button",{type:"button",onClick:()=>l("auto"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border-2 transition-all ${o==="auto"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("span",{children:"🌍"}),a.jsx("span",{children:"Auto Detect"})]}),a.jsxs("button",{type:"button",onClick:()=>l("manual"),className:`flex items-center space-x-2 px-4 py-2 rounded-lg border-2 transition-all ${o==="manual"?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("span",{children:"✏️"}),a.jsx("span",{children:"Enter Manually"})]})]}),o==="auto"&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("button",{type:"button",onClick:v,disabled:c,className:`px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all ${c?"opacity-50 cursor-not-allowed":""}`,children:c?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Detecting Location..."]}):"Detect Current Location"}),a.jsx("p",{className:"text-sm text-blue-600 mt-2",children:"Click to automatically fill location details"})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),a.jsxs("select",{value:d.city,onChange:b=>{m("city",b.target.value),m("area","")},className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select City"}),Jw.map(b=>a.jsx("option",{value:b,children:b},b))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Area *"}),d.city&&ad[d.city]?a.jsxs("div",{className:"space-y-2",children:[a.jsxs("select",{value:d.area,onChange:b=>m("area",b.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[a.jsx("option",{value:"",children:"Select Area"}),ad[d.city].map(b=>a.jsx("option",{value:b,children:b},b))]}),a.jsx("div",{className:"text-center text-sm text-gray-500",children:"or"}),a.jsx("input",{type:"text",value:d.area,onChange:b=>m("area",b.target.value),placeholder:"Type area name manually",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}):a.jsx("input",{type:"text",value:d.area,onChange:b=>m("area",b.target.value),placeholder:d.city?`Enter area in ${d.city}`:"Select city first",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:!d.city})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pin Code"}),a.jsx("input",{type:"text",value:d.pincode,onChange:b=>m("pincode",b.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"123456",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",maxLength:6})]})]})]}),a.jsxs(V,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(ir,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Service Categories *"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Qw.map(b=>a.jsxs("button",{type:"button",onClick:()=>y(b.id),className:`p-4 border-2 rounded-xl transition-all text-left ${d.categories.includes(b.id)?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:[a.jsx("div",{className:"text-2xl mb-2",children:b.icon}),a.jsx("div",{className:"font-medium text-sm",children:b.name})]},b.id))})]}),a.jsxs(V,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx(ir,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Provider Status"})]}),a.jsx("div",{className:"grid grid-cols-3 gap-4",children:["pending","approved","rejected"].map(b=>a.jsx("button",{type:"button",onClick:()=>m("status",b),className:`p-4 border-2 rounded-lg transition-all ${d.status===b?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:a.jsx("div",{className:"font-medium capitalize",children:b})},b))})]}),a.jsxs("div",{className:"flex justify-end space-x-4",children:[a.jsx(D,{type:"button",variant:"outline",onClick:()=>e("/admin/dashboard"),children:"Cancel"}),a.jsxs(D,{type:"submit",disabled:s,className:"flex items-center gap-2",children:[a.jsx(il,{className:"w-4 h-4"}),s?"Adding Provider...":"Add Provider"]})]})]})})]})}function Xw(){const{user:e}=De(),t=Xe(),{showSuccess:r,showError:n}=It(),[s,i]=w.useState(!1),[o,l]=w.useState(!1),[c,u]=w.useState({email:"",password:""});w.useEffect(()=>{(e==null?void 0:e.role)==="provider"&&t("/provider/dashboard")},[e,t]);const d=(m,y)=>{u(v=>({...v,[m]:y}))},h=async m=>{var y;if(m.preventDefault(),!c.email||!c.password){n("Missing Information","Please fill all fields");return}i(!0);try{if(console.log("🔐 Starting provider login..."),c.email==="provider@demo.com"&&c.password==="provider123"){localStorage.setItem("demoUser",JSON.stringify({_id:"demo-provider-1",id:"demo-provider-1",name:"Demo Provider",email:"provider@demo.com",role:"provider",businessName:"Demo Music Academy",phone:"+91 98765 43210",isVerified:!0,location:{city:"Gurgaon",area:"Sector 15",pincode:"122001",coordinates:{lat:28.4595,lng:77.0266}}})),r("Login Successful","Welcome to BrightRoots Provider Dashboard!"),setTimeout(()=>{window.location.href="/provider/dashboard"},1e3);return}const{data:v,error:x}=await U.auth.signInWithPassword({email:c.email,password:c.password});if(x)throw x;if(!v.user)throw new Error("Login failed - no user data received");if(console.log("✅ Provider login successful"),((y=v.user.user_metadata)==null?void 0:y.role)!=="provider")throw await U.auth.signOut(),new Error("This account is not registered as a provider. Please use the parent login or create a provider account.");console.log("🔄 Login completed, waiting for auth context to handle navigation")}catch(v){console.error("❌ Provider login error:",v),i(!1);const x=(v==null?void 0:v.message)||(v==null?void 0:v.error_description)||"An unexpected error occurred";x.includes("Invalid login credentials")?n("Login Failed","Invalid email or password. Please check your credentials."):x.includes("Email not confirmed")?n("Email Not Confirmed","Please check your email and click the confirmation link before logging in."):x.includes("not registered as a provider")?n("Account Type Error",v.message):x.includes("Failed to fetch")?n("Connection Error","Unable to connect to the server. Please check your internet connection."):n("Login Failed",x)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl mb-6",children:a.jsx(ws,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Provider Login"}),a.jsx("p",{className:"text-gray-600",children:"Welcome back to BrightRoots"})]}),a.jsxs(V,{className:"p-8",children:[a.jsxs("form",{onSubmit:h,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"email",value:c.email,onChange:m=>d("email",m.target.value),placeholder:"Enter your email",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:o?"text":"password",value:c.password,onChange:m=>d("password",m.target.value),placeholder:"Enter your password",className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:o?a.jsx(Hx,{className:"w-5 h-5"}):a.jsx(fc,{className:"w-5 h-5"})})]})]}),a.jsxs(D,{type:"submit",size:"lg",className:"w-full group",disabled:s,children:[a.jsx("span",{children:s?"Logging in...":"Login to Dashboard"}),!s&&a.jsx(at,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx(Ct,{to:"/provider/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700",children:"Forgot your password?"})}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",a.jsx(Ct,{to:"/provider/signup",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Sign up here"})]})}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Demo Credentials:"}),a.jsxs("div",{className:"text-sm text-blue-800 space-y-1",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," provider@demo.com"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Password:"})," provider123"]})]})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx(Ct,{to:"/",className:"text-gray-600 hover:text-gray-800 text-sm",children:"← Back to Main App"})})]})})}function Zw(){const{user:e}=De(),t=Xe(),{showSuccess:r,showError:n}=It(),[s,i]=w.useState(!1),[o,l]=w.useState({name:"",email:"",password:""});w.useEffect(()=>{(e==null?void 0:e.role)==="provider"&&t("/provider/dashboard")},[e,t]);const c=(d,h)=>{l(m=>({...m,[d]:h}))},u=async d=>{if(d.preventDefault(),!o.name||!o.email||!o.password){n("Missing Information","Please fill all fields");return}if(o.password.length<6){n("Invalid Password","Password must be at least 6 characters long");return}i(!0);try{console.log("🚀 Starting provider signup process...");const{data:h,error:m}=await U.auth.signUp({email:o.email,password:o.password,options:{data:{name:o.name,role:"provider"}}});if(m)throw new Error(`Signup failed: ${m.message}`);if(!h.user)throw new Error("User creation failed");console.log("✅ Auth user created:",h.user.id),r("Account Created","Please check your email to verify your account, then you can login."),l({name:"",email:"",password:""}),t("/provider/login")}catch(h){console.error("❌ Provider signup error:",h),h.message.includes("User already registered")?n("Account Already Exists","An account with this email already exists. Please use the login option instead."):h.message.includes("Invalid email")?n("Invalid Email","Please enter a valid email address."):n("Signup Failed",h.message||"Account creation failed. Please try again.")}finally{i(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl mb-6",children:a.jsx(ws,{className:"w-10 h-10 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Join BrightRoots"}),a.jsx("p",{className:"text-gray-600",children:"Create your provider account"})]}),a.jsxs(V,{className:"p-8",children:[a.jsxs("form",{onSubmit:u,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(ir,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:o.name,onChange:d=>c("name",d.target.value),placeholder:"Enter your full name",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),a.jsxs("div",{className:"relative",children:[a.jsx(xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"email",value:o.email,onChange:d=>c("email",d.target.value),placeholder:"Enter your email",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx(pc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"password",value:o.password,onChange:d=>c("password",d.target.value),placeholder:"Create a password",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",required:!0,minLength:6})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 6 characters long"})]}),a.jsxs(D,{type:"submit",size:"lg",className:"w-full group",disabled:s,children:[a.jsx("span",{children:s?"Creating Account...":"Create Provider Account"}),!s&&a.jsx(at,{className:"ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",a.jsx(Ct,{to:"/provider/login",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Login here"})]})}),a.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:a.jsx("p",{className:"text-xs text-gray-500 text-center",children:"By creating an account, you agree to our Terms of Service and Privacy Policy"})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx(Ct,{to:"/",className:"text-gray-600 hover:text-gray-800 text-sm",children:"← Back to Main App"})})]})})}function fr({children:e}){const{user:t,isLoading:r}=De();return r?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?a.jsx(a.Fragment,{children:e}):a.jsx(bt,{to:"/",replace:!0})}function eo({children:e}){const{user:t,isLoading:r}=De();return r?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):!t||t.role!=="provider"?a.jsx(bt,{to:"/provider/login",replace:!0}):a.jsx(a.Fragment,{children:e})}function od({children:e}){return localStorage.getItem("adminAuth")?a.jsx(a.Fragment,{children:e}):a.jsx(bt,{to:"/admin/login",replace:!0})}function e1(){const{user:e,isLoading:t}=De(),{toasts:r,removeToast:n}=It(),s=e&&e.role==="parent"&&!["/login","/location","/"].includes(window.location.pathname);return bc.useEffect(()=>{if(!t&&e){const i=window.location.pathname;if(console.log("🎯 User loaded, checking redirect:",{user:e.role,currentPath:i}),e.role==="provider"&&i==="/provider/login"){console.log("🔄 Redirecting provider from login to dashboard"),window.location.href="/provider/dashboard";return}if(e.role==="parent"&&!e.location&&(i==="/"||i==="/login")){console.log("🔄 Redirecting parent to location setup"),window.location.href="/location";return}if(e.role==="parent"&&e.location&&(i==="/"||i==="/login")){console.log("🔄 Redirecting parent to home"),window.location.href="/home";return}}},[e,t]),bc.useEffect(()=>{console.log("🎯 App state update - Current user:",e),console.log("🌐 Current pathname:",window.location.pathname),console.log("📱 Show bottom nav:",s),e&&(console.log("👤 User found with role:",e.role),e.role==="provider"?console.log("🏢 Provider user - should redirect to dashboard or onboarding"):console.log("👨‍👩‍👧‍👦 Parent user - should redirect to location or home"))},[e]),a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsxs(R0,{children:[a.jsx(ue,{path:"/",element:e?a.jsx(bt,{to:"/home"}):a.jsx(Pw,{})}),a.jsx(ue,{path:"/provider/login",element:e?a.jsx(bt,{to:"/provider/dashboard"}):a.jsx(Xw,{})}),a.jsx(ue,{path:"/provider/signup",element:e?a.jsx(bt,{to:"/provider/dashboard"}):a.jsx(Zw,{})}),a.jsx(ue,{path:"/admin/login",element:a.jsx(Gw,{})}),a.jsx(ue,{path:"/admin/dashboard",element:a.jsx(od,{children:a.jsx(Kw,{})})}),a.jsx(ue,{path:"/admin/add-provider",element:a.jsx(od,{children:a.jsx(Yw,{})})}),a.jsx(ue,{path:"/debug-login",element:a.jsx(Vw,{})}),a.jsx(ue,{path:"/location",element:a.jsx(fr,{children:a.jsx(Rw,{})})}),a.jsx(ue,{path:"/home",element:a.jsx(fr,{children:a.jsx(Lw,{})})}),a.jsx(ue,{path:"/provider/:id",element:a.jsx(fr,{children:a.jsx($w,{})})}),a.jsx(ue,{path:"/enquiries",element:a.jsx(fr,{children:a.jsx(Ow,{})})}),a.jsx(ue,{path:"/provider/onboarding",element:a.jsx(eo,{children:a.jsx(Fw,{})})}),a.jsx(ue,{path:"/provider/dashboard",element:a.jsx(eo,{children:a.jsx(Ww,{})})}),a.jsx(ue,{path:"/provider/setup",element:a.jsx(eo,{children:a.jsx(qw,{})})}),a.jsx(ue,{path:"/provider/*",element:(e==null?void 0:e.role)==="provider"?a.jsx(bt,{to:"/provider/setup",replace:!0}):a.jsx(bt,{to:"/provider/login",replace:!0})}),a.jsx(ue,{path:"/search",element:a.jsx(fr,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center pb-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Search"}),a.jsx("p",{className:"text-gray-600",children:"Advanced search coming soon..."})]})})})}),a.jsx(ue,{path:"/wishlist",element:a.jsx(fr,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center pb-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Wishlist"}),a.jsx("p",{className:"text-gray-600",children:"Your saved providers will appear here..."})]})})})}),a.jsx(ue,{path:"/profile",element:a.jsx(fr,{children:a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center pb-16",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Profile"}),a.jsx("p",{className:"text-gray-600",children:"Profile settings coming soon..."})]})})})}),a.jsx(ue,{path:"*",element:a.jsx(bt,{to:"/",replace:!0})})]}),s&&a.jsx(Ew,{}),a.jsx(Cw,{toasts:r,onClose:n})]})}function t1(){return a.jsx(kw,{children:a.jsx(e1,{})})}bf(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsx(ey,{children:a.jsx(t1,{})})}));
